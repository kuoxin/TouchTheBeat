!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=Z.type(e);return"function"===i||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(Z.isFunction(t))return Z.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return Z.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ot.test(t))return Z.filter(t,e,i);t=Z.filter(t,e)}return Z.grep(e,function(e){return G.call(t,e)>=0!==i})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t=ft[e]={};return Z.each(e.match(ht)||[],function(e,i){t[i]=!0}),t}function s(){K.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Z.ready()}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+Math.random()}function l(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(xt,"-$1").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:bt.test(i)?Z.parseJSON(i):i}catch(r){}vt.set(e,t,i)}else i=void 0;return i}function c(){return!0}function u(){return!1}function p(){try{return K.activeElement}catch(e){}}function d(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=It.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var i=0,n=e.length;n>i;i++)gt.set(e[i],"globalEval",!t||gt.get(t[i],"globalEval"))}function y(e,t){var i,n,r,a,s,o,l,c;if(1===t.nodeType){if(gt.hasData(e)&&(a=gt.access(e),s=gt.set(t,a),c=a.events)){delete s.handle,s.events={};for(r in c)for(i=0,n=c[r].length;n>i;i++)Z.event.add(t,r,c[r][i])}vt.hasData(e)&&(o=vt.access(e),l=Z.extend({},o),vt.set(t,l))}}function g(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],i):i}function v(e,t){var i=t.nodeName.toLowerCase();"input"===i&&_t.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function b(t,i){var n,r=Z(i.createElement(t)).appendTo(i.body),a=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(r[0]))?n.display:Z.css(r[0],"display");return r.detach(),a}function x(e){var t=K,i=Dt[e];return i||(i=b(e,t),"none"!==i&&i||(Ft=(Ft||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ft[0].contentDocument,t.write(),t.close(),i=b(e,t),Ft.detach()),Dt[e]=i),i}function T(e,t,i){var n,r,a,s,o=e.style;return i=i||Ut(e),i&&(s=i.getPropertyValue(t)||i[t]),i&&(""!==s||Z.contains(e.ownerDocument,e)||(s=Z.style(e,t)),qt.test(s)&&Bt.test(t)&&(n=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=i.width,o.width=n,o.minWidth=r,o.maxWidth=a)),void 0!==s?s+"":s}function w(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var i=t[0].toUpperCase()+t.slice(1),n=t,r=Yt.length;r--;)if(t=Yt[r]+i,t in e)return t;return n}function _(e,t,i){var n=Ht.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function C(e,t,i,n,r){for(var a=i===(n?"border":"content")?4:"width"===t?1:0,s=0;4>a;a+=2)"margin"===i&&(s+=Z.css(e,i+wt[a],!0,r)),n?("content"===i&&(s-=Z.css(e,"padding"+wt[a],!0,r)),"margin"!==i&&(s-=Z.css(e,"border"+wt[a]+"Width",!0,r))):(s+=Z.css(e,"padding"+wt[a],!0,r),"padding"!==i&&(s+=Z.css(e,"border"+wt[a]+"Width",!0,r)));return s}function S(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=Ut(e),s="border-box"===Z.css(e,"boxSizing",!1,a);if(0>=r||null==r){if(r=T(e,t,a),(0>r||null==r)&&(r=e.style[t]),qt.test(r))return r;n=s&&(J.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+C(e,t,i||(s?"border":"content"),n,a)+"px"}function E(e,t){for(var i,n,r,a=[],s=0,o=e.length;o>s;s++)n=e[s],n.style&&(a[s]=gt.get(n,"olddisplay"),i=n.style.display,t?(a[s]||"none"!==i||(n.style.display=""),""===n.style.display&&kt(n)&&(a[s]=gt.access(n,"olddisplay",x(n.nodeName)))):(r=kt(n),"none"===i&&r||gt.set(n,"olddisplay",r?i:Z.css(n,"display"))));for(s=0;o>s;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[s]||"":"none"));return e}function z(e,t,i,n,r){return new z.prototype.init(e,t,i,n,r)}function A(){return setTimeout(function(){Jt=void 0}),Jt=Z.now()}function j(e,t){var i,n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t)i=wt[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function O(e,t,i){for(var n,r=(ii[t]||[]).concat(ii["*"]),a=0,s=r.length;s>a;a++)if(n=r[a].call(i,t,e))return n}function N(e,t,i){var n,r,a,s,o,l,c,u,p=this,d={},h=e.style,f=e.nodeType&&kt(e),m=gt.get(e,"fxshow");i.queue||(o=Z._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,p.always(function(){p.always(function(){o.unqueued--,Z.queue(e,"fx").length||o.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],c=Z.css(e,"display"),u="none"===c?gt.get(e,"olddisplay")||x(e.nodeName):c,"inline"===u&&"none"===Z.css(e,"float")&&(h.display="inline-block")),i.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],Qt.exec(r)){if(delete t[n],a=a||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}d[n]=m&&m[n]||Z.style(e,n)}else c=void 0;if(Z.isEmptyObject(d))"inline"===("none"===c?x(e.nodeName):c)&&(h.display=c);else{m?"hidden"in m&&(f=m.hidden):m=gt.access(e,"fxshow",{}),a&&(m.hidden=!f),f?Z(e).show():p.done(function(){Z(e).hide()}),p.done(function(){var t;gt.remove(e,"fxshow");for(t in d)Z.style(e,t,d[t])});for(n in d)s=O(f?m[n]:0,n,p),n in m||(m[n]=s.start,f&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function M(e,t){var i,n,r,a,s;for(i in e)if(n=Z.camelCase(i),r=t[n],a=e[i],Z.isArray(a)&&(r=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),s=Z.cssHooks[n],s&&"expand"in s){a=s.expand(a),delete e[n];for(i in a)i in e||(e[i]=a[i],t[i]=r)}else t[n]=r}function P(e,t,i){var n,r,a=0,s=ti.length,o=Z.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Jt||A(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,a=1-n,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(a);return o.notifyWith(e,[c,a,i]),1>a&&l?i:(o.resolveWith(e,[c]),!1)},c=o.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Jt||A(),duration:i.duration,tweens:[],createTween:function(t,i){var n=Z.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)c.tweens[i].run(1);return t?o.resolveWith(e,[c,t]):o.rejectWith(e,[c,t]),this}}),u=c.props;for(M(u,c.opts.specialEasing);s>a;a++)if(n=ti[a].call(c,e,u,c.opts))return n;return Z.map(u,O,c),Z.isFunction(c.opts.start)&&c.opts.start.call(e,c),Z.fx.timer(Z.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function R(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,a=t.toLowerCase().match(ht)||[];if(Z.isFunction(i))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function I(e,t,i,n){function r(o){var l;return a[o]=!0,Z.each(e[o]||[],function(e,o){var c=o(t,i,n);return"string"!=typeof c||s||a[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var a={},s=e===Ti;return r(t.dataTypes[0])||!a["*"]&&r("*")}function L(e,t){var i,n,r=Z.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&Z.extend(!0,e,n),e}function $(e,t,i){for(var n,r,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in o)if(o[r]&&o[r].test(n)){l.unshift(r);break}if(l[0]in i)a=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}s||(s=r)}a=a||s}return a?(a!==l[0]&&l.unshift(a),i[a]):void 0}function F(e,t,i,n){var r,a,s,o,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(a=u.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(s=c[l+" "+a]||c["* "+a],!s)for(r in c)if(o=r.split(" "),o[1]===a&&(s=c[l+" "+o[0]]||c["* "+o[0]])){s===!0?s=c[r]:c[r]!==!0&&(a=o[0],u.unshift(o[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function D(e,t,i,n){var r;if(Z.isArray(t))Z.each(t,function(t,r){i||Ci.test(e)?n(e,r):D(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==Z.type(t))n(e,t);else for(r in t)D(e+"["+r+"]",t[r],i,n)}function B(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var q=[],U=q.slice,V=q.concat,H=q.push,G=q.indexOf,W={},X=W.toString,Y=W.hasOwnProperty,J={},K=e.document,Q="2.1.1",Z=function(e,t){return new Z.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,it=/-([\da-z])/gi,nt=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return U.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:U.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(U.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:H,sort:q.sort,splice:q.splice},Z.extend=Z.fn.extend=function(){var e,t,i,n,r,a,s=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[o]||{},o++),"object"==typeof s||Z.isFunction(s)||(s={}),o===l&&(s=this,o--);l>o;o++)if(null!=(e=arguments[o]))for(t in e)i=s[t],n=e[t],s!==n&&(c&&n&&(Z.isPlainObject(n)||(r=Z.isArray(n)))?(r?(r=!1,a=i&&Z.isArray(i)?i:[]):a=i&&Z.isPlainObject(i)?i:{},s[t]=Z.extend(c,a,n)):void 0!==n&&(s[t]=n));return s},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!Y.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?W[X.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=K.createElement("script"),t.text=e,K.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(it,nt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,a=0,s=e.length,o=i(e);if(n){if(o)for(;s>a&&(r=t.apply(e[a],n),r!==!1);a++);else for(a in e)if(r=t.apply(e[a],n),r===!1)break}else if(o)for(;s>a&&(r=t.call(e[a],a,e[a]),r!==!1);a++);else for(a in e)if(r=t.call(e[a],a,e[a]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?Z.merge(n,"string"==typeof e?[e]:e):H.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:G.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n,r=[],a=0,s=e.length,o=!i;s>a;a++)n=!t(e[a],a),n!==o&&r.push(e[a]);return r},map:function(e,t,n){var r,a=0,s=e.length,o=i(e),l=[];if(o)for(;s>a;a++)r=t(e[a],a,n),null!=r&&l.push(r);else for(a in e)r=t(e[a],a,n),null!=r&&l.push(r);return V.apply([],l)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(i=e[t],t=e,e=i),Z.isFunction(e)?(n=U.call(arguments,2),r=function(){return e.apply(t||this,n.concat(U.call(arguments)))},r.guid=e.guid=e.guid||Z.guid++,r):void 0},now:Date.now,support:J}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){W["[object "+t+"]"]=t.toLowerCase()});var rt=function(e){function t(e,t,i,n){var r,a,s,o,l,c,p,h,f,m;if((t?t.ownerDocument||t:D)!==N&&O(t),t=t||N,i=i||[],!e||"string"!=typeof e)return i;if(1!==(o=t.nodeType)&&9!==o)return[];if(P&&!n){if(r=vt.exec(e))if(s=r[1]){if(9===o){if(a=t.getElementById(s),!a||!a.parentNode)return i;if(a.id===s)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&$(t,a)&&a.id===s)return i.push(a),i}else{if(r[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((s=r[3])&&T.getElementsByClassName&&t.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(s)),i}if(T.qsa&&(!R||!R.test(e))){if(h=p=F,f=t,m=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(c=C(e),(p=t.getAttribute("id"))?h=p.replace(xt,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+d(c[l]);f=bt.test(e)&&u(t.parentNode)||t,m=c.join(",")}if(m)try{return Z.apply(i,f.querySelectorAll(m)),i}catch(y){}finally{p||t.removeAttribute("id")}}}return E(e.replace(lt,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>w.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[F]=!0,e}function r(e){var t=N.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var i=e.split("|"),n=e.length;n--;)w.attrHandle[i[n]]=t}function s(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function o(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var r,a=e([],i.length,t),s=a.length;s--;)i[r=a[s]]&&(i[r]=!(n[r]=i[r]))})})}function u(e){return e&&typeof e.getElementsByTagName!==W&&e}function p(){}function d(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function h(e,t,i){var n=t.dir,r=i&&"parentNode"===n,a=q++;return t.first?function(t,i,a){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,a)}:function(t,i,s){var o,l,c=[B,a];if(s){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if(l=t[F]||(t[F]={}),(o=l[n])&&o[0]===B&&o[1]===a)return c[2]=o[2];if(l[n]=c,c[2]=e(t,i,s))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function m(e,i,n){for(var r=0,a=i.length;a>r;r++)t(e,i[r],n);return n}function y(e,t,i,n,r){for(var a,s=[],o=0,l=e.length,c=null!=t;l>o;o++)(a=e[o])&&(!i||i(a,n,r))&&(s.push(a),c&&t.push(o));return s}function g(e,t,i,r,a,s){return r&&!r[F]&&(r=g(r)),a&&!a[F]&&(a=g(a,s)),n(function(n,s,o,l){var c,u,p,d=[],h=[],f=s.length,g=n||m(t||"*",o.nodeType?[o]:o,[]),v=!e||!n&&t?g:y(g,d,e,o,l),b=i?a||(n?e:f||r)?[]:s:v;if(i&&i(v,b,o,l),r)for(c=y(b,h),r(c,[],o,l),u=c.length;u--;)(p=c[u])&&(b[h[u]]=!(v[h[u]]=p));if(n){if(a||e){if(a){for(c=[],u=b.length;u--;)(p=b[u])&&c.push(v[u]=p);a(null,b=[],c,l)}for(u=b.length;u--;)(p=b[u])&&(c=a?tt.call(n,p):d[u])>-1&&(n[c]=!(s[c]=p))}}else b=y(b===s?b.splice(f,b.length):b),a?a(null,s,b,l):Z.apply(s,b)})}function v(e){for(var t,i,n,r=e.length,a=w.relative[e[0].type],s=a||w.relative[" "],o=a?1:0,l=h(function(e){return e===t},s,!0),c=h(function(e){return tt.call(t,e)>-1},s,!0),u=[function(e,i,n){return!a&&(n||i!==z)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];r>o;o++)if(i=w.relative[e[o].type])u=[h(f(u),i)];else{if(i=w.filter[e[o].type].apply(null,e[o].matches),i[F]){for(n=++o;r>n&&!w.relative[e[n].type];n++);return g(o>1&&f(u),o>1&&d(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(lt,"$1"),i,n>o&&v(e.slice(o,n)),r>n&&v(e=e.slice(n)),r>n&&d(e))}u.push(i)}return f(u)}function b(e,i){var r=i.length>0,a=e.length>0,s=function(n,s,o,l,c){var u,p,d,h=0,f="0",m=n&&[],g=[],v=z,b=n||a&&w.find.TAG("*",c),x=B+=null==v?1:Math.random()||.1,T=b.length;for(c&&(z=s!==N&&s);f!==T&&null!=(u=b[f]);f++){if(a&&u){for(p=0;d=e[p++];)if(d(u,s,o)){l.push(u);break}c&&(B=x)}r&&((u=!d&&u)&&h--,n&&m.push(u))}if(h+=f,r&&f!==h){for(p=0;d=i[p++];)d(m,g,s,o);if(n){if(h>0)for(;f--;)m[f]||g[f]||(g[f]=K.call(l));g=y(g)}Z.apply(l,g),c&&!n&&g.length>0&&h+i.length>1&&t.uniqueSort(l)}return c&&(B=x,z=v),m};return r?n(s):s}var x,T,w,k,_,C,S,E,z,A,j,O,N,M,P,R,I,L,$,F="sizzle"+-new Date,D=e.document,B=0,q=0,U=i(),V=i(),H=i(),G=function(e,t){return e===t&&(j=!0),0},W="undefined",X=1<<31,Y={}.hasOwnProperty,J=[],K=J.pop,Q=J.push,Z=J.push,et=J.slice,tt=J.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at=rt.replace("w","w#"),st="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+at+"))|)"+nt+"*\\]",ot=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),pt=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(ot),ht=new RegExp("^"+at+"$"),ft={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,yt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,xt=/'|\\/g,Tt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(J=et.call(D.childNodes),D.childNodes),J[D.childNodes.length].nodeType}catch(kt){Z={apply:J.length?function(e,t){Q.apply(e,et.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}T=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},O=t.setDocument=function(e){var t,i=e?e.ownerDocument||e:D,n=i.defaultView;return i!==N&&9===i.nodeType&&i.documentElement?(N=i,M=i.documentElement,P=!_(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){O()},!1):n.attachEvent&&n.attachEvent("onunload",function(){O()})),T.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=gt.test(i.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),T.getById=r(function(e){return M.appendChild(e).id=F,!i.getElementsByName||!i.getElementsByName(F).length}),T.getById?(w.find.ID=function(e,t){if(typeof t.getElementById!==W&&P){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},w.filter.ID=function(e){var t=e.replace(Tt,wt);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var t=e.replace(Tt,wt);return function(e){var i=typeof e.getAttributeNode!==W&&e.getAttributeNode("id");return i&&i.value===t}}),w.find.TAG=T.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==W?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[r++];)1===i.nodeType&&n.push(i);return n}return a},w.find.CLASS=T.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==W&&P?t.getElementsByClassName(e):void 0},I=[],R=[],(T.qsa=gt.test(i.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&R.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+nt+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||R.push(":checked")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(T.matchesSelector=gt.test(L=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&r(function(e){T.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),I.push("!=",ot)}),R=R.length&&new RegExp(R.join("|")),I=I.length&&new RegExp(I.join("|")),t=gt.test(M.compareDocumentPosition),$=t||gt.test(M.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return j=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!T.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===D&&$(D,e)?-1:t===i||t.ownerDocument===D&&$(D,t)?1:A?tt.call(A,e)-tt.call(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return j=!0,0;var n,r=0,a=e.parentNode,o=t.parentNode,l=[e],c=[t];if(!a||!o)return e===i?-1:t===i?1:a?-1:o?1:A?tt.call(A,e)-tt.call(A,t):0;if(a===o)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?s(l[r],c[r]):l[r]===D?-1:c[r]===D?1:0},i):N},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==N&&O(e),i=i.replace(pt,"='$1']"),!(!T.matchesSelector||!P||I&&I.test(i)||R&&R.test(i)))try{var n=L.call(e,i);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return t(i,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&O(e),$(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&O(e);var i=w.attrHandle[t.toLowerCase()],n=i&&Y.call(w.attrHandle,t.toLowerCase())?i(e,t,!P):void 0;return void 0!==n?n:T.attributes||!P?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(j=!T.detectDuplicates,A=!T.sortStable&&e.slice(0),e.sort(G),j){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return A=null,e},k=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=k(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=k(t);return i},w=t.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Tt,wt),e[3]=(e[3]||e[4]||e[5]||"").replace(Tt,wt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&dt.test(i)&&(t=C(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Tt,wt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==W&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var a=t.attr(r,e);return null==a?"!="===i:i?(a+="","="===i?a===n:"!="===i?a!==n:"^="===i?n&&0===a.indexOf(n):"*="===i?n&&a.indexOf(n)>-1:"$="===i?n&&a.slice(-n.length)===n:"~="===i?(" "+a+" ").indexOf(n)>-1:"|="===i?a===n||a.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,r){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var c,u,p,d,h,f,m=a!==s?"nextSibling":"previousSibling",y=t.parentNode,g=o&&t.nodeName.toLowerCase(),v=!l&&!o;if(y){if(a){for(;m;){for(p=t;p=p[m];)if(o?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?y.firstChild:y.lastChild],s&&v){for(u=y[F]||(y[F]={}),c=u[e]||[],h=c[0]===B&&c[1],d=c[0]===B&&c[2],p=h&&y.childNodes[h];p=++h&&p&&p[m]||(d=h=0)||f.pop();)if(1===p.nodeType&&++d&&p===t){u[e]=[B,h,d];break}}else if(v&&(c=(t[F]||(t[F]={}))[e])&&c[0]===B)d=c[1];else for(;(p=++h&&p&&p[m]||(d=h=0)||f.pop())&&((o?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++d||(v&&((p[F]||(p[F]={}))[e]=[B,d]),p!==t)););return d-=r,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(e,i){var r,a=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[F]?a(i):a.length>1?(r=[e,e,"",i],w.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=a(e,i),s=r.length;s--;)n=tt.call(e,r[s]),e[n]=!(t[n]=r[s])}):function(e){return a(e,0,r)}):a}},pseudos:{not:n(function(e){var t=[],i=[],r=S(e.replace(lt,"$1"));return r[F]?n(function(e,t,i,n){for(var a,s=r(e,null,n,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))}):function(e,n,a){return t[0]=e,r(t,null,a,i),!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:n(function(e){return ht.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Tt,wt).toLowerCase(),function(t){var i;do if(i=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return yt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[0>i?i+t:i]}),even:c(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:c(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},w.pseudos.nth=w.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[x]=o(x);for(x in{submit:!0,reset:!0})w.pseudos[x]=l(x);return p.prototype=w.filters=w.pseudos,w.setFilters=new p,C=t.tokenize=function(e,i){var n,r,a,s,o,l,c,u=V[e+" "];if(u)return i?0:u.slice(0);for(o=e,l=[],c=w.preFilter;o;){(!n||(r=ct.exec(o)))&&(r&&(o=o.slice(r[0].length)||o),l.push(a=[])),n=!1,(r=ut.exec(o))&&(n=r.shift(),a.push({value:n,type:r[0].replace(lt," ")}),o=o.slice(n.length));for(s in w.filter)!(r=ft[s].exec(o))||c[s]&&!(r=c[s](r))||(n=r.shift(),a.push({value:n,type:s,matches:r}),o=o.slice(n.length));if(!n)break}return i?o.length:o?t.error(e):V(e,l).slice(0)},S=t.compile=function(e,t){var i,n=[],r=[],a=H[e+" "];if(!a){for(t||(t=C(e)),i=t.length;i--;)a=v(t[i]),a[F]?n.push(a):r.push(a);a=H(e,b(r,n)),a.selector=e}return a},E=t.select=function(e,t,i,n){var r,a,s,o,l,c="function"==typeof e&&e,p=!n&&C(e=c.selector||e);if(i=i||[],1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(s=a[0]).type&&T.getById&&9===t.nodeType&&P&&w.relative[a[1].type]){if(t=(w.find.ID(s.matches[0].replace(Tt,wt),t)||[])[0],!t)return i;c&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=ft.needsContext.test(e)?0:a.length;r--&&(s=a[r],!w.relative[o=s.type]);)if((l=w.find[o])&&(n=l(s.matches[0].replace(Tt,wt),bt.test(a[0].type)&&u(t.parentNode)||t))){if(a.splice(r,1),e=n.length&&d(a),!e)return Z.apply(i,n),i;break}}return(c||S(e,p))(n,t,!P,i,bt.test(e)&&u(t.parentNode)||t),i},T.sortStable=F.split("").sort(G).join("")===F,T.detectDuplicates=!!j,O(),T.sortDetached=r(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||a(it,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);Z.find=rt,Z.expr=rt.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=rt.uniqueSort,Z.text=rt.getText,Z.isXMLDoc=rt.isXML,Z.contains=rt.contains;var at=Z.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ot=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?Z.find.matchesSelector(n,e)?[n]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;i>t;t++)if(Z.contains(r[t],this))return!0
}));for(t=0;i>t;t++)Z.find(e,r[t],n);return n=this.pushStack(i>1?Z.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&at.test(e)?Z(e):e||[],!1).length}});var lt,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ut=Z.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ct.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||lt).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:K,!0)),st.test(i[1])&&Z.isPlainObject(t))for(i in t)Z.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return n=K.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=K,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof lt.ready?lt.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ut.prototype=Z.fn,lt=Z(K);var pt=/^(?:parents|prev(?:Until|All))/,dt={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Z(e).is(i))break;n.push(e)}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),Z.fn.extend({has:function(e){var t=Z(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,a=[],s=at.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&Z.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(a.length>1?Z.unique(a):a)},index:function(e){return e?"string"==typeof e?G.call(Z(e),this[0]):G.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,i){return Z.dir(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,i){return Z.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return Z.dir(e,"previousSibling",i)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(i,n){var r=Z.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=Z.filter(n,r)),this.length>1&&(dt[e]||Z.unique(r),pt.test(e)&&r.reverse()),this.pushStack(r)}});var ht=/\S+/g,ft={};Z.Callbacks=function(e){e="string"==typeof e?ft[e]||a(e):Z.extend({},e);var t,i,n,r,s,o,l=[],c=!e.once&&[],u=function(a){for(t=e.memory&&a,i=!0,o=r||0,r=0,s=l.length,n=!0;l&&s>o;o++)if(l[o].apply(a[0],a[1])===!1&&e.stopOnFalse){t=!1;break}n=!1,l&&(c?c.length&&u(c.shift()):t?l=[]:p.disable())},p={add:function(){if(l){var i=l.length;!function a(t){Z.each(t,function(t,i){var n=Z.type(i);"function"===n?e.unique&&p.has(i)||l.push(i):i&&i.length&&"string"!==n&&a(i)})}(arguments),n?s=l.length:t&&(r=i,u(t))}return this},remove:function(){return l&&Z.each(arguments,function(e,t){for(var i;(i=Z.inArray(t,l,i))>-1;)l.splice(i,1),n&&(s>=i&&s--,o>=i&&o--)}),this},has:function(e){return e?Z.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||p.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||i&&!c||(t=t||[],t=[e,t.slice?t.slice():t],n?c.push(t):u(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(i){Z.each(t,function(t,a){var s=Z.isFunction(e[t])&&e[t];r[a[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[a[0]+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,n):n}},r={};return n.pipe=n.then,Z.each(t,function(e,a){var s=a[2],o=a[3];n[a[1]]=s.add,o&&s.add(function(){i=o},t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?n:this,arguments),this},r[a[0]+"With"]=s.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,a=U.call(arguments),s=a.length,o=1!==s||e&&Z.isFunction(e.promise)?s:0,l=1===o?e:Z.Deferred(),c=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?U.call(arguments):r,n===t?l.notifyWith(i,n):--o||l.resolveWith(i,n)}};if(s>1)for(t=new Array(s),i=new Array(s),n=new Array(s);s>r;r++)a[r]&&Z.isFunction(a[r].promise)?a[r].promise().done(c(r,n,a)).fail(l.reject).progress(c(r,i,t)):--o;return o||l.resolveWith(n,a),l.promise()}});var mt;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(mt.resolveWith(K,[Z]),Z.fn.triggerHandler&&(Z(K).triggerHandler("ready"),Z(K).off("ready"))))}}),Z.ready.promise=function(t){return mt||(mt=Z.Deferred(),"complete"===K.readyState?setTimeout(Z.ready):(K.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),mt.promise(t)},Z.ready.promise();var yt=Z.access=function(e,t,i,n,r,a,s){var o=0,l=e.length,c=null==i;if("object"===Z.type(i)){r=!0;for(o in i)Z.access(e,t,o,i[o],!0,a,s)}else if(void 0!==n&&(r=!0,Z.isFunction(n)||(s=!0),c&&(s?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(Z(e),i)})),t))for(;l>o;o++)t(e[o],i,s?n:n.call(e[o],o,t(e[o],i)));return r?e:c?t.call(e):l?t(e[0],i):a};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},o.uid=1,o.accepts=Z.acceptData,o.prototype={key:function(e){if(!o.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=o.uid++;try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,Z.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,r=this.key(e),a=this.cache[r];if("string"==typeof t)a[t]=i;else if(Z.isEmptyObject(a))Z.extend(this.cache[r],t);else for(n in t)a[n]=t[n];return a},get:function(e,t){var i=this.cache[this.key(e)];return void 0===t?i:i[t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,Z.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,a=this.key(e),s=this.cache[a];if(void 0===t)this.cache[a]={};else{Z.isArray(t)?n=t.concat(t.map(Z.camelCase)):(r=Z.camelCase(t),t in s?n=[t,r]:(n=r,n=n in s?[n]:n.match(ht)||[])),i=n.length;for(;i--;)delete s[n[i]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var gt=new o,vt=new o,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xt=/([A-Z])/g;Z.extend({hasData:function(e){return vt.hasData(e)||gt.hasData(e)},data:function(e,t,i){return vt.access(e,t,i)},removeData:function(e,t){vt.remove(e,t)},_data:function(e,t,i){return gt.access(e,t,i)},_removeData:function(e,t){gt.remove(e,t)}}),Z.fn.extend({data:function(e,t){var i,n,r,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(r=vt.get(a),1===a.nodeType&&!gt.get(a,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=Z.camelCase(n.slice(5)),l(a,n,r[n])));gt.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){vt.set(this,e)}):yt(this,function(t){var i,n=Z.camelCase(e);if(a&&void 0===t){if(i=vt.get(a,e),void 0!==i)return i;if(i=vt.get(a,n),void 0!==i)return i;if(i=l(a,n,void 0),void 0!==i)return i}else this.each(function(){var i=vt.get(this,n);vt.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&vt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){vt.remove(this,e)})}}),Z.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=gt.get(e,t),i&&(!n||Z.isArray(i)?n=gt.access(e,t,Z.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=Z.queue(e,t),n=i.length,r=i.shift(),a=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,s,a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return gt.get(e,i)||gt.access(e,i,{empty:Z.Callbacks("once memory").add(function(){gt.remove(e,[t+"queue",i])})})}}),Z.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?Z.queue(this[0],e):void 0===t?this:this.each(function(){var i=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=Z.Deferred(),a=this,s=this.length,o=function(){--n||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)i=gt.get(a[s],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(o));return o(),r.promise(t)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=["Top","Right","Bottom","Left"],kt=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},_t=/^(?:checkbox|radio)$/i;!function(){var e=K.createDocumentFragment(),t=e.appendChild(K.createElement("div")),i=K.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),J.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",J.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ct="undefined";J.focusinBubbles="onfocusin"in e;var St=/^key/,Et=/^(?:mouse|pointer|contextmenu)|click/,zt=/^(?:focusinfocus|focusoutblur)$/,At=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,i,n,r){var a,s,o,l,c,u,p,d,h,f,m,y=gt.get(e);if(y)for(i.handler&&(a=i,i=a.handler,r=a.selector),i.guid||(i.guid=Z.guid++),(l=y.events)||(l=y.events={}),(s=y.handle)||(s=y.handle=function(t){return typeof Z!==Ct&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ht)||[""],c=t.length;c--;)o=At.exec(t[c])||[],h=m=o[1],f=(o[2]||"").split(".").sort(),h&&(p=Z.event.special[h]||{},h=(r?p.delegateType:p.bindType)||h,p=Z.event.special[h]||{},u=Z.extend({type:h,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&Z.expr.match.needsContext.test(r),namespace:f.join(".")},a),(d=l[h])||(d=l[h]=[],d.delegateCount=0,p.setup&&p.setup.call(e,n,f,s)!==!1||e.addEventListener&&e.addEventListener(h,s,!1)),p.add&&(p.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),Z.event.global[h]=!0)},remove:function(e,t,i,n,r){var a,s,o,l,c,u,p,d,h,f,m,y=gt.hasData(e)&&gt.get(e);if(y&&(l=y.events)){for(t=(t||"").match(ht)||[""],c=t.length;c--;)if(o=At.exec(t[c])||[],h=m=o[1],f=(o[2]||"").split(".").sort(),h){for(p=Z.event.special[h]||{},h=(n?p.delegateType:p.bindType)||h,d=l[h]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=d.length;a--;)u=d[a],!r&&m!==u.origType||i&&i.guid!==u.guid||o&&!o.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(a,1),u.selector&&d.delegateCount--,p.remove&&p.remove.call(e,u));s&&!d.length&&(p.teardown&&p.teardown.call(e,f,y.handle)!==!1||Z.removeEvent(e,h,y.handle),delete l[h])}else for(h in l)Z.event.remove(e,h+t[c],i,n,!0);Z.isEmptyObject(l)&&(delete y.handle,gt.remove(e,"events"))}},trigger:function(t,i,n,r){var a,s,o,l,c,u,p,d=[n||K],h=Y.call(t,"type")?t.type:t,f=Y.call(t,"namespace")?t.namespace.split("."):[];if(s=o=n=n||K,3!==n.nodeType&&8!==n.nodeType&&!zt.test(h+Z.event.triggered)&&(h.indexOf(".")>=0&&(f=h.split("."),h=f.shift(),f.sort()),c=h.indexOf(":")<0&&"on"+h,t=t[Z.expando]?t:new Z.Event(h,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:Z.makeArray(i,[t]),p=Z.event.special[h]||{},r||!p.trigger||p.trigger.apply(n,i)!==!1)){if(!r&&!p.noBubble&&!Z.isWindow(n)){for(l=p.delegateType||h,zt.test(l+h)||(s=s.parentNode);s;s=s.parentNode)d.push(s),o=s;o===(n.ownerDocument||K)&&d.push(o.defaultView||o.parentWindow||e)}for(a=0;(s=d[a++])&&!t.isPropagationStopped();)t.type=a>1?l:p.bindType||h,u=(gt.get(s,"events")||{})[t.type]&&gt.get(s,"handle"),u&&u.apply(s,i),u=c&&s[c],u&&u.apply&&Z.acceptData(s)&&(t.result=u.apply(s,i),t.result===!1&&t.preventDefault());return t.type=h,r||t.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),i)!==!1||!Z.acceptData(n)||c&&Z.isFunction(n[h])&&!Z.isWindow(n)&&(o=n[c],o&&(n[c]=null),Z.event.triggered=h,n[h](),Z.event.triggered=void 0,o&&(n[c]=o)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,i,n,r,a,s=[],o=U.call(arguments),l=(gt.get(this,"events")||{})[e.type]||[],c=Z.event.special[e.type]||{};if(o[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,i=0;(a=r.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,n=((Z.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,o),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,a,s=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(n=[],i=0;o>i;i++)a=t[i],r=a.selector+" ",void 0===n[r]&&(n[r]=a.needsContext?Z(r,this).index(l)>=0:Z.find(r,this,null,[l]).length),n[r]&&n.push(a);n.length&&s.push({elem:l,handlers:n})}return o<t.length&&s.push({elem:this,handlers:t.slice(o)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,a=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||K,n=i.documentElement,r=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,i,n,r=e.type,a=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Et.test(r)?this.mouseHooks:St.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new Z.Event(a),t=n.length;t--;)i=n[t],e[i]=a[i];return e.target||(e.target=K),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==p()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=Z.extend(new Z.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?Z.event.trigger(r,null,t):Z.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},Z.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?c:u):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,a=e.handleObj;return(!r||r!==n&&!Z.contains(n,r))&&(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}}),J.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=gt.access(n,t);r||n.addEventListener(e,i,!0),gt.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=gt.access(n,t)-1;r?gt.access(n,t,r):(n.removeEventListener(e,i,!0),gt.remove(n,t))}}}),Z.fn.extend({on:function(e,t,i,n,r){var a,s;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(s in e)this.on(s,t,i,e[s],r);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=u;else if(!n)return this;return 1===r&&(a=n,n=function(e){return Z().off(e),a.apply(this,arguments)},n.guid=a.guid||(a.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,Z(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=u),this.each(function(){Z.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?Z.event.trigger(e,t,i,!0):void 0}});var jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ot=/<([\w:]+)/,Nt=/<|&#?\w+;/,Mt=/<(?:script|style|link)/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^$|\/(?:java|ecma)script/i,It=/^true\/(.*)/,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,$t={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$t.optgroup=$t.option,$t.tbody=$t.tfoot=$t.colgroup=$t.caption=$t.thead,$t.th=$t.td,Z.extend({clone:function(e,t,i){var n,r,a,s,o=e.cloneNode(!0),l=Z.contains(e.ownerDocument,e);if(!(J.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(s=g(o),a=g(e),n=0,r=a.length;r>n;n++)v(a[n],s[n]);if(t)if(i)for(a=a||g(e),s=s||g(o),n=0,r=a.length;r>n;n++)y(a[n],s[n]);else y(e,o);return s=g(o,"script"),s.length>0&&m(s,!l&&g(e,"script")),o},buildFragment:function(e,t,i,n){for(var r,a,s,o,l,c,u=t.createDocumentFragment(),p=[],d=0,h=e.length;h>d;d++)if(r=e[d],r||0===r)if("object"===Z.type(r))Z.merge(p,r.nodeType?[r]:r);else if(Nt.test(r)){for(a=a||u.appendChild(t.createElement("div")),s=(Ot.exec(r)||["",""])[1].toLowerCase(),o=$t[s]||$t._default,a.innerHTML=o[1]+r.replace(jt,"<$1></$2>")+o[2],c=o[0];c--;)a=a.lastChild;Z.merge(p,a.childNodes),a=u.firstChild,a.textContent=""}else p.push(t.createTextNode(r));for(u.textContent="",d=0;r=p[d++];)if((!n||-1===Z.inArray(r,n))&&(l=Z.contains(r.ownerDocument,r),a=g(u.appendChild(r),"script"),l&&m(a),i))for(c=0;r=a[c++];)Rt.test(r.type||"")&&i.push(r);return u},cleanData:function(e){for(var t,i,n,r,a=Z.event.special,s=0;void 0!==(i=e[s]);s++){if(Z.acceptData(i)&&(r=i[gt.expando],r&&(t=gt.cache[r]))){if(t.events)for(n in t.events)a[n]?Z.event.remove(i,n):Z.removeEvent(i,n,t.handle);gt.cache[r]&&delete gt.cache[r]}delete vt.cache[i[vt.expando]]}}}),Z.fn.extend({text:function(e){return yt(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?Z.filter(e,this):this,r=0;null!=(i=n[r]);r++)t||1!==i.nodeType||Z.cleanData(g(i)),i.parentNode&&(t&&Z.contains(i.ownerDocument,i)&&m(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return yt(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Mt.test(e)&&!$t[(Ot.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(jt,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(Z.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=V.apply([],e);var i,n,r,a,s,o,l=0,c=this.length,u=this,p=c-1,d=e[0],m=Z.isFunction(d);if(m||c>1&&"string"==typeof d&&!J.checkClone&&Pt.test(d))return this.each(function(i){var n=u.eq(i);m&&(e[0]=d.call(this,i,n.html())),n.domManip(e,t)});if(c&&(i=Z.buildFragment(e,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(r=Z.map(g(i,"script"),h),a=r.length;c>l;l++)s=i,l!==p&&(s=Z.clone(s,!0,!0),a&&Z.merge(r,g(s,"script"))),t.call(this[l],s,l);if(a)for(o=r[r.length-1].ownerDocument,Z.map(r,f),l=0;a>l;l++)s=r[l],Rt.test(s.type||"")&&!gt.access(s,"globalEval")&&Z.contains(o,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Lt,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var i,n=[],r=Z(e),a=r.length-1,s=0;a>=s;s++)i=s===a?this:this.clone(!0),Z(r[s])[t](i),H.apply(n,i.get());return this.pushStack(n)}});var Ft,Dt={},Bt=/^margin/,qt=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),Ut=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(a);var t=e.getComputedStyle(s,null);i="1%"!==t.top,n="4px"===t.width,r.removeChild(a)}var i,n,r=K.documentElement,a=K.createElement("div"),s=K.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",J.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",a.appendChild(s),e.getComputedStyle&&Z.extend(J,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,i=s.appendChild(K.createElement("div"));return i.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",s.style.width="1px",r.appendChild(a),t=!parseFloat(e.getComputedStyle(i,null).marginRight),r.removeChild(a),t}}))}(),Z.swap=function(e,t,i,n){var r,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];r=i.apply(e,n||[]);for(a in t)e.style[a]=s[a];return r};var Vt=/^(none|table(?!-c[ea]).+)/,Ht=new RegExp("^("+Tt+")(.*)$","i"),Gt=new RegExp("^([+-])=("+Tt+")","i"),Wt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Yt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=T(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=Z.camelCase(t),l=e.style;return t=Z.cssProps[o]||(Z.cssProps[o]=k(l,o)),s=Z.cssHooks[t]||Z.cssHooks[o],void 0===i?s&&"get"in s&&void 0!==(r=s.get(e,!1,n))?r:l[t]:(a=typeof i,"string"===a&&(r=Gt.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(Z.css(e,t)),a="number"),null!=i&&i===i&&("number"!==a||Z.cssNumber[o]||(i+="px"),J.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l[t]=i)),void 0)}},css:function(e,t,i,n){var r,a,s,o=Z.camelCase(t);return t=Z.cssProps[o]||(Z.cssProps[o]=k(e.style,o)),s=Z.cssHooks[t]||Z.cssHooks[o],s&&"get"in s&&(r=s.get(e,!0,i)),void 0===r&&(r=T(e,t,n)),"normal"===r&&t in Xt&&(r=Xt[t]),""===i||i?(a=parseFloat(r),i===!0||Z.isNumeric(a)?a||0:r):r}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,i,n){return i?Vt.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Wt,function(){return S(e,t,n)}):S(e,t,n):void 0},set:function(e,i,n){var r=n&&Ut(e);return _(e,i,n?C(e,t,n,"border-box"===Z.css(e,"boxSizing",!1,r),r):0)}}}),Z.cssHooks.marginRight=w(J.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},T,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(i){for(var n=0,r={},a="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+wt[n]+t]=a[n]||a[n-2]||a[0];return r}},Bt.test(e)||(Z.cssHooks[e+t].set=_)}),Z.fn.extend({css:function(e,t){return yt(this,function(e,t,i){var n,r,a={},s=0;if(Z.isArray(t)){for(n=Ut(e),r=t.length;r>s;s++)a[t[s]]=Z.css(e,t[s],!1,n);return a}return void 0!==i?Z.style(e,t,i):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){kt(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=z,z.prototype={constructor:z,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(Z.cssNumber[i]?"":"px")},cur:function(){var e=z.propHooks[this.prop];return e&&e.get?e.get(this):z.propHooks._default.get(this)},run:function(e){var t,i=z.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=z.prototype.init,Z.fx.step={};var Jt,Kt,Qt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),ei=/queueHooks$/,ti=[N],ii={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),r=Zt.exec(t),a=r&&r[3]||(Z.cssNumber[e]?"":"px"),s=(Z.cssNumber[e]||"px"!==a&&+n)&&Zt.exec(Z.css(i.elem,e)),o=1,l=20;if(s&&s[3]!==a){a=a||s[3],r=r||[],s=+n||1;do o=o||".5",s/=o,Z.style(i.elem,e,s+a);while(o!==(o=i.cur()/n)&&1!==o&&--l)}return r&&(s=i.start=+s||+n||0,i.unit=a,i.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),i}]};Z.Animation=Z.extend(P,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,r=e.length;r>n;n++)i=e[n],ii[i]=ii[i]||[],ii[i].unshift(t)},prefilter:function(e,t){t?ti.unshift(e):ti.push(e)}}),Z.speed=function(e,t,i){var n=e&&"object"==typeof e?Z.extend({},e):{complete:i||!i&&t||Z.isFunction(e)&&e,duration:e,easing:i&&t||t&&!Z.isFunction(t)&&t};return n.duration=Z.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Z.fx.speeds?Z.fx.speeds[n.duration]:Z.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){Z.isFunction(n.old)&&n.old.call(this),n.queue&&Z.dequeue(this,n.queue)},n},Z.fn.extend({fadeTo:function(e,t,i,n){return this.filter(kt).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=Z.isEmptyObject(e),a=Z.speed(t,i,n),s=function(){var t=P(this,Z.extend({},e),a);(r||gt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||a.queue===!1?this.each(s):this.queue(a.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=Z.timers,s=gt.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&ei.test(r)&&n(s[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(i),t=!1,a.splice(r,1));(t||!i)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=gt.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],a=Z.timers,s=n?n.length:0;for(i.finish=!0,Z.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;s>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var i=Z.fn[t];
Z.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(j(t,!0),e,n,r)}}),Z.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,i=Z.timers;for(Jt=Z.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||Z.fx.stop(),Jt=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Kt||(Kt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Kt),Kt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e=K.createElement("input"),t=K.createElement("select"),i=t.appendChild(K.createElement("option"));e.type="checkbox",J.checkOn=""!==e.value,J.optSelected=i.selected,t.disabled=!0,J.optDisabled=!i.disabled,e=K.createElement("input"),e.value="t",e.type="radio",J.radioValue="t"===e.value}();var ni,ri,ai=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return yt(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,i){var n,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===Ct?Z.prop(e,t,i):(1===a&&Z.isXMLDoc(e)||(t=t.toLowerCase(),n=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?ri:ni)),void 0===i?n&&"get"in n&&null!==(r=n.get(e,t))?r:(r=Z.find.attr(e,t),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void Z.removeAttr(e,t))},removeAttr:function(e,t){var i,n,r=0,a=t&&t.match(ht);if(a&&1===e.nodeType)for(;i=a[r++];)n=Z.propFix[i]||i,Z.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!J.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),ri={set:function(e,t,i){return t===!1?Z.removeAttr(e,i):e.setAttribute(i,i),i}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ai[t]||Z.find.attr;ai[t]=function(e,t,n){var r,a;return n||(a=ai[t],ai[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,ai[t]=a),r}});var si=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return yt(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,r,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!Z.isXMLDoc(e),a&&(t=Z.propFix[t]||t,r=Z.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||si.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),J.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var oi=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,i,n,r,a,s,o="string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(o)for(t=(e||"").match(ht)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(oi," "):" ")){for(a=0;r=t[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s=Z.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(e){var t,i,n,r,a,s,o=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(o)for(t=(e||"").match(ht)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(oi," "):"")){for(a=0;r=t[a++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");s=e?Z.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(Z.isFunction(e)?function(i){Z(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,r=Z(this),a=e.match(ht)||[];t=a[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(i===Ct||"boolean"===i)&&(this.className&&gt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":gt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(oi," ").indexOf(t)>=0)return!0;return!1}});var li=/\r/g;Z.fn.extend({val:function(e){var t,i,n,r=this[0];{if(arguments.length)return n=Z.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,Z(this).val()):e,null==r?r="":"number"==typeof r?r+="":Z.isArray(r)&&(r=Z.map(r,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=Z.valHooks[r.type]||Z.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(li,""):null==i?"":i)}}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,s=a?null:[],o=a?r+1:n.length,l=0>r?o:a?r:0;o>l;l++)if(i=n[l],!(!i.selected&&l!==r||(J.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&Z.nodeName(i.parentNode,"optgroup"))){if(t=Z(i).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,a=Z.makeArray(t),s=r.length;s--;)n=r[s],(n.selected=Z.inArray(n.value,a)>=0)&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},J.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var ci=Z.now(),ui=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,t=i.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var pi,di,hi=/#.*$/,fi=/([?&])_=[^&]*/,mi=/^(.*?):[ \t]*([^\r\n]*)$/gm,yi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gi=/^(?:GET|HEAD)$/,vi=/^\/\//,bi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,xi={},Ti={},wi="*/".concat("*");try{di=location.href}catch(ki){di=K.createElement("a"),di.href="",di=di.href}pi=bi.exec(di.toLowerCase())||[],Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:di,type:"GET",isLocal:yi.test(pi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?L(L(e,Z.ajaxSettings),t):L(Z.ajaxSettings,e)},ajaxPrefilter:R(xi),ajaxTransport:R(Ti),ajax:function(e,t){function i(e,t,i,s){var l,u,g,v,x,w=t;2!==b&&(b=2,o&&clearTimeout(o),n=void 0,a=s||"",T.readyState=e>0?4:0,l=e>=200&&300>e||304===e,i&&(v=$(p,T,i)),v=F(p,v,T,l),l?(p.ifModified&&(x=T.getResponseHeader("Last-Modified"),x&&(Z.lastModified[r]=x),x=T.getResponseHeader("etag"),x&&(Z.etag[r]=x)),204===e||"HEAD"===p.type?w="nocontent":304===e?w="notmodified":(w=v.state,u=v.data,g=v.error,l=!g)):(g=w,(e||!w)&&(w="error",0>e&&(e=0))),T.status=e,T.statusText=(t||w)+"",l?f.resolveWith(d,[u,w,T]):f.rejectWith(d,[T,w,g]),T.statusCode(y),y=void 0,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[T,p,l?u:g]),m.fireWith(d,[T,w]),c&&(h.trigger("ajaxComplete",[T,p]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,a,s,o,l,c,u,p=Z.ajaxSetup({},t),d=p.context||p,h=p.context&&(d.nodeType||d.jquery)?Z(d):Z.event,f=Z.Deferred(),m=Z.Callbacks("once memory"),y=p.statusCode||{},g={},v={},b=0,x="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!s)for(s={};t=mi.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return b||(e=v[i]=v[i]||e,g[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)y[t]=[y[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||x;return n&&n.abort(t),i(0,t),this}};if(f.promise(T).complete=m.add,T.success=T.done,T.error=T.fail,p.url=((e||p.url||di)+"").replace(hi,"").replace(vi,pi[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=Z.trim(p.dataType||"*").toLowerCase().match(ht)||[""],null==p.crossDomain&&(l=bi.exec(p.url.toLowerCase()),p.crossDomain=!(!l||l[1]===pi[1]&&l[2]===pi[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(pi[3]||("http:"===pi[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=Z.param(p.data,p.traditional)),I(xi,p,t,T),2===b)return T;c=p.global,c&&0===Z.active++&&Z.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!gi.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(ui.test(r)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=fi.test(r)?r.replace(fi,"$1_="+ci++):r+(ui.test(r)?"&":"?")+"_="+ci++)),p.ifModified&&(Z.lastModified[r]&&T.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&T.setRequestHeader("If-None-Match",Z.etag[r])),(p.data&&p.hasContent&&p.contentType!==!1||t.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+wi+"; q=0.01":""):p.accepts["*"]);for(u in p.headers)T.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(p.beforeSend.call(d,T,p)===!1||2===b))return T.abort();x="abort";for(u in{success:1,error:1,complete:1})T[u](p[u]);if(n=I(Ti,p,t,T)){T.readyState=1,c&&h.trigger("ajaxSend",[T,p]),p.async&&p.timeout>0&&(o=setTimeout(function(){T.abort("timeout")},p.timeout));try{b=1,n.send(g,i)}catch(w){if(!(2>b))throw w;i(-1,w)}}else i(-1,"No Transport");return T},getJSON:function(e,t,i){return Z.get(e,t,i,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,i,n,r){return Z.isFunction(i)&&(r=r||n,n=i,i=void 0),Z.ajax({url:e,type:t,dataType:r,data:i,success:n})}}),Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))}:function(){var t=Z(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(i){Z(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var _i=/%20/g,Ci=/\[\]$/,Si=/\r?\n/g,Ei=/^(?:submit|button|image|reset|file)$/i,zi=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var i,n=[],r=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){r(this.name,this.value)});else for(i in e)D(i,e[i],t,r);return n.join("&").replace(_i,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&zi.test(this.nodeName)&&!Ei.test(e)&&(this.checked||!_t.test(e))}).map(function(e,t){var i=Z(this).val();return null==i?null:Z.isArray(i)?Z.map(i,function(e){return{name:t.name,value:e.replace(Si,"\r\n")}}):{name:t.name,value:i.replace(Si,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Ai=0,ji={},Oi={0:200,1223:204},Ni=Z.ajaxSettings.xhr();e.ActiveXObject&&Z(e).on("unload",function(){for(var e in ji)ji[e]()}),J.cors=!!Ni&&"withCredentials"in Ni,J.ajax=Ni=!!Ni,Z.ajaxTransport(function(e){var t;return J.cors||Ni&&!e.crossDomain?{send:function(i,n){var r,a=e.xhr(),s=++Ai;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)a.setRequestHeader(r,i[r]);t=function(e){return function(){t&&(delete ji[s],t=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?n(a.status,a.statusText):n(Oi[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:void 0,a.getAllResponseHeaders()))}},a.onload=t(),a.onerror=t("error"),t=ji[s]=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(o){if(t)throw o}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),K.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Mi=[],Pi=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mi.pop()||Z.expando+"_"+ci++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,i,n){var r,a,s,o=t.jsonp!==!1&&(Pi.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pi.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Pi,"$1"+r):t.jsonp!==!1&&(t.url+=(ui.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||Z.error(r+" was not called"),s[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){s=arguments},n.always(function(){e[r]=a,t[r]&&(t.jsonpCallback=i.jsonpCallback,Mi.push(r)),s&&Z.isFunction(a)&&a(s[0]),s=a=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||K;var n=st.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=Z.buildFragment([e],t,r),r&&r.length&&Z(r).remove(),Z.merge([],n.childNodes))};var Ri=Z.fn.load;Z.fn.load=function(e,t,i){if("string"!=typeof e&&Ri)return Ri.apply(this,arguments);var n,r,a,s=this,o=e.indexOf(" ");return o>=0&&(n=Z.trim(e.slice(o)),e=e.slice(0,o)),Z.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&Z.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){a=arguments,s.html(n?Z("<div>").append(Z.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){s.each(i,a||[e.responseText,t,e])}),this},Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Ii=e.document.documentElement;Z.offset={setOffset:function(e,t,i){var n,r,a,s,o,l,c,u=Z.css(e,"position"),p=Z(e),d={};"static"===u&&(e.style.position="relative"),o=p.offset(),a=Z.css(e,"top"),l=Z.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1,c?(n=p.position(),s=n.top,r=n.left):(s=parseFloat(a)||0,r=parseFloat(l)||0),Z.isFunction(t)&&(t=t.call(e,i,o)),null!=t.top&&(d.top=t.top-o.top+s),null!=t.left&&(d.left=t.left-o.left+r),"using"in t?t.using.call(e,d):p.css(d)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,i,n=this[0],r={top:0,left:0},a=n&&n.ownerDocument;if(a)return t=a.documentElement,Z.contains(t,n)?(typeof n.getBoundingClientRect!==Ct&&(r=n.getBoundingClientRect()),i=B(a),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===Z.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(n=e.offset()),n.top+=Z.css(e[0],"borderTopWidth",!0),n.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-Z.css(i,"marginTop",!0),left:t.left-n.left-Z.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Ii;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Ii})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n="pageYOffset"===i;Z.fn[t]=function(r){return yt(this,function(t,r,a){var s=B(t);return void 0===a?s?s[i]:t[r]:void(s?s.scrollTo(n?e.pageXOffset:a,n?a:e.pageYOffset):t[r]=a)},t,r,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=w(J.pixelPosition,function(e,i){return i?(i=T(e,t),qt.test(i)?Z(e).position()[t]+"px":i):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){Z.fn[n]=function(n,r){var a=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||r===!0?"margin":"border");return yt(this,function(t,i,n){var r;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?Z.css(t,i,s):Z.style(t,i,n,s)},t,a?n:void 0,a,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Li=e.jQuery,$i=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=$i),t&&e.jQuery===Z&&(e.jQuery=Li),Z},typeof t===Ct&&(e.jQuery=e.$=Z),Z}),function(){var e=this,t=e._,i={},n=Array.prototype,r=Object.prototype,a=Function.prototype,s=n.push,o=n.slice,l=n.concat,c=r.toString,u=r.hasOwnProperty,p=n.forEach,d=n.map,h=n.reduce,f=n.reduceRight,m=n.filter,y=n.every,g=n.some,v=n.indexOf,b=n.lastIndexOf,x=Array.isArray,T=Object.keys,w=a.bind,k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.6.0";var _=k.each=k.forEach=function(e,t,n){if(null==e)return e;if(p&&e.forEach===p)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,a=e.length;a>r;r++)if(t.call(n,e[r],r,e)===i)return}else for(var s=k.keys(e),r=0,a=s.length;a>r;r++)if(t.call(n,e[s[r]],s[r],e)===i)return;return e};k.map=k.collect=function(e,t,i){var n=[];return null==e?n:d&&e.map===d?e.map(t,i):(_(e,function(e,r,a){n.push(t.call(i,e,r,a))}),n)};var C="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,i,n){var r=arguments.length>2;if(null==e&&(e=[]),h&&e.reduce===h)return n&&(t=k.bind(t,n)),r?e.reduce(t,i):e.reduce(t);if(_(e,function(e,a,s){r?i=t.call(n,i,e,a,s):(i=e,r=!0)}),!r)throw new TypeError(C);return i},k.reduceRight=k.foldr=function(e,t,i,n){var r=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=k.bind(t,n)),r?e.reduceRight(t,i):e.reduceRight(t);var a=e.length;if(a!==+a){var s=k.keys(e);a=s.length}if(_(e,function(o,l,c){l=s?s[--a]:--a,r?i=t.call(n,i,e[l],l,c):(i=e[l],r=!0)}),!r)throw new TypeError(C);return i},k.find=k.detect=function(e,t,i){var n;return S(e,function(e,r,a){return t.call(i,e,r,a)?(n=e,!0):void 0}),n},k.filter=k.select=function(e,t,i){var n=[];return null==e?n:m&&e.filter===m?e.filter(t,i):(_(e,function(e,r,a){t.call(i,e,r,a)&&n.push(e)}),n)},k.reject=function(e,t,i){return k.filter(e,function(e,n,r){return!t.call(i,e,n,r)},i)},k.every=k.all=function(e,t,n){t||(t=k.identity);var r=!0;return null==e?r:y&&e.every===y?e.every(t,n):(_(e,function(e,a,s){return(r=r&&t.call(n,e,a,s))?void 0:i}),!!r)};var S=k.some=k.any=function(e,t,n){t||(t=k.identity);var r=!1;return null==e?r:g&&e.some===g?e.some(t,n):(_(e,function(e,a,s){return r||(r=t.call(n,e,a,s))?i:void 0}),!!r)};k.contains=k.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):S(e,function(e){return e===t})},k.invoke=function(e,t){var i=o.call(arguments,2),n=k.isFunction(t);return k.map(e,function(e){return(n?t:e[t]).apply(e,i)})},k.pluck=function(e,t){return k.map(e,k.property(t))},k.where=function(e,t){return k.filter(e,k.matches(t))},k.findWhere=function(e,t){return k.find(e,k.matches(t))},k.max=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var n=-1/0,r=-1/0;return _(e,function(e,a,s){var o=t?t.call(i,e,a,s):e;o>r&&(n=e,r=o)}),n},k.min=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var n=1/0,r=1/0;return _(e,function(e,a,s){var o=t?t.call(i,e,a,s):e;r>o&&(n=e,r=o)}),n},k.shuffle=function(e){var t,i=0,n=[];return _(e,function(e){t=k.random(i++),n[i-1]=n[t],n[t]=e}),n},k.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=k.values(e)),e[k.random(e.length-1)]):k.shuffle(e).slice(0,Math.max(0,t))};var E=function(e){return null==e?k.identity:k.isFunction(e)?e:k.property(e)};k.sortBy=function(e,t,i){return t=E(t),k.pluck(k.map(e,function(e,n,r){return{value:e,index:n,criteria:t.call(i,e,n,r)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var z=function(e){return function(t,i,n){var r={};return i=E(i),_(t,function(a,s){var o=i.call(n,a,s,t);e(r,o,a)}),r}};k.groupBy=z(function(e,t,i){k.has(e,t)?e[t].push(i):e[t]=[i]}),k.indexBy=z(function(e,t,i){e[t]=i}),k.countBy=z(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,i,n){i=E(i);for(var r=i.call(n,t),a=0,s=e.length;s>a;){var o=a+s>>>1;i.call(n,e[o])<r?a=o+1:s=o}return a},k.toArray=function(e){return e?k.isArray(e)?o.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:0>t?[]:o.call(e,0,t)},k.initial=function(e,t,i){return o.call(e,0,e.length-(null==t||i?1:t))},k.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,i){return o.call(e,null==t||i?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var A=function(e,t,i){return t&&k.every(e,k.isArray)?l.apply(i,e):(_(e,function(e){k.isArray(e)||k.isArguments(e)?t?s.apply(i,e):A(e,t,i):i.push(e)}),i)};k.flatten=function(e,t){return A(e,t,[])},k.without=function(e){return k.difference(e,o.call(arguments,1))},k.partition=function(e,t){var i=[],n=[];return _(e,function(e){(t(e)?i:n).push(e)}),[i,n]},k.uniq=k.unique=function(e,t,i,n){k.isFunction(t)&&(n=i,i=t,t=!1);var r=i?k.map(e,i,n):e,a=[],s=[];return _(r,function(i,n){(t?n&&s[s.length-1]===i:k.contains(s,i))||(s.push(i),a.push(e[n]))}),a},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=o.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.contains(t,e)})})},k.difference=function(e){var t=l.apply(n,o.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=k.pluck(arguments,""+i);return t},k.object=function(e,t){if(null==e)return{};for(var i={},n=0,r=e.length;r>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},k.indexOf=function(e,t,i){if(null==e)return-1;var n=0,r=e.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,r+i):i}if(v&&e.indexOf===v)return e.indexOf(t,i);for(;r>n;n++)if(e[n]===t)return n;return-1},k.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(b&&e.lastIndexOf===b)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var r=n?i:e.length;r--;)if(e[r]===t)return r;return-1},k.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),r=0,a=new Array(n);n>r;)a[r++]=e,e+=i;return a};var j=function(){};k.bind=function(e,t){var i,n;if(w&&e.bind===w)return w.apply(e,o.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return i=o.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(o.call(arguments)));j.prototype=e.prototype;var r=new j;j.prototype=null;var a=e.apply(r,i.concat(o.call(arguments)));return Object(a)===a?a:r}},k.partial=function(e){var t=o.call(arguments,1);return function(){for(var i=0,n=t.slice(),r=0,a=n.length;a>r;r++)n[r]===k&&(n[r]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},k.bindAll=function(e){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return _(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var i={};return t||(t=k.identity),function(){var n=t.apply(this,arguments);return k.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},k.delay=function(e,t){var i=o.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(o.call(arguments,1)))},k.throttle=function(e,t,i){var n,r,a,s=null,o=0;i||(i={});var l=function(){o=i.leading===!1?0:k.now(),s=null,a=e.apply(n,r),n=r=null};return function(){var c=k.now();o||i.leading!==!1||(o=c);var u=t-(c-o);return n=this,r=arguments,0>=u?(clearTimeout(s),s=null,o=c,a=e.apply(n,r),n=r=null):s||i.trailing===!1||(s=setTimeout(l,u)),a}},k.debounce=function(e,t,i){var n,r,a,s,o,l=function(){var c=k.now()-s;t>c?n=setTimeout(l,t-c):(n=null,i||(o=e.apply(a,r),a=r=null))};return function(){a=this,r=arguments,s=k.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(o=e.apply(a,r),a=r=null),o}},k.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return k.partial(t,e)},k.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=function(e){if(!k.isObject(e))return[];if(T)return T(e);var t=[];for(var i in e)k.has(e,i)&&t.push(i);return t},k.values=function(e){for(var t=k.keys(e),i=t.length,n=new Array(i),r=0;i>r;r++)n[r]=e[t[r]];return n},k.pairs=function(e){for(var t=k.keys(e),i=t.length,n=new Array(i),r=0;i>r;r++)n[r]=[t[r],e[t[r]]];return n},k.invert=function(e){for(var t={},i=k.keys(e),n=0,r=i.length;r>n;n++)t[e[i[n]]]=i[n];return t},k.functions=k.methods=function(e){var t=[];for(var i in e)k.isFunction(e[i])&&t.push(i);return t.sort()},k.extend=function(e){return _(o.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},k.pick=function(e){var t={},i=l.apply(n,o.call(arguments,1));return _(i,function(i){i in e&&(t[i]=e[i])}),t},k.omit=function(e){var t={},i=l.apply(n,o.call(arguments,1));for(var r in e)k.contains(i,r)||(t[r]=e[r]);return t},k.defaults=function(e){return _(o.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var O=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var r=c.call(e);if(r!=c.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=i.length;a--;)if(i[a]==e)return n[a]==t;var s=e.constructor,o=t.constructor;if(s!==o&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1;i.push(e),n.push(t);var l=0,u=!0;if("[object Array]"==r){if(l=e.length,u=l==t.length)for(;l--&&(u=O(e[l],t[l],i,n)););}else{for(var p in e)if(k.has(e,p)&&(l++,!(u=k.has(t,p)&&O(e[p],t[p],i,n))))break;if(u){for(p in t)if(k.has(t,p)&&!l--)break;u=!l}}return i.pop(),n.pop(),u};k.isEqual=function(e,t){return O(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=x||function(e){return"[object Array]"==c.call(e)},k.isObject=function(e){return e===Object(e)},_(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return u.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.constant=function(e){return function(){return e}},k.property=function(e){return function(t){return t[e]}},k.matches=function(e){return function(t){if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},k.times=function(e,t,i){for(var n=Array(Math.max(0,e)),r=0;e>r;r++)n[r]=t.call(i,r);return n},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},k.now=Date.now||function(){return(new Date).getTime()
};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=k.invert(N.escape);var M={escape:new RegExp("["+k.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(N.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(M[e],function(t){return N[e][t]})}}),k.result=function(e,t){if(null==e)return void 0;var i=e[t];return k.isFunction(i)?i.call(e):i},k.mixin=function(e){_(k.functions(e),function(t){var i=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),$.call(this,i.apply(k,e))}})};var P=0;k.uniqueId=function(e){var t=++P+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,i){var n;i=k.defaults({},i,k.templateSettings);var r=new RegExp([(i.escape||R).source,(i.interpolate||R).source,(i.evaluate||R).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(r,function(t,i,n,r,o){return s+=e.slice(a,o).replace(L,function(e){return"\\"+I[e]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),a=o+t.length,t}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(o){throw o.source=s,o}if(t)return n(t,k);var l=function(e){return n.call(this,e,k)};return l.source="function("+(i.variable||"obj")+"){\n"+s+"}",l},k.chain=function(e){return k(e).chain()};var $=function(e){return this._chain?k(e).chain():e};k.mixin(k),_(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];k.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],$.call(this,i)}}),_(["concat","join","slice"],function(e){var t=n[e];k.prototype[e]=function(){return $.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this),function(e,t){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(i,n,r){e.Backbone=t(e,r,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");t(e,exports,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,i,n){{var r=e.Backbone,a=[],s=(a.push,a.slice);a.splice}t.VERSION="1.1.2",t.$=n,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=t.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var r=this,a=i.once(function(){r.off(e,a),t.apply(this,arguments)});return a._callback=t,this.on(e,a,n)},off:function(e,t,n){var r,a,s,o,l,u,p,d;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(o=e?[e]:i.keys(this._events),l=0,u=o.length;u>l;l++)if(e=o[l],s=this._events[e]){if(this._events[e]=r=[],t||n)for(p=0,d=s.length;d>p;p++)a=s[p],(t&&t!==a.callback&&t!==a.callback._callback||n&&n!==a.context)&&r.push(a);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&u(i,t),n&&u(n,arguments),this},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var a=!t&&!n;n||"object"!=typeof t||(n=this),e&&((r={})[e._listenId]=e);for(var s in r)e=r[s],e.off(t,n,this),(a||i.isEmpty(e._events))&&delete this._listeningTo[s];return this}},l=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)e[t].apply(e,[r,i[r]].concat(n));return!1}if(l.test(i)){for(var a=i.split(l),s=0,o=a.length;o>s;s++)e[t].apply(e,[a[s]].concat(n));return!1}return!0},u=function(e,t){var i,n=-1,r=e.length,a=t[0],s=t[1],o=t[2];switch(t.length){case 0:for(;++n<r;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a);return;case 2:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a,s);return;case 3:for(;++n<r;)(i=e[n]).callback.call(i.ctx,a,s,o);return;default:for(;++n<r;)(i=e[n]).callback.apply(i.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};i.each(p,function(e,t){o[t]=function(t,n,r){var a=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=i.uniqueId("l"));return a[s]=t,r||"object"!=typeof n||(r=this),t[e](n,r,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(t,o);var d=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,a,s,o,l,c,u,p;if(null==e)return this;if("object"==typeof e?(a=e,n=t):(a={})[e]=t,n||(n={}),!this._validate(a,n))return!1;s=n.unset,l=n.silent,o=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),p=this.attributes,u=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]);for(r in a)t=a[r],i.isEqual(p[r],t)||o.push(r),i.isEqual(u[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete p[r]:p[r]=t;if(!l){o.length&&(this._pending=n);for(var d=0,h=o.length;h>d;d++)this.trigger("change:"+o[d],this,p[o[d]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var a in e)i.isEqual(r[a],t=e[a])||((n||(n={}))[a]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),void t.trigger("sync",t,i,e)):!1},L(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,a,s,o=this.attributes;if(null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,n=i.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=i.extend({},o,r)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=o;var t=l.parse(e,n);return n.wait&&(t=i.extend(r||{},t)),i.isObject(t)&&!l.set(t,n)?!1:(c&&c(l,e,n),void l.trigger("sync",l,e,n))},L(this,n),a=this.isNew()?"create":n.patch?"patch":"update","patch"===a&&(n.attrs=r),s=this.sync(a,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;L(this,e);var a=this.sync("delete",this,e);return e.wait||r(),a},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||I();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1):!0}});var h=["keys","values","pairs","invert","pick","omit"];i.each(h,function(e){d.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};i.extend(f.prototype,o,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,y))},remove:function(e,t){var n=!i.isArray(e);e=n?[e]:i.clone(e),t||(t={});var r,a,s,o;for(r=0,a=e.length;a>r;r++)o=e[r]=this.get(e[r]),o&&(delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,t.silent||(t.index=s,o.trigger("remove",o,this,t)),this._removeReference(o,t));return n?e[0]:e},set:function(e,t){t=i.defaults({},t,m),t.parse&&(e=this.parse(e,t));var n=!i.isArray(e);e=n?e?[e]:[]:i.clone(e);var r,a,s,o,l,c,u,p=t.at,h=this.model,f=this.comparator&&null==p&&t.sort!==!1,y=i.isString(this.comparator)?this.comparator:null,g=[],v=[],b={},x=t.add,T=t.merge,w=t.remove,k=!f&&x&&w?[]:!1;for(r=0,a=e.length;a>r;r++){if(l=e[r]||{},s=l instanceof d?o=l:l[h.prototype.idAttribute||"id"],c=this.get(s))w&&(b[c.cid]=!0),T&&(l=l===o?o.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),f&&!u&&c.hasChanged(y)&&(u=!0)),e[r]=c;else if(x){if(o=e[r]=this._prepareModel(l,t),!o)continue;g.push(o),this._addReference(o,t)}o=c||o,!k||!o.isNew()&&b[o.id]||k.push(o),b[o.id]=!0}if(w){for(r=0,a=this.length;a>r;++r)b[(o=this.models[r]).cid]||v.push(o);v.length&&this.remove(v,t)}if(g.length||k&&k.length)if(f&&(u=!0),this.length+=g.length,null!=p)for(r=0,a=g.length;a>r;r++)this.models.splice(p+r,0,g[r]);else{k&&(this.models.length=0);var _=k||g;for(r=0,a=_.length;a>r;r++)this.models.push(_[r])}if(u&&this.sort({silent:!0}),!t.silent){for(r=0,a=g.length;a>r;r++)(o=g[r]).trigger("add",o,this,t);(u||k&&k.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return s.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},L(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(g,function(e){f.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var v=["groupBy","countBy","sortBy","indexBy"];i.each(v,function(e){f.prototype[e]=function(t,n){var r=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,r,n)}});var b=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,T)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,o,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),n){var r=t.match(x),a=r[1],s=r[2];n=i.bind(n,this),a+=".delegateEvents"+this.cid,""===s?this.$el.on(a,n):this.$el.on(a,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className"));var n=t.$("<"+i.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,r){var a=k[e];i.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:a,dataType:"json"};if(r.url||(s.url=i.result(n,"url")||I()),null!=r.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){s.type="POST",r.emulateJSON&&(s.data._method=a);var o=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",a),o?o.apply(this,arguments):void 0}}"GET"===s.type||r.emulateJSON||(s.processData=!1),"PATCH"===s.type&&w&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=t.ajax(i.extend(s,r));return n.trigger("request",n,l,r),l};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var _=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,E=/\*\w+/g,z=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(_.prototype,o,{initialize:function(){},route:function(e,n,r){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var a=this;return t.history.route(e,function(i){var s=a._extractParameters(e,i);a.execute(r,s),a.trigger.apply(a,["route:"+n].concat(s)),a.trigger("route",n,s),t.history.trigger("route",a,n,s)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(z,"\\$&").replace(C,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/?]+)"}).replace(E,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var A=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,N=/msie [\w.]+/,M=/\/$/,P=/#.*$/;A.started=!1,i.extend(A.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(M,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(j,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,a=N.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);if(this.root=("/"+this.root+"/").replace(O,"/"),a&&this._wantsHashChange){var s=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(j,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!A.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(P,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new A;var R=function(e,t){var n,r=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,t);var a=function(){this.constructor=n};return a.prototype=r.prototype,n.prototype=new a,e&&i.extend(n.prototype,e),n.__super__=r.prototype,n};d.extend=f.extend=_.extend=b.extend=A.extend=R;var I=function(){throw new Error('A "url" property or function must be specified')},L=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};return t}),define("framework/Controller",["jquery","underscore","backbone"],function(e,t,i){var n=function(){this.cid=t.uniqueId("controller"),this.initialize.apply(this,arguments)};return n.extend=i.View.extend,t.extend(n.prototype,i.Events,{initialize:function(){},close:function(){"function"==typeof this.onClose&&this.onClose()}}),n}),define("framework/Model",["underscore","backbone"],function(e,t){return e.extend(t.Model.prototype,{toJSON:function(){var e=this.deepcopy(this.attributes);return"undefined"!=typeof this.id&&null!==this.id&&(e.id=this.id),e},deepcopy:function(e){var t=e instanceof Array?[]:{};for(var i in e)"object"==typeof e[i]&&null!==e[i]?t[i]="function"==typeof e[i].toJSON?e[i].toJSON():this.deepcopy(e[i]):null!==e[i]&&(t[i]=e[i]);return t}}),t.Model}),define("framework/View",["underscore","backbone","jquery"],function(e,t,i){return e.extend(t.View.prototype,{fullscreen:!1,close:function(){"function"==typeof this.onClose&&this.onClose(),this.fullscreen?(i("body").empty(),this.stopListening()):this.remove(),"function"==typeof this.onClosed&&this.onClosed()}}),t.View}),define("framework/GameObject",["jquery","underscore","backbone","framework/Controller"],function(e,t,i,n){var r=n.extend(t.extend({},i.Events,{getRenderer:function(){return this.renderer.component},setRenderer:function(e){this.renderer={component:e,starttime:e.getStartTime()}},render:function(e){return this.active||(this.active=e>=this.renderer.starttime),this.active?(this.active=this.renderer.component.render(e),this.active):!0}}));return r}),define("framework/Renderer",["jquery","underscore","backbone"],function(e,t,i){var n=i.Renderer=function(e){if(e=e||{},this.cid=t.uniqueId("renderer"),this.snap=e.snap,this.controller=e.controller,"undefined"==typeof this.snap)throw"The snap object is missing as parameter in a Renderer's constructor.";e=t.omit(e,["snap","controller"]),this.initialize.apply(this,[e])};return n.extend=i.View.extend,t.extend(n.prototype,i.Events,{initialize:function(){},render:function(){return!1},getStartTime:function(){throw"Method not implemented."}}),n}),define("framework/API",["jquery","underscore","backbone"],function(e,t,i){return{setupBackend:function(e){var n=i.Model.extend({url:"system/codes",parse:function(e){return t.invert(e)}}),r=new n,a=i.ajax;i.ajax=function(i){var n=t.clone(i);n.headers=t.extend(n.headers||{},{Accept:"application/json;charset=UTF-8","Content-Type":"application/json;charset=UTF-8"}),n.url=e.host+n.url,n=e.onAjaxPrepare(n),n.success=function(e,t,a){"undefined"==typeof e.data||null===e.data||e.error?(console.warn(n.string+' returned an error: "'+r.get(e.error)+'"'),i.error(r.get(e.error)||e.error)):(console.info(n.string+" was successfull."),i.success(e.data,t,a))},n.error=function(e){console.error(n.string+" failed. ("+e.status+")"),i.error(e.status)},a(n.url,n),console.info(n.string+" raised")},r.fetch({parse:!0})}}}),define("framework/CollectionView",["underscore","jquery","framework/View"],function(e,t,i){var n=i.extend({initialize:function(e){if(this.childView=e.childView,this.collection=e.collection,this.getViewParams=e.getViewParams,!this.childView)throw"no child view class provided";if(!this.collection)throw"no collection provided";if(!this.getViewParams)throw"no getViewParams method provided";this._childViews=[],this.collection.each(this.addElement.bind(this)),this.doListen()},doListen:function(){this.listenTo(this.collection,"add",this.addElement),this.listenTo(this.collection,"remove",this.removeElement)},addElement:function(e){var t=this.getViewParams(e),i=new this.childView(t);this._childViews.push(i),this.rendered&&this.$el.append(i.render().el)},removeElement:function(t){var i=e(this._childViews).select(function(e){return e.model===t})[0];this._childViews=e(this._childViews).without(i),this.rendered&&i.close()},render:function(){var i=this;return t(this.el).empty(),e(this._childViews).each(function(e){t(i.el).append(e.render().el)}),this.rendered=!0,this},onClose:function(){this.rendered=!1,e(this._childViews).each(function(e){e.close()})},onClosed:function(){this.doListen()}});return n}),function(e,t){"object"==typeof exports?module.exports=t(require("underscore"),require("backbone")):"function"==typeof define&&define.amd&&define("lib/backbone.select",["underscore","backbone"],t)}(this,function(e,t){return function(e,t){function i(e,t){o(e,t),e.selected&&t.select(e,{_silentReselect:!0,_externalEvent:"add"})}function n(e,i,n){r(e,i,t.extend({},n,{_externalEvent:"remove"}))}function r(e,i,n){e._pickyCollections&&(e._pickyCollections=t.without(e._pickyCollections,i._pickyCid)),e.selected&&(e._pickyCollections&&0===e._pickyCollections.length?i.deselect(e,n):i.deselect(e,t.extend({},n,{_skipModelCall:!0})))}function a(e,i){var n,a,s=t.find(i.previousModels,function(e){return e.selected});s&&r(s,e,{_silentLocally:!0}),t.each(i.previousModels,function(i){i._pickyCollections&&(i._pickyCollections=t.without(i._pickyCollections,e._pickyCid))}),e.each(function(t){o(t,e)}),n=e.filter(function(e){return e.selected}),a=t.initial(n),a.length&&t.each(a,function(e){e.deselect()}),n.length&&e.select(t.last(n),{silent:!0})}function s(e,i){var n,a=t.filter(i.previousModels,function(e){return e.selected});a&&t.each(a,function(t){r(t,e,{_silentLocally:!0})}),t.each(i.previousModels,function(i){i._pickyCollections&&(i._pickyCollections=t.without(i._pickyCollections,e._pickyCid))}),e.each(function(t){o(t,e)}),n=e.filter(function(e){return e.selected}),n.length&&t.each(n,function(t){e.select(t,{silent:!0})})}function o(e,t){e._pickyCollections||(e._pickyCollections=[]),e._pickyCollections.push(t._pickyCid)}function l(e){e.each(function(t){r(t,e,{_silentLocally:!0})})}function c(e){return t.omit(e,"_silentLocally","_externalEvent")}function u(e){return t.omit(e,"_silentLocally","_silentReselect","_skipModelCall","_processedBy","_eventQueue","_eventQueueAppendOnly")}function p(e){function i(e,t){n[t]=e}var n=[];return t.each(e,i),n}function d(e){return e||(e={}),e._processedBy||(e._processedBy={}),e._eventQueue||(e._eventQueue=[]),e}function h(e,t,i){var n=e._eventQueueAppendOnly||e._eventQueue;n.push({actor:t,triggerArgs:i})}function f(e){var i,n;if(e._eventQueue.length&&(i=t.every(e._processedBy,function(e){return e.done})))for(m(e._eventQueue);e._eventQueue.length;)n=e._eventQueue.pop(),n.actor.trigger.apply(n.actor,n.triggerArgs)}function m(e){var i={};t.each(e,function(e,n){var r,a,s,o=e.actor,l=e.triggerArgs[0];"Backbone.Select.Many"===o._pickyType&&"reselect:any"!==l&&(r=i[o._pickyCid],r||(r=i[o._pickyCid]={actor:o,indexes:[],merged:{selected:[],deselected:[],options:{}}}),r.indexes.push(n),a=e.triggerArgs[1],s=e.triggerArgs[3],r.merged.selected=r.merged.selected.concat(a.selected),r.merged.deselected=r.merged.deselected.concat(a.deselected),t.extend(r.merged.options,s))}),i=t.filter(i,function(e){return e.indexes.length>1});var n=t.flatten(t.pluck(i,"indexes"));n.sort(function(e,t){return e-t}),t.each(n,function(t,i){e.splice(t-i,1)}),t.each(i,function(t){e.push({actor:t.actor,triggerArgs:["select:some",{selected:t.merged.selected,deselected:t.merged.deselected},t.actor,t.merged.options]})})}function y(t,i){i.select=function(){var n=i.select;return function(r){return r instanceof e.Model?n.apply(i,arguments):t.apply(i,arguments)}}()}function g(e){e.trigger=function(){var i=e.trigger;return function(e){if(v(e)){var n=x(e),r="on"+n.replace(/(^|:)(\w)/gi,b),a=this[r];t.isFunction(a)&&a.apply(this,t.tail(arguments))}return i.apply(this,arguments),this}}()}function v(e){return/^([rd]e)?select(ed)?($|:)/.test(e)}function b(e,t,i){return i.toUpperCase()}function x(e){return"ed"===e.slice(-2)?e=e.slice(0,-2):(":one"===e.slice(-4)||":any"===e.slice(-4))&&(e=e.slice(0,-4)),e}var T={};T.One=function(){},t.extend(T.One.prototype,{_pickyType:"Backbone.Select.One",select:function(e,i){var n=e&&this.selected===e?e:void 0;i=d(i),i._processedBy[this._pickyCid]||(n||(this.deselect(void 0,t.extend(t.omit(i,"_silentLocally","_processedBy","_eventQueue"),{_eventQueueAppendOnly:i._eventQueue})),this.selected=e),i._processedBy[this._pickyCid]={done:!1},i._processedBy[this.selected.cid]||this.selected.select(c(i)),i.silent||i._silentLocally||(n?i._silentReselect||h(i,this,["reselect:one",e,this,u(i)]):h(i,this,["select:one",e,this,u(i)])),i._processedBy[this._pickyCid].done=!0,f(i))},deselect:function(e,t){t=d(t),t._processedBy[this._pickyCid]||this.selected&&(e=e||this.selected,this.selected===e&&(t._processedBy[this._pickyCid]={done:!1},delete this.selected,t._skipModelCall||e.deselect(c(t)),t.silent||t._silentLocally||h(t,this,["deselect:one",e,this,u(t)]),t._processedBy[this._pickyCid].done=!0,f(t)))},close:function(){l(this),this.stopListening()}}),T.Many=function(){},t.extend(T.Many.prototype,{_pickyType:"Backbone.Select.Many",select:function(e,i){var n=p(this.selected),r=this.selected[e.cid]?[e]:[];i=d(i),r.length&&i._processedBy[this._pickyCid]||(r.length||(this.selected[e.cid]=e,this.selectedLength=t.size(this.selected)),i._processedBy[this._pickyCid]={done:!1},i._processedBy[e.cid]||e.select(c(i)),w(this,n,i,r),i._processedBy[this._pickyCid].done=!0,f(i))},deselect:function(e,i){var n=p(this.selected);i=d(i),i._processedBy[this._pickyCid]||this.selected[e.cid]&&(i._processedBy[this._pickyCid]={done:!1},delete this.selected[e.cid],this.selectedLength=t.size(this.selected),i._skipModelCall||e.deselect(c(i)),w(this,n,i),i._processedBy[this._pickyCid].done=!0,f(i))},selectAll:function(e){var i=p(this.selected),n=[];e||(e={}),this.selectedLength=0,this.each(function(i){this.selectedLength++,this.selected[i.cid]&&n.push(i),this.select(i,t.extend({},e,{_silentLocally:!0}))},this),e=d(e),w(this,i,e,n),e._processedBy[this._pickyCid]?e._processedBy[this._pickyCid].done=!0:e._processedBy[this._pickyCid]={done:!0},f(e)},deselectAll:function(e){var i;0!==this.selectedLength&&(i=p(this.selected),e||(e={}),this.each(function(i){i.selected&&this.selectedLength--,this.deselect(i,t.extend({},e,{_silentLocally:!0}))},this),this.selectedLength=0,e=d(e),w(this,i,e),e._processedBy[this._pickyCid]?e._processedBy[this._pickyCid].done=!0:e._processedBy[this._pickyCid]={done:!0},f(e))},selectNone:function(e){this.deselectAll(e)},toggleSelectAll:function(e){this.selectedLength===this.length?this.deselectAll(e):this.selectAll(e)},close:function(){l(this),this.stopListening()
}}),T.Me=function(){},t.extend(T.Me.prototype,{_pickyType:"Backbone.Select.Me",select:function(e){var t=this.selected;e=d(e),e._processedBy[this.cid]||(e._processedBy[this.cid]={done:!1},this.selected=!0,this._pickyCollections?this.trigger("_selected",this,c(e)):this.collection&&(e._processedBy[this.collection._pickyCid]||this.collection.select(this,c(e))),e.silent||e._silentLocally||(t?e._silentReselect||h(e,this,["reselected",this,u(e)]):h(e,this,["selected",this,u(e)])),e._processedBy[this.cid].done=!0,f(e))},deselect:function(e){e=d(e),e._processedBy[this.cid]||this.selected&&(e._processedBy[this.cid]={done:!1},this.selected=!1,this._pickyCollections?this.trigger("_deselected",this,c(e)):this.collection&&this.collection.deselect(this,c(e)),e.silent||e._silentLocally||h(e,this,["deselected",this,u(e)]),e._processedBy[this.cid].done=!0,f(e))},toggleSelected:function(e){this.selected?this.deselect(e):this.select(e)}}),T.Me.applyTo=function(i){if(!t.isObject(i))throw new Error("The host object is undefined or not an object.");t.extend(i,new e.Select.Me),g(i)},T.One.applyTo=function(r,s,l){var c;if(!t.isObject(r))throw new Error("The host object is undefined or not an object.");if(arguments.length<2)throw new Error("The `models` parameter has not been passed to Select.One.applyTo. Its value can be undefined if no models are passed in during instantiation, but even so, it must be provided.");if(!(t.isArray(s)||t.isUndefined(s)||t.isNull(s)))throw new Error("The `models` parameter is not of the correct type. It must be either an array of models, or be undefined. (Null is acceptable, too).");c=r.select,t.extend(r,new e.Select.One),r._pickyCid=t.uniqueId("singleSelect"),g(r),y(c,r),l&&l.enableModelSharing&&(t.each(s||[],function(e){o(e,r),e.selected&&(r.selected&&r.selected.deselect(),r.selected=e)}),r.listenTo(r,"_selected",r.select),r.listenTo(r,"_deselected",r.deselect),r.listenTo(r,"reset",a),r.listenTo(r,"add",i),r.listenTo(r,"remove",n),r._modelSharingEnabled=!0)},T.Many.applyTo=function(r,a,l){var c;if(!t.isObject(r))throw new Error("The host object is undefined or not an object.");if(arguments.length<2)throw new Error("The `models` parameter has not been passed to Select.One.applyTo. Its value can be undefined if no models are passed in during instantiation, but even so, it must be provided.");if(!(t.isArray(a)||t.isUndefined(a)||t.isNull(a)))throw new Error("The `models` parameter is not of the correct type. It must be either an array of models, or be undefined. (Null is acceptable, too).");c=r.select,t.extend(r,new e.Select.Many),r._pickyCid=t.uniqueId("multiSelect"),r.selected={},g(r),y(c,r),l&&l.enableModelSharing&&(t.each(a||[],function(e){o(e,r),e.selected&&(r.selected[e.cid]=e)}),r.listenTo(r,"_selected",r.select),r.listenTo(r,"_deselected",r.deselect),r.listenTo(r,"reset",s),r.listenTo(r,"add",i),r.listenTo(r,"remove",n),r._modelSharingEnabled=!0)};var w=function(e,i,n,r){function a(e,i,n){function r(e){return i.get(e)||n[e]}return t.map(e,r)}if(!n.silent&&!n._silentLocally){var s,o=e.selectedLength,l=e.length,c=t.keys(i),p=t.keys(e.selected),d=t.difference(p,c),f=t.difference(c,p),m=o===c.length&&0===d.length&&0===f.length;if(r&&r.length&&!n._silentReselect&&h(n,e,["reselect:any",r,e,u(n)]),!m)return s={selected:a(d,e,i),deselected:a(f,e,i)},o===l?void h(n,e,["select:all",s,e,u(n)]):0===o?void h(n,e,["select:none",s,e,u(n)]):o>0&&l>o?void h(n,e,["select:some",s,e,u(n)]):void 0}};e.Select=T}(t,e),t.Select}),define("Framework",["underscore","backbone","framework/Controller","framework/Model","framework/View","framework/GameObject","framework/Renderer","framework/API","framework/CollectionView","lib/backbone.select"],function(e,t,i,n,r,a,s,o,l){var c=t;return c.Controller=i,c.GameObject=a,c.Renderer=s,c.CollectionView=l,c.API=o,c});var CryptoJS=CryptoJS||function(e,t){var i={},n=i.lib={},r=function(){},a=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=a.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;e>r;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-8*(r%4)&255)<<24-8*((n+r)%4);else if(65535<i.length)for(r=0;e>r;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;t>n;n+=4)i.push(4294967296*e.random()|0);return new s.init(i,t)}}),o=i.enc={},l=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++){var r=t[n>>>2]>>>24-8*(n%4)&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-4*(n%8);return new s.init(i,t/2)}},c=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-8*(n%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-8*(n%4);return new s.init(i,t)}},u=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},p=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,r=i.sigBytes,a=this.blockSize,o=r/(4*a),o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0);if(t=o*a,r=e.min(4*t,r),t){for(var l=0;t>l;l+=a)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=r}return new s.init(l,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=p.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new d.HMAC.init(e,i).finalize(t)}}});var d=i.algo={};return i}(Math);if(function(e){function t(e,t,i,n,r,a,s){return e=e+(t&i|~t&n)+r+s,(e<<a|e>>>32-a)+t}function i(e,t,i,n,r,a,s){return e=e+(t&n|i&~n)+r+s,(e<<a|e>>>32-a)+t}function n(e,t,i,n,r,a,s){return e=e+(t^i^n)+r+s,(e<<a|e>>>32-a)+t}function r(e,t,i,n,r,a,s){return e=e+(i^(t|~n))+r+s,(e<<a|e>>>32-a)+t}for(var a=CryptoJS,s=a.lib,o=s.WordArray,l=s.Hasher,s=a.algo,c=[],u=0;64>u;u++)c[u]=4294967296*e.abs(e.sin(u+1))|0;s=s.MD5=l.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var s=0;16>s;s++){var o=a+s,l=e[o];e[o]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var s=this._hash.words,o=e[a+0],l=e[a+1],u=e[a+2],p=e[a+3],d=e[a+4],h=e[a+5],f=e[a+6],m=e[a+7],y=e[a+8],g=e[a+9],v=e[a+10],b=e[a+11],x=e[a+12],T=e[a+13],w=e[a+14],k=e[a+15],_=s[0],C=s[1],S=s[2],E=s[3],_=t(_,C,S,E,o,7,c[0]),E=t(E,_,C,S,l,12,c[1]),S=t(S,E,_,C,u,17,c[2]),C=t(C,S,E,_,p,22,c[3]),_=t(_,C,S,E,d,7,c[4]),E=t(E,_,C,S,h,12,c[5]),S=t(S,E,_,C,f,17,c[6]),C=t(C,S,E,_,m,22,c[7]),_=t(_,C,S,E,y,7,c[8]),E=t(E,_,C,S,g,12,c[9]),S=t(S,E,_,C,v,17,c[10]),C=t(C,S,E,_,b,22,c[11]),_=t(_,C,S,E,x,7,c[12]),E=t(E,_,C,S,T,12,c[13]),S=t(S,E,_,C,w,17,c[14]),C=t(C,S,E,_,k,22,c[15]),_=i(_,C,S,E,l,5,c[16]),E=i(E,_,C,S,f,9,c[17]),S=i(S,E,_,C,b,14,c[18]),C=i(C,S,E,_,o,20,c[19]),_=i(_,C,S,E,h,5,c[20]),E=i(E,_,C,S,v,9,c[21]),S=i(S,E,_,C,k,14,c[22]),C=i(C,S,E,_,d,20,c[23]),_=i(_,C,S,E,g,5,c[24]),E=i(E,_,C,S,w,9,c[25]),S=i(S,E,_,C,p,14,c[26]),C=i(C,S,E,_,y,20,c[27]),_=i(_,C,S,E,T,5,c[28]),E=i(E,_,C,S,u,9,c[29]),S=i(S,E,_,C,m,14,c[30]),C=i(C,S,E,_,x,20,c[31]),_=n(_,C,S,E,h,4,c[32]),E=n(E,_,C,S,y,11,c[33]),S=n(S,E,_,C,b,16,c[34]),C=n(C,S,E,_,w,23,c[35]),_=n(_,C,S,E,l,4,c[36]),E=n(E,_,C,S,d,11,c[37]),S=n(S,E,_,C,m,16,c[38]),C=n(C,S,E,_,v,23,c[39]),_=n(_,C,S,E,T,4,c[40]),E=n(E,_,C,S,o,11,c[41]),S=n(S,E,_,C,p,16,c[42]),C=n(C,S,E,_,f,23,c[43]),_=n(_,C,S,E,g,4,c[44]),E=n(E,_,C,S,x,11,c[45]),S=n(S,E,_,C,k,16,c[46]),C=n(C,S,E,_,u,23,c[47]),_=r(_,C,S,E,o,6,c[48]),E=r(E,_,C,S,m,10,c[49]),S=r(S,E,_,C,w,15,c[50]),C=r(C,S,E,_,h,21,c[51]),_=r(_,C,S,E,x,6,c[52]),E=r(E,_,C,S,p,10,c[53]),S=r(S,E,_,C,v,15,c[54]),C=r(C,S,E,_,l,21,c[55]),_=r(_,C,S,E,y,6,c[56]),E=r(E,_,C,S,k,10,c[57]),S=r(S,E,_,C,f,15,c[58]),C=r(C,S,E,_,T,21,c[59]),_=r(_,C,S,E,d,6,c[60]),E=r(E,_,C,S,b,10,c[61]),S=r(S,E,_,C,u,15,c[62]),C=r(C,S,E,_,g,21,c[63]);s[0]=s[0]+_|0,s[1]=s[1]+C|0,s[2]=s[2]+S|0,s[3]=s[3]+E|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var a=e.floor(n/4294967296);for(i[(r+64>>>9<<4)+15]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[(r+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),t=this._hash,i=t.words,n=0;4>n;n++)r=i[n],i[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=l._createHelper(s),a.HmacMD5=l._createHmacHelper(s)}(Math),define("md5",function(e){return function(){var t;return t||e.CryptoJS}}(this)),define("config",["md5"],function(e){return{debug:!1,backend:{host:"https://cldr.pf-control.de/ttb-server/dev/",headerNames:{timestamp:"ttbTimestamp",hash:"ttbHash",session:"ttbSession"},createAccessHash:function(t){return e.MD5("su56oonifzrn876o"+t.headers.ttbTimestamp)}}}}),function(){function e(e,t){return e.name=t}function t(e,t){return e.href=t}function i(e){St.set(e)}function n(e){return"function"==typeof e}function r(e){return"[object Array]"==Object[ot].toString[mt](Object(e))}function a(e){return void 0!=e&&-1<(e.constructor+"")[J]("String")}function s(e,t){return 0==e[J](t)}function o(e){return e?e[G](/^[\s\xa0]+|[\s\xa0]+$/g,""):""}function l(e){var t=Ot[tt]("img");return t.width=1,t.height=1,t.src=e,t}function c(){}function u(e){return $ instanceof Function?$(e):(i(28),e)}function p(e){return u(e)[G](/\(/g,"%28")[G](/\)/g,"%29")}function d(e,t){if(e){var i=Ot[tt]("script");i.type="text/javascript",i.async=!0,i.src=e,i.id=t;var n=Ot.getElementsByTagName("script")[0];n[kt].insertBefore(i,n)}}function h(){return ui||"https:"==Ot[ut][yt]?"https:":"http:"}function f(){var e=""+Ot[ut][dt];return 0==e[J]("www.")?e[bt](4):e}function m(e){var t=Ot.referrer;if(/^https?:\/\//i[V](t)){if(e)return t;e="//"+Ot[ut][dt];var i=t[J](e);if((5==i||6==i)&&(e=t[Y](i+e[st]),"/"==e||"?"==e||""==e||":"==e))return;return t}}function y(e,t){if(1==t[st]&&null!=t[0]&&"object"==typeof t[0])return t[0];for(var i={},n=B.min(e[st]+1,t[st]),r=0;n>r;r++){if("object"==typeof t[r]){for(var a in t[r])t[r][pt](a)&&(i[a]=t[r][a]);break}r<e[st]&&(i[e[r]]=t[r])}return i}function g(e){if(100!=e.get(jn)&&L(Zt(e,vn))%1e4>=100*ei(e,jn))throw"abort"}function v(e){if(Nt(Zt(e,xn)))throw"abort"}function b(){var e=Ot[ut][yt];if("http:"!=e&&"https:"!=e)throw"abort"}function x(e){try{jt.XMLHttpRequest&&"withCredentials"in new jt.XMLHttpRequest?i(40):jt.XDomainRequest&&i(41),jt[wt].sendBeacon&&i(42)}catch(t){}e.set(gi,ei(e,gi)+1);var n=[];Kt.map(function(t,i){if(i.p){var r=e.get(t);void 0!=r&&r!=i[Q]&&("boolean"==typeof r&&(r*=1),n[q](i.p+"="+u(""+r)))}}),n[q]("z="+Yt()),e.set(yi,n[_t]("&"),!0)}function T(e){qt(Zt(e,yi),e.get(mi)),e.set(mi,c,!0)}function w(e){var t=jt.gaData;t&&(t.expId&&e.set(Wi,t.expId),t.expVar&&e.set(Xi,t.expVar))}function k(){if(jt[wt]&&"preview"==jt[wt].loadPurpose)throw"abort"}function _(e){var t=jt.gaDevIds;r(t)&&0!=t[st]&&e.set("&did",t[_t](","),!0)}function C(e){if(!e.get(xn))throw"abort"}function S(e){var t=ei(e,Qi);t>=500&&i(15);var n=Zt(e,fi);if("transaction"!=n&&"item"!=n){var n=ei(e,en),r=(new Date)[rt](),a=ei(e,Zi);if(0==a&&e.set(Zi,r),a=B.round(2*(r-a)/1e3),a>0&&(n=B.min(n+a,20),e.set(Zi,r)),0>=n)throw"abort";e.set(en,--n)}e.set(Qi,++t)}function E(e,t,n,r){t[e]=function(){try{return r&&i(r),n[Tt](this,arguments)}catch(t){var a=t&&t[nt];if(!(1<=100*B.random()||Nt("?"))){var s=["t=error","_e=exc","_v=j23","sr=1"];e&&s[q]("_f="+e),a&&s[q]("_m="+u(a[bt](0,100))),s[q]("aip=1"),s[q]("z="+Xt()),qt(s[_t]("&"))}throw t}}}function z(){var e,t,i;if((i=(i=jt[wt])?i.plugins:null)&&i[st])for(var n=0;n<i[st]&&!t;n++){var r=i[n];-1<r[nt][J]("Shockwave Flash")&&(t=r.description)}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),t=e.GetVariable("$version")}catch(a){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),t="WIN 6,0,21,0",e.AllowScriptAccess="always",t=e.GetVariable("$version")}catch(s){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),t=e.GetVariable("$version")}catch(o){}return t&&(e=t[K](/[\d]+/g))&&3<=e[st]&&(t=e[0]+"."+e[1]+" r"+e[2]),t||void 0}function A(e,t,i){"none"==t&&(t="");var n=[],r=Pt(e);e="__utma"==e?6:2;for(var a=0;a<r[st];a++){var s=(""+r[a])[ct](".");s[st]>=e&&n[q]({hash:s[0],R:r[a],O:s})}return 0==n[st]?void 0:1==n[st]?n[0]:j(t,n)||j(i,n)||j(null,n)||n[0]}function j(e,t){var i,n;null==e?i=n=1:(i=L(e),n=L(s(e,".")?e[bt](1):"."+e));for(var r=0;r<t[st];r++)if(t[r][U]==i||t[r][U]==n)return t[r]}function O(e){e=e.get(vn);var t=N(e,0);return"_ga=1."+u(t+"."+e)}function N(e,t){for(var i=new Date,n=jt[wt],r=n.plugins||[],i=[e,n.userAgent,i.getTimezoneOffset(),i.getYear(),i.getDate(),i.getHours(),i.getMinutes()+t],n=0;n<r[st];++n)i[q](r[n].description);return L(i[_t]("."))}function M(e,t){if(t==Ot[ut][dt])return!1;for(var i=0;i<e[st];i++)if(e[i]instanceof RegExp){if(e[i][V](t))return!0}else if(0<=t[J](e[i]))return!0;return!1}function P(){var e=jt.gaGlobal=jt.gaGlobal||{};return e.hid=e.hid||Xt()}function R(e){return 0<=e[J](".")||0<=e[J](":")}function I(e){function i(e){var t=(e[dt]||"")[ct](":")[0][Ct](),i=(e[yt]||"")[Ct](),i=1*e[et]||("http:"==i?80:"https:"==i?443:"");return e=e.pathname||"",s(e,"/")||(e="/"+e),[t,""+i,e]}var n=Ot[tt]("a");t(n,Ot[ut][vt]);var r=(n[yt]||"")[Ct](),a=i(n),o=n[ht]||"",l=r+"//"+a[0]+(a[1]?":"+a[1]:"");return s(e,"//")?e=r+e:s(e,"/")?e=l+e:!e||s(e,"?")?e=l+a[2]+(e||o):0>e[ct]("/")[0][J](":")&&(e=l+a[2][bt](0,a[2].lastIndexOf("/"))+"/"+e),t(n,e),r=i(n),{protocol:(n[yt]||"")[Ct](),host:r[0],port:r[1],path:r[2],G:n[ht]||"",url:e||""}}function L(e){var t,i=1,n=0;if(e)for(i=0,t=e[st]-1;t>=0;t--)n=e.charCodeAt(t),i=(i<<6&268435455)+n+(n<<14),n=266338304&i,i=0!=n?i^n>>21:i;return i}var $=encodeURIComponent,F=window,D=setTimeout,B=Math,q="push",U="hash",V="test",H="slice",G="replace",W="data",X="cookie",Y="charAt",J="indexOf",K="match",Q="defaultValue",Z="send",et="port",tt="createElement",it="setAttribute",nt="name",rt="getTime",at="host",st="length",ot="prototype",lt="clientWidth",ct="split",ut="location",pt="hasOwnProperty",dt="hostname",ht="search",ft="target",mt="call",yt="protocol",gt="clientHeight",vt="href",bt="substring",xt="action",Tt="apply",wt="navigator",kt="parentNode",_t="join",Ct="toLowerCase",St=new function(){var e=[];this.set=function(t){e[t]=!0},this.M=function(){for(var t=[],i=0;i<e[st];i++)e[i]&&(t[B.floor(i/6)]=t[B.floor(i/6)]^1<<i%6);for(i=0;i<t[st];i++)t[i]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[Y](t[i]||0);return t[_t]("")+"~"}},Et=function(e,t,n,r){try{e.addEventListener?e.addEventListener(t,n,!!r):e.attachEvent&&e.attachEvent("on"+t,n)}catch(a){i(27)}},zt=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i)},At=function(){this.keys=[],this.w={},this.m={}};At[ot].set=function(e,t,i){this.keys[q](e),i?this.m[":"+e]=t:this.w[":"+e]=t},At[ot].get=function(e){return this.m[pt](":"+e)?this.m[":"+e]:this.w[":"+e]},At[ot].map=function(e){for(var t=0;t<this.keys[st];t++){var i=this.keys[t],n=this.get(i);n&&e(i,n)}};var jt=F,Ot=document,Nt=function(e){var t=jt._gaUserPrefs;if(t&&t.ioo&&t.ioo()||e&&!0===jt["ga-disable-"+e])return!0;try{var i=jt.external;if(i&&i._gaUserPrefs&&"oo"==i._gaUserPrefs)return!0}catch(n){}return!1},Mt=function(e){D(e,100)},Pt=function(e){var t=[],i=Ot[X][ct](";");e=new RegExp("^\\s*"+e+"=\\s*(.*?)\\s*$");for(var n=0;n<i[st];n++){var r=i[n][K](e);r&&t[q](r[1])}return t},Rt=function(e,t,n,r,a,s){if(a=Nt(a)?!1:Lt[V](Ot[ut][dt])||"/"==n&&It[V](r)?!1:!0,!a)return!1;if(t&&1200<t[st]&&(t=t[bt](0,1200),i(24)),n=e+"="+t+"; path="+n+"; ",s&&(n+="expires="+new Date((new Date)[rt]()+s).toGMTString()+"; "),r&&"none"!=r&&(n+="domain="+r+";"),r=Ot[X],Ot.cookie=n,!(r=r!=Ot[X]))e:{for(e=Pt(e),r=0;r<e[st];r++)if(t==e[r]){r=!0;break e}r=!1}return r},It=new RegExp(/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/),Lt=new RegExp(/(^|\.)doubleclick\.net$/i),$t=function(){for(var e=jt[wt],e=e.appName+e.version+e.platform+e.userAgent+(Ot[X]?Ot[X]:"")+(Ot.referrer?Ot.referrer:""),t=e[st],i=jt.history[st];i>0;)e+=i--^t++;return L(e)},Ft=function(){return h()+"//www.google-analytics.com"},Dt=function(t){e(this,"len"),this.message=t+"-8192"},Bt=function(t){e(this,"ff2post"),this.message=t+"-2036"},qt=function(e,t){if(t=t||c,2036>=e[st])Ut(e,t);else{if(!(8192>=e[st]))throw new Dt(e[st]);var i=t;if(0<=jt[wt].userAgent[J]("Firefox")&&![].reduce)throw new Bt(e[st]);Ht(e,i)||Vt(e,i)||Gt(e,i)||i()}},Ut=function(e,t){var i=l(Ft()+"/collect?"+e);i.onload=i.onerror=function(){i.onload=null,i.onerror=null,t()}},Vt=function(e,t){var i;return(i=jt.XDomainRequest)?(i=new i,i.open("POST",Ft()+"/collect"),i.onerror=function(){t()},i.onload=t,i[Z](e),!0):!1},Ht=function(e,t){var i=jt.XMLHttpRequest;if(!i)return!1;var n=new i;return"withCredentials"in n?(n.open("POST",Ft()+"/collect",!0),n.withCredentials=!0,n.setRequestHeader("Content-Type","text/plain"),n.onreadystatechange=function(){4==n.readyState&&(t(),n=null)},n[Z](e),!0):!1},Gt=function(t,i){if(!Ot.body)return Mt(function(){Gt(t,i)}),!0;t=$(t);try{var n=Ot[tt]('<iframe name="'+t+'"></iframe>')}catch(r){n=Ot[tt]("iframe"),e(n,t)}n.height="0",n.width="0",n.style.display="none",n.style.visibility="hidden";var a=Ot[ut],a=Ft()+"/analytics_iframe.html#"+$(a[yt]+"//"+a[at]+"/favicon.ico"),s=function(){n.src="",n[kt]&&n[kt].removeChild(n)};Et(jt,"beforeunload",s);var o=!1,l=0,c=function(){if(!o){try{if(l>9||n.contentWindow[ut][at]==Ot[ut][at])return o=!0,s(),zt(jt,"beforeunload",s),void i()}catch(e){}l++,D(c,200)}};return Et(n,"load",c),Ot.body.appendChild(n),n.src=a,!0},Wt=function(){this.t=[]};Wt[ot].add=function(e){this.t[q](e)},Wt[ot].D=function(e){try{for(var t=0;t<this.t[st];t++){var i=e.get(this.t[t]);i&&n(i)&&i[mt](jt,e)}}catch(r){}t=e.get(mi),t!=c&&n(t)&&(e.set(mi,c,!0),D(t,10))};var Xt=function(){return B.round(2147483647*B.random())},Yt=function(){try{var e=new Uint32Array(1);return jt.crypto.getRandomValues(e),2147483647&e[0]}catch(t){return Xt()}},Jt=function(){this.data=new At},Kt=new At,Qt=[];Jt[ot].get=function(e){var t=ni(e),i=this[W].get(e);return t&&void 0==i&&(i=n(t[Q])?t[Q]():t[Q]),t&&t.n?t.n(this,e,i):i};var Zt=function(e,t){var i=e.get(t);return void 0==i?"":""+i},ei=function(e,t){var i=e.get(t);return void 0==i||""===i?0:1*i};Jt[ot].set=function(e,t,i){if(e)if("object"==typeof e)for(var n in e)e[pt](n)&&ti(this,n,e[n],i);else ti(this,e,t,i)};var ti=function(e,t,i,n){if(void 0!=i)switch(t){case xn:cr[V](i)}var r=ni(t);r&&r.o?r.o(e,t,i,n):e[W].set(t,i,n)},ii=function(t,i,n,r,a){e(this,t),this.p=i,this.n=r,this.o=a,this.defaultValue=n},ni=function(e){var t=Kt.get(e);if(!t)for(var i=0;i<Qt[st];i++){var n=Qt[i],r=n[0].exec(e);if(r){t=n[1](r),Kt.set(t[nt],t);break}}return t},ri=function(e){var t;return Kt.map(function(i,n){n.p==e&&(t=n)}),t&&t[nt]},ai=function(e,t,i,n,r){return e=new ii(e,t,i,n,r),Kt.set(e[nt],e),e[nt]},si=function(e,t){Qt[q]([new RegExp("^"+e+"$"),t])},oi=function(e,t,i){return ai(e,t,i,void 0,li)},li=function(){},ci=a(F.GoogleAnalyticsObject)&&o(F.GoogleAnalyticsObject)||"ga",ui=!1,pi=oi("apiVersion","v"),di=oi("clientVersion","_v");ai("anonymizeIp","aip");var hi=ai("adSenseId","a"),fi=ai("hitType","t"),mi=ai("hitCallback"),yi=ai("hitPayload");ai("nonInteraction","ni"),ai("currencyCode","cu"),ai("sessionControl","sc",""),ai("queueTime","qt");var gi=ai("_s","_s");ai("screenName","cd");var vi=ai("location","dl",""),bi=ai("referrer","dr"),xi=ai("page","dp","");ai("hostname","dh");var Ti=ai("language","ul"),wi=ai("encoding","de");ai("title","dt",function(){return Ot.title||void 0}),si("contentGroup([0-9]+)",function(e){return new ii(e[0],"cg"+e[1])});var ki=ai("screenColors","sd"),_i=ai("screenResolution","sr"),Ci=ai("viewportSize","vp"),Si=ai("javaEnabled","je"),Ei=ai("flashVersion","fl");ai("campaignId","ci"),ai("campaignName","cn"),ai("campaignSource","cs"),ai("campaignMedium","cm"),ai("campaignKeyword","ck"),ai("campaignContent","cc");var zi=ai("eventCategory","ec"),Ai=ai("eventAction","ea"),ji=ai("eventLabel","el"),Oi=ai("eventValue","ev"),Ni=ai("socialNetwork","sn"),Mi=ai("socialAction","sa"),Pi=ai("socialTarget","st"),Ri=ai("l1","plt"),Ii=ai("l2","pdt"),Li=ai("l3","dns"),$i=ai("l4","rrt"),Fi=ai("l5","srt"),Di=ai("l6","tcp"),Bi=ai("l7","dit"),qi=ai("l8","clt"),Ui=ai("timingCategory","utc"),Vi=ai("timingVar","utv"),Hi=ai("timingLabel","utl"),Gi=ai("timingValue","utt");ai("appName","an"),ai("appVersion","av",""),ai("appId","aid",""),ai("appInstallerId","aiid",""),ai("exDescription","exd"),ai("exFatal","exf");var Wi=ai("expId","xid"),Xi=ai("expVar","xvar"),Yi=ai("_utma","_utma"),Ji=ai("_utmz","_utmz"),Ki=ai("_utmht","_utmht"),Qi=ai("_hc",void 0,0),Zi=ai("_ti",void 0,0),en=ai("_to",void 0,20);si("dimension([0-9]+)",function(e){return new ii(e[0],"cd"+e[1])}),si("metric([0-9]+)",function(e){return new ii(e[0],"cm"+e[1])}),ai("linkerParam",void 0,void 0,O,li);var tn=ai("usage","_u",void 0,function(){return St.M()},li);ai("forceSSL",void 0,void 0,function(){return ui},function(e,t,n){i(34),ui=!!n});var nn=ai("_j1","jid");ai("_j2","gjid"),si("\\&(.*)",function(e){var t=new ii(e[0],e[1]),i=ri(e[0][bt](1));return i&&(t.n=function(e){return e.get(i)},t.o=function(e,t,n,r){e.set(i,n,r)},t.p=void 0),t});var rn=oi("_oot"),an=ai("previewTask"),sn=ai("checkProtocolTask"),on=ai("validationTask"),ln=ai("checkStorageTask"),cn=ai("historyImportTask"),un=ai("samplerTask"),pn=oi("_rlt"),dn=ai("buildHitTask"),hn=ai("sendHitTask"),fn=ai("ceTask"),mn=ai("devIdTask"),yn=ai("timingTask"),gn=oi("name"),vn=oi("clientId","cid"),bn=ai("userId","uid"),xn=oi("trackingId","tid"),Tn=oi("cookieName",void 0,"_ga"),wn=oi("cookieDomain"),kn=oi("cookiePath",void 0,"/"),_n=oi("cookieExpires",void 0,63072e3),Cn=oi("legacyCookieDomain"),Sn=oi("legacyHistoryImport",void 0,!0),En=oi("storage",void 0,"cookie"),zn=oi("allowLinker",void 0,!1),An=oi("allowAnchor",void 0,!0),jn=oi("sampleRate","sf",100),On=oi("siteSpeedSampleRate",void 0,1),Nn=oi("alwaysSendReferrer",void 0,!1),Mn=function(e){var t=er;return t.fa&&t.$?0:(t.$=!0,0==t.V?0:(void 0===e&&(e=Yt()),0==e%t.V?B.floor(e/t.V)%t.ea+1:0))},Pn=function(e,t){var i=B.min(ei(e,On),100);if(!(L(Zt(e,vn))%100>=i)&&(i={},Rn(i)||In(i))){var n=i[Ri];void 0==n||1/0==n||isNaN(n)||(n>0?(Ln(i,Li),Ln(i,Di),Ln(i,Fi),Ln(i,Ii),Ln(i,$i),Ln(i,Bi),Ln(i,qi),t(i)):Et(jt,"load",function(){Pn(e,t)},!1))}},Rn=function(e){var t=jt.performance||jt.webkitPerformance,t=t&&t.timing;if(!t)return!1;var i=t.navigationStart;return 0==i?!1:(e[Ri]=t.loadEventStart-i,e[Li]=t.domainLookupEnd-t.domainLookupStart,e[Di]=t.connectEnd-t.connectStart,e[Fi]=t.responseStart-t.requestStart,e[Ii]=t.responseEnd-t.responseStart,e[$i]=t.fetchStart-i,e[Bi]=t.domInteractive-i,e[qi]=t.domContentLoadedEventStart-i,!0)},In=function(e){if(jt.top!=jt)return!1;var t=jt.external,i=t&&t.onloadT;return t&&!t.isValidLoadTime&&(i=void 0),i>2147483648&&(i=void 0),i>0&&t.setPageReadyTime(),void 0==i?!1:(e[Ri]=i,!0)},Ln=function(e,t){var i=e[t];(isNaN(i)||1/0==i||0>i)&&(e[t]=void 0)},$n=function(e){return function(t){"pageview"!=t.get(fi)||e.I||(e.I=!0,Pn(t,function(t){e[Z]("timing",t)}))}},Fn=!1,Dn=function(e){if("cookie"==Zt(e,En)){var t=Zt(e,Tn),n=Un(e),r=Wn(Zt(e,kn)),a=Hn(Zt(e,wn)),s=1e3*ei(e,_n),o=Zt(e,xn);if("auto"!=a)Rt(t,n,r,a,o,s)&&(Fn=!0);else{i(32);var l;if(n=[],a=f()[ct]("."),4!=a[st]||(l=a[a[st]-1],parseInt(l,10)!=l)){for(l=a[st]-2;l>=0;l--)n[q](a[H](l)[_t]("."));n[q]("none"),l=n}else l=["none"];for(var c=0;c<l[st];c++)if(a=l[c],e[W].set(wn,a),n=Un(e),Rt(t,n,r,a,o,s))return 1==Gn(a)&&i(36),"none"==a&&i(37),void(Fn=!0);e[W].set(wn,"auto")}}},Bn=function(e){if("cookie"==Zt(e,En)&&!Fn&&(Dn(e),!Fn))throw"abort"},qn=function(e){if(e.get(Sn)){var t=Zt(e,wn),n=Zt(e,Cn)||f(),r=A("__utma",n,t);r&&(i(19),e.set(Ki,(new Date)[rt](),!0),e.set(Yi,r.R),(t=A("__utmz",n,t))&&r[U]==t[U]&&e.set(Ji,t.R))}},Un=function(e){var t=p(Zt(e,vn)),i=Gn(Zt(e,wn));return e=Xn(Zt(e,kn)),e>1&&(i+="-"+e),["GA1",i,t][_t](".")},Vn=function(e,t,i){for(var n,r=[],a=[],s=0;s<e[st];s++){var o=e[s];o.r[i]==t?r[q](o):void 0==n||o.r[i]<n?(a=[o],n=o.r[i]):o.r[i]==n&&a[q](o)}return 0<r[st]?r:a},Hn=function(e){return 0==e[J](".")?e.substr(1):e},Gn=function(e){return Hn(e)[ct](".")[st]},Wn=function(e){return e?(1<e[st]&&e.lastIndexOf("/")==e[st]-1&&(e=e.substr(0,e[st]-1)),0!=e[J]("/")&&(e="/"+e),e):"/"},Xn=function(e){return e=Wn(e),"/"==e?1:e[ct]("/")[st]},Yn=new RegExp(/^https?:\/\/([^\/:]+)/),Jn=/(.*)([?&#])(?:_ga=[^&#]*)(?:&?)(.*)/,Kn=function(e){i(48),this.target=e,this.T=!1};Kn[ot].Q=function(e,i){if(e.tagName){if("a"==e.tagName[Ct]())return void(e[vt]&&t(e,Qn(this,e[vt],i)));if("form"==e.tagName[Ct]())return Zn(this,e)}return"string"==typeof e?Qn(this,e,i):void 0};var Qn=function(e,t,i){var n=Jn.exec(t);n&&3<=n[st]&&(t=n[1]+(n[3]?n[2]+n[3]:"")),e=e[ft].get("linkerParam");var r=t[J]("?"),n=t[J]("#");return i?t+=(-1==n?"#":"&")+e:(i=-1==r?"?":"&",t=-1==n?t+(i+e):t[bt](0,n)+i+e+t[bt](n)),t},Zn=function(e,t){if(t&&t[xt]){var i=e[ft].get("linkerParam")[ct]("=")[1];if("get"==t.method[Ct]()){for(var n=t.childNodes||[],r=0;r<n[st];r++)if("_ga"==n[r][nt])return void n[r][it]("value",i);n=Ot[tt]("input"),n[it]("type","hidden"),n[it]("name","_ga"),n[it]("value",i),t.appendChild(n)}else"post"==t.method[Ct]()&&(t.action=Qn(e,t[xt]))}};Kn[ot].S=function(e,n,r){function a(r){try{r=r||jt.event;var a;e:{var o=r[ft]||r.srcElement;for(r=100;o&&r>0;){if(o[vt]&&o.nodeName[K](/^a(?:rea)?$/i)){a=o;break e}o=o[kt],r--}a={}}("http:"==a[yt]||"https:"==a[yt])&&M(e,a[dt]||"")&&a[vt]&&t(a,Qn(s,a[vt],n))}catch(l){i(26)}}var s=this;if(this.T||(this.T=!0,Et(Ot,"mousedown",a,!1),Et(Ot,"touchstart",a,!1),Et(Ot,"keyup",a,!1)),r){r=function(t){if(t=t||jt.event,(t=t[ft]||t.srcElement)&&t[xt]){var i=t[xt][K](Yn);i&&M(e,i[1])&&Zn(s,t)}};for(var o=0;o<Ot.forms[st];o++)Et(Ot.forms[o],"submit",r)}};var er,tr,ir=function(e,t,i){var n=this;this.U=nn,this.aa=t,this.Y=i||rr(e);var r=e.get(dn);e.set(dn,function(e){e.get(n.U)||("1"==Pt(n.Y)[0]?e.set(n.U,"",!0):e.set(n.U,""+Xt(),!0));var t=r(e);return e.get(n.U)&&Rt(n.Y,"1",e.get(kn),e.get(wn),e.get(xn),6e5),t});var a=e.get(hn);e.set(hn,function(e){var t=a(e);return nr(n,e),t})},nr=function(e,t){if(t.get(e.U)){var i=new At,n=function(e){i.set(ni(e).p,t.get(e))};n(pi),n(di),n(xn),n(vn),n(e.U),n(tn);var r=e.aa;"/"===r[Y](0)&&(r=h()+r),i.map(function(e,t){r+=u(e)+"="+u(""+t)+"&"}),r+="z="+Xt(),l(r),t.set(e.U,"",!0)}},rr=function(e){return e.get(gn)&&"t0"!=e.get(gn)?"_dc_"+p(e.get(gn)):"_dc"};er=new function(){this.V=10,this.fa=void 0,this.$=!1,this.ea=1},tr=!1;var ar,sr=function(e,t){var n=e.b;if(!n.get("dcLoaded")){i(29),t=t||{};var r;t[Tn]&&(r=p(t[Tn]));var a="//stats.g.doubleclick.net/collect?t=dc&aip=1&";if("https:"!=Ot[ut][yt]&&!ui){var s=L(n.get(vn));(tr||Mn(s))&&(a="https:"+a,i(33),tr=!0)}new ir(n,a,r),n.set("dcLoaded",!0)}},or=function(){i(38)},lr=function(e,t,i){if(!ar){var n;n=Ot[ut][U];var r=jt[nt],a=/^#?gaso=([^&]*)/;(r=(n=(n=n&&n[K](a)||r&&r[K](a))?n[1]:Pt("GASO")[0]||"")&&n[K](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))&&(Rt("GASO",""+n,i,t,e,0),F._udo||(F._udo=t),F._utcp||(F._utcp=i),e=r[1],d("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(e?"prefix="+e+"&":"")+Xt(),"_gasojs")),ar=!0}},cr=/^(UA|YT|MO|GP)-(\d+)-(\d+)$/,ur=function(e){function t(e,t){n.b[W].set(e,t)}function i(e,i){t(e,i),n.filters.add(e)}var n=this;this.b=new Jt,this.filters=new Wt,t(gn,e[gn]),t(xn,o(e[xn])),t(Tn,e[Tn]),t(wn,e[wn]||f()),t(kn,e[kn]),t(_n,e[_n]),t(Cn,e[Cn]),t(Sn,e[Sn]),t(zn,e[zn]),t(An,e[An]),t(jn,e[jn]),t(On,e[On]),t(Nn,e[Nn]),t(En,e[En]),t(bn,e[bn]),t(pi,1),t(di,"j23"),i(rn,v),i(an,k),i(sn,b),i(on,C),i(ln,Bn),i(cn,qn),i(un,g),i(pn,S),i(fn,w),i(mn,_),i(dn,x),i(hn,T),i(yn,$n(this)),pr(this.b,e[vn]),dr(this.b),this.b.set(hi,P()),lr(this.b.get(xn),this.b.get(wn),this.b.get(kn))},pr=function(e,t){if("cookie"==Zt(e,En)){Fn=!1;var n;e:{var r=Pt(Zt(e,Tn));if(r&&!(1>r[st])){n=[];for(var a=0;a<r[st];a++){var s;s=r[a][ct](".");var o=s.shift();("GA1"==o||"1"==o)&&1<s[st]?(o=s.shift()[ct]("-"),1==o[st]&&(o[1]="1"),o[0]*=1,o[1]*=1,s={r:o,s:s[_t](".")}):s=void 0,s&&n[q](s)}if(1==n[st]){i(13),n=n[0].s;break e}if(0!=n[st]){if(i(14),r=Gn(Zt(e,wn)),n=Vn(n,r,0),1==n[st]){n=n[0].s;break e}r=Xn(Zt(e,kn)),n=Vn(n,r,1),n=n[0]&&n[0].s;break e}i(12)}n=void 0}n||(n=Zt(e,wn),r=Zt(e,Cn)||f(),n=A("__utma",r,n),(n=void 0==n?void 0:n.O[1]+"."+n.O[2])&&i(10)),n&&(e[W].set(vn,n),Fn=!0)}n=e.get(An),(a=(n=Ot[ut][n?"href":"search"][K]("(?:&|#|\\?)"+u("_ga")[G](/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"=([^&#]*)"))&&2==n[st]?n[1]:"")&&(e.get(zn)?(n=a[J]("."),-1==n?i(22):(r=a[bt](n+1),"1"!=a[bt](0,n)?i(22):(n=r[J]("."),-1==n?i(22):(a=r[bt](0,n),n=r[bt](n+1),a!=N(n,0)&&a!=N(n,-1)&&a!=N(n,-2)?i(23):(i(11),e[W].set(vn,n)))))):i(21)),t&&(i(9),e[W].set(vn,u(t))),e.get(vn)||((n=(n=jt.gaGlobal&&jt.gaGlobal.vid)&&-1!=n[ht](/^(?:utma\.)?\d+\.\d+$/)?n:void 0)?(i(17),e[W].set(vn,n)):(i(8),e[W].set(vn,[Xt()^2147483647&$t(),B.round((new Date)[rt]()/1e3)][_t](".")))),Dn(e)},dr=function(e){var t=jt[wt],n=jt.screen,r=Ot[ut];if(e.set(bi,m(e.get(Nn))),r){var a=r.pathname||"";"/"!=a[Y](0)&&(i(31),a="/"+a),e.set(vi,r[yt]+"//"+r[dt]+a+r[ht])}n&&e.set(_i,n.width+"x"+n.height),n&&e.set(ki,n.colorDepth+"-bit");var n=Ot.documentElement,o=(a=Ot.body)&&a[lt]&&a[gt],l=[];if(n&&n[lt]&&n[gt]&&("CSS1Compat"===Ot.compatMode||!o)?l=[n[lt],n[gt]]:o&&(l=[a[lt],a[gt]]),n=0>=l[0]||0>=l[1]?"":l[_t]("x"),e.set(Ci,n),e.set(Ei,z()),e.set(wi,Ot.characterSet||Ot.charset),e.set(Si,t&&"function"==typeof t.javaEnabled&&t.javaEnabled()||!1),e.set(Ti,(t&&(t.language||t.browserLanguage)||"")[Ct]()),r&&e.get(An)&&(t=Ot[ut][U])){for(t=t[ct](/[?&#]+/),r=[],n=0;n<t[st];++n)(s(t[n],"utm_id")||s(t[n],"utm_campaign")||s(t[n],"utm_source")||s(t[n],"utm_medium")||s(t[n],"utm_term")||s(t[n],"utm_content")||s(t[n],"gclid")||s(t[n],"dclid")||s(t[n],"gclsrc"))&&r[q](t[n]);0<r[st]&&(t="#"+r[_t]("&"),e.set(vi,e.get(vi)+t))}};ur[ot].get=function(e){return this.b.get(e)},ur[ot].set=function(e,t){this.b.set(e,t)};var hr={pageview:[xi],event:[zi,Ai,ji,Oi],social:[Ni,Mi,Pi],timing:[Ui,Vi,Gi,Hi]};ur[ot].send=function(){if(!(1>arguments[st])){var e,t;"string"==typeof arguments[0]?(e=arguments[0],t=[][H][mt](arguments,1)):(e=arguments[0]&&arguments[0][fi],t=arguments),e&&(t=y(hr[e]||[],t),t[fi]=e,this.b.set(t,void 0,!0),this.filters.D(this.b),this.b[W].m={})}};var fr=function(e){return"prerender"==Ot.visibilityState?!1:(e(),!0)},mr=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,yr=function(e){if(n(e[0]))this.u=e[0];else{var t=mr.exec(e[0]);if(null!=t&&4==t[st]&&(this.c=t[1]||"t0",this.e=t[2]||"",this.d=t[3],this.a=[][H][mt](e,1),this.e||(this.A="create"==this.d,this.i="require"==this.d,this.g="provide"==this.d,this.ba="remove"==this.d),this.i&&(3<=this.a[st]?(this.X=this.a[1],this.W=this.a[2]):this.a[1]&&(a(this.a[1])?this.X=this.a[1]:this.W=this.a[1]))),t=e[1],e=e[2],!this.d)throw"abort";
if(this.i&&(!a(t)||""==t))throw"abort";if(this.g&&(!a(t)||""==t||!n(e)))throw"abort";if(R(this.c)||R(this.e))throw"abort";if(this.g&&"t0"!=this.c)throw"abort"}},gr={F:"/plugins/ua/",H:"plugins_",ga:function(){gr.f=[],gr.k=new At,gr.Z=new At,gr.ca={ec:45,ecommerce:46,linkid:47}}};gr.ga(),gr.B=function(e,t,r){t==vr?i(35):t.get(gn);var a=gr.k.get(e);return n(a)?(t[gr.H]=t[gr.H]||new At,t[gr.H].get(e)?!0:(t[gr.H].set(e,new a(t,r||{})),!0)):!1},gr.da=function(e){var t=e.a[0];if(!n(gr.k.get(t))&&!gr.Z.get(t)&&(gr.ca[pt](t)&&i(gr.ca[t]),e=e.X,!e&&gr.ca[pt](t)?(i(39),e=t+".js"):i(43),e)){e&&0<=e[J]("/")||(e=h()+"//www.google-analytics.com"+gr.F+e),e=I(e);var r=e[yt],a=Ot[ut][yt];(r="https:"==r||r==a?!0:"http:"!=r?!1:"http:"==a)&&(r=I(Ot[ut][vt]),e.G||0<=e.url[J]("?")||0<=e.path[J]("://")?r=!1:e[at]==r[at]&&e[et]==r[et]?r=!0:(r="http:"==e[yt]?80:443,r="www.google-analytics.com"==e[at]&&(e[et]||r)==r&&s(e.path,"/plugins/")?!0:!1)),r&&(d(e.url),gr.Z.set(t,!0))}},gr.C=function(e,t){gr.k.set(e,t)},gr.D=function(){var e=gr.J[Tt](gr,arguments),e=gr.f.concat(e);for(gr.f=[];0<e[st]&&!gr.v(e[0])&&(e.shift(),!(0<gr.f[st])););gr.f=gr.f.concat(e)},gr.J=function(){for(var e=[],t=0;t<arguments[st];t++)try{var i=new yr(arguments[t]);i.g?gr.C(i.a[0],i.a[1]):(i.i&&gr.da(i),e[q](i))}catch(n){}return e},gr.v=function(e){try{if(e.u)e.u[mt](jt,vr.j("t0"));else{var t=e.c==ci?vr:vr.j(e.c);if(e.A)"t0"==e.c&&vr.create[Tt](vr,e.a);else if(e.ba)vr.remove(e.c);else if(t)if(e.i){if(!gr.B(e.a[0],t,e.W))return!0}else e.e&&(t=t[gr.H].get(e.e)),t[e.d][Tt](t,e.a)}}catch(i){}};var vr=function(){i(1),gr.D[Tt](gr,[arguments])};vr.h={},vr.P=[],vr.L=0,vr.answer=42;var br=[xn,wn,gn];vr.create=function(){var e=y(br,[][H][mt](arguments));e[gn]||(e[gn]="t0");var t=""+e[gn];return vr.h[t]?vr.h[t]:(e=new ur(e),vr.h[t]=e,vr.P[q](e),e)},vr.remove=function(e){for(var t=0;t<vr.P[st];t++)if(vr.P[t].get(gn)==e){vr.P.splice(t,1),vr.h[e]=null;break}},vr.j=function(e){return vr.h[e]},vr.K=function(){return vr.P[H](0)},vr.N=function(){"ga"!=ci&&i(49);var e=jt[ci];if(!e||42!=e.answer){vr.L=e&&e.l,vr.loaded=!0;var t=jt[ci]=vr;E("create",t,t.create,3),E("remove",t,t.remove),E("getByName",t,t.j,5),E("getAll",t,t.K,6),t=ur[ot],E("get",t,t.get,7),E("set",t,t.set,4),E("send",t,t[Z],2),t=Jt[ot],E("get",t,t.get),E("set",t,t.set),(jt.gaplugins=jt.gaplugins||{}).Linker=Kn,t=Kn[ot],gr.C("linker",Kn),E("decorate",t,t.Q,20),E("autoLink",t,t.S,25),gr.C("displayfeatures",sr),gr.C("adfeatures",or),e=e&&e.q,r(e)?gr.D[Tt](vr,e):i(50)}},function(){var e=vr.N;if(!fr(e)){i(16);var t=!1,n=function(){!t&&fr(e)&&(t=!0,zt(Ot,"visibilitychange",n))};Et(Ot,"visibilitychange",n)}}()}(window),define("google-analytics",function(e){return function(){var t;return t||e.ga}}(this)),define("util/analytics",["jquery","underscore","backbone","google-analytics"],function(e,t,i,n){var r={};return r.trackPageView=function(e){n("send","pageview",""===e.fragment?"/":e.fragment)},r.trackAction=function(e,t,i,r){n("send","event",e,t,i,r)},n("create","UA-52163376-2","auto"),r}),define("app",["jquery","underscore","Framework","util/analytics"],function(e,t,i,n){var r,a=i.Controller.extend({router:null,baseviewIsRendered:!1,startLevel:function(e){this.setFullScreenContent(this.router.views.playlevelview,e)},setFullScreenContent:function(){this.baseviewIsRendered=!1;var e=this.router.views;e.current.close(),e.baseview.onClose(),e.current=[].shift.call(arguments),e.current.setElement("body").render.apply(e.current,arguments),n.trackPageView(this.router.getCurrentAppStatus())},getMainView:function(){return this.router.views.baseview},setContent:function(){var e=[].shift.call(arguments),t=this.router.views;t.current!=e&&(null!==t.current&&t.current.close(),this.baseviewIsRendered||(t.baseview.render(),this.baseviewIsRendered=!0),t.current=e,t.current.render.apply(t.current,arguments),t.baseview.setContent(t.current.el),n.trackPageView(this.router.getCurrentAppStatus()))},init:function(e){i.API.setupBackend({host:e.backend.host,onAjaxPrepare:function(i){return i.string=t.uniqueId("API-Request")+' "'+i.type+" "+i.url,"undefined"!=typeof r.session&&null!==r.session&&r.session.has("hash")&&(i.string+=" with sessionID",i.headers[e.backend.headerNames.session]=r.session.get("hash")),i.headers[e.backend.headerNames.timestamp]=Date.now()/1e3,i.headers[e.backend.headerNames.hash]=e.backend.createAccessHash(i),i}});try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.audiocontext=new window.AudioContext}catch(n){console.error("Web Audio API is not supported in this browser")}t.extend(r,e),this.session.restore(),this.router.init()}});return r=new a}),define("models/User",["jquery","underscore","Framework","md5"],function(e,t,i,n){var r=i.Model.extend({defaults:{username:"unknown"},urlRoot:"user",initialize:function(){this.on("change",function(){console.log(this.toJSON())},this)},createGravatarURL:function(){var e=this.get("email")||"";return"//gravatar.com/avatar/"+n.MD5(e.toLowerCase()).toString()+"?d=mm&s=200"},parse:function(e){return e===!0?{}:e}});return r}),define("util/Storage",[],function(){var e={sessionStorage:{get:function(e){return sessionStorage.getItem(e)},set:function(e,t){return sessionStorage.setItem(e,t)},check:function(e){return null!==sessionStorage.getItem(e)},clear:function(e){return sessionStorage.removeItem(e)}},localStorage:{get:function(e){return localStorage.getItem(e)},set:function(e,t){return localStorage.setItem(e,t)},check:function(e){return null!==localStorage.getItem(e)},clear:function(e){return localStorage.removeItem(e)}},cookie:{get:function(e){var t,i,n,r=document.cookie.split(";");for(t=0;t<r.length;t++)if(i=r[t].substr(0,r[t].indexOf("=")),n=r[t].substr(r[t].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==e)return decodeURI(n)},set:function(e,t){var i=864e5,n=new Date((new Date).getTime()+parseInt(i)),r=encodeURI(t)+(null===i?"":"; expires="+n.toUTCString());document.cookie=e+"="+r},check:function(e){var t=this.get(e);return null!==t&&""!==t},clear:function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}}};return e}),define("models/Session",["underscore","Framework","models/User","util/Storage"],function(e,t,i,n){var r=t.Model.extend({defaults:{logged_in:!1},url:"session",options:{persist:!1},initialize:function(){this.store=this.options.persist||"undefined"==typeof sessionStorage||null===sessionStorage?this.options.persist&&"undefined"!=typeof localStorage&&null!==localStorage?n.localStorage:n.cookie:n.sessionStorage},login:function(t,i){i=i||{};var n=e.clone(i),r=this;e.extend(i,{success:function(e,t,i){n.success&&n.success(e,t,i),r.set("logged_in",!0),r.cache()}}),this.save(t,i)},logout:function(){var e=this;this.store.clear("session"),this.destroy({wait:!0,success:function(t){t.clear({silent:!0}),t.id=null,e.set({logged_in:!1})},error:function(e){console.error(e)}})},restore:function(){if(this.store.check("session")){var e=this,t=function(){e.store.clear("session")};try{this.set(JSON.parse(this.store.get("session")))}catch(i){t()}this.fetch({success:function(){e.set({logged_in:!0}),e.cache()},error:t})}},sync:function(i,n,r){return r.attrs=e.pick(n.attributes,["email","password","stay_logged_in"]),t.sync.call(this,i,n,r)},parse:function(e){this.clear({silent:!0});var t={};for(var n in e)switch(n){case"user":t.user=new i(e[n],{parse:!0});break;default:t[n]=e[n]}return t},cache:function(){this.store.set("session",JSON.stringify(e.pick(this.toJSON(),"hash","expireTime")))}});return r}),define("text",["module"],function(e){var t,i,n,r,a,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),p=c&&location.hostname,d=c&&(location.port||void 0),h={},f=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=s[t];try{e=new ActiveXObject(i)}catch(n){}if(e){s=[i];break}}return e},parseName:function(e){var t,i,n,r=!1,a=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==a&&(!s||a>1)?(t=e.substring(0,a),i=e.substring(a+1,e.length)):t=e,n=i||t,a=n.indexOf("!"),-1!==a&&(r="strip"===n.substring(a+1),n=n.substring(0,a),i?i=n:t=n),{moduleName:t,ext:i,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,r){var a,s,o,l=t.xdRegExp.exec(e);return l?(a=l[2],s=l[3],s=s.split(":"),o=s[1],s=s[0],!(a&&a!==i||s&&s.toLowerCase()!==n.toLowerCase()||(o||s)&&o!==r)):!0},finishLoad:function(e,i,n,r){n=i?t.strip(n):n,f.isBuild&&(h[e]=n),r(n)},load:function(e,i,n,r){if(r&&r.isBuild&&!r.inlineText)return void n();f.isBuild=r&&r.isBuild;var a=t.parseName(e),s=a.moduleName+(a.ext?"."+a.ext:""),o=i.toUrl(s),l=f.useXhr||t.useXhr;return 0===o.indexOf("empty:")?void n():void(!c||l(o,u,p,d)?t.get(o,function(i){t.finishLoad(e,a.strip,i,n)},function(e){n.error&&n.error(e)}):i([s],function(e){t.finishLoad(a.moduleName+"."+a.ext,a.strip,e,n)}))},write:function(e,i,n){if(h.hasOwnProperty(i)){var r=t.jsEscape(h[i]);n.asModule(e+"!"+i,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,i,n,r,a){var s=t.parseName(i),o=s.ext?"."+s.ext:"",l=s.moduleName+o,c=n.toUrl(s.moduleName+o)+".js";t.load(l,n,function(){var i=function(e){return r(c,e)};i.asModule=function(e,t){return r.asModule(e,c,t)},t.write(e,l,i,a)},a)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var r=i.readFileSync(e,"utf8");0===r.indexOf("")&&(r=r.substring(1)),t(r)}catch(a){n&&n(a)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,i,n,r){var a,s=t.createXhr();if(s.open("GET",e,!0),r)for(a in r)r.hasOwnProperty(a)&&s.setRequestHeader(a.toLowerCase(),r[a]);f.onXhr&&f.onXhr(s,e),s.onreadystatechange=function(){var t,r;4===s.readyState&&(t=s.status||0,t>399&&600>t?(r=new Error(e+" HTTP status: "+t),r.xhr=s,n&&n(r)):i(s.responseText),f.onXhrComplete&&f.onXhrComplete(s,e))},s.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,r="utf-8",a=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),r)),l="";try{for(i=new java.lang.StringBuffer,n=o.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=o.readLine());)i.append(s),i.append(n);l=String(i.toString())}finally{o.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var i,s,o,l={};a&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),i.init(o,1,0,!1),s=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),s.init(i,"utf-8",i.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(i.available(),l),s.close(),i.close(),t(l.value)}catch(c){throw new Error((o&&o.path||"")+": "+c)}}),t}),define("text!templates/menu.html",[],function(){return'<nav class="navbar navbar-default" id="menu" role="navigation">\n<div class="container-fluid">\n			<div class="navbar-header">\n				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">\n					<span class="icon-bar"></span>\n					<span class="icon-bar"></span>\n					<span class="icon-bar"></span>\n				</button>\n				<a class="navbar-brand" href="#/">\n					<img alt="TouchTheBeat" src="img/logo.svg">\n				</a>\n			</div>\n\n			<div class="navbar-collapse collapse">\n				<ul class="nav navbar-nav">\n					<li id="home"><a href="#">Home</a>\n					</li>\n					<li id="chooselevel"><a href="#chooselevel">Play</a>\n					</li>\n                    <li id="levelbuilder"><a href="#levelbuilder">Level Builder</a>\n                    </li>\n					<li class="dropdown">\n						<a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>\n						<ul class="dropdown-menu">\n                            <li><a href="//github.com/TouchTheBeat/TouchTheBeat" target="_blank"><span\n                                    class="glyphicon glyphicon-share"></span> Project on GitHub</a>\n                            </li>\n                            <li><a href="//twitter.com/intent/tweet?text=.@TouchTheBeat " target="_blank"><span\n                                    class="glyphicon glyphicon-share"></span> Give Feedback</a>\n                            </li>\n							<li class="divider"></li>\n                            <li><a href="#legal">Legal information</a>\n                            </li>\n						</ul>\n					</li>\n				</ul>\n				<ul class="nav navbar-nav navbar-right usermenucontainer">\n				</ul>\n            </div>\n            <!--/.navbar-collapse -->\n		</div>\n</nav>'}),define("text!templates/signin.html",[],function(){return'<div class="modal fade bs-modal-sm" id="user_modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"\n     aria-hidden="true">\n    <!-- thanks to TXTCLASS for publishing this: http://bootsnipp.com/snippets/featured/sign-in-sign-up-dual-modal. It was used here. -->\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <ul role="tablist" class="nav nav-tabs">\n                <li class="active"><a href="#signin" role="tab" data-toggle="tab" id="link_signin">Sign In</a></li>\n                <li><a href="#signup" role="tab" data-toggle="tab" id="link_signup">Register</a></li>\n                <li><a href="#about" role="tab" data-toggle="tab">About</a></li>\n            </ul>\n\n            <div class="modal-body">\n                <div class="tab-content">\n                    <div class="tab-pane fade in" id="about">\n                        <p>You will need to log in to create, edit or delete your own levels.\n                            <br>Your password is transfered and stored encryped in our backend. Rest\n                            assured your credentials will not be sold, traded, or given to anyone.</p>\n                        <br>\n\n                        <p>\n                            Please contact <a href="mailto:touchthebeatdev@gmail.com">touchthebeatdev@gmail.com</a>\n                            for any inquiries.</p>\n                    </div>\n                    <div class="tab-pane fade active in" id="signin">\n                        <div class="container">\n                            <form class="form-horizontal" id="form_signin">\n                                <fieldset>\n\n                                    <div class="form-group">\n                                        <label class="col-sm-2 control-label" for="signin_email">E-Mail</label>\n\n                                        <div class="col-sm-10">\n                                            <input name="email" id="signin_email" type="email" placeholder=""\n                                                   class="form-control" required="">\n                                        </div>\n                                </div>\n\n                                    <div class="form-group">\n                                        <label class="col-sm-2 control-label" for="signin_password">Password</label>\n\n                                        <div class="col-sm-10">\n                                            <input name="password" id="signin_password" type="password"\n                                                   placeholder="**************" class="form-control" required="">\n                                            <span class="help-block" style="display: none;"></span>\n                                        </div>\n                                </div>\n\n                                    <div class="form-group">\n                                        <div class="col-sm-offset-2 col-sm-10">\n                                            <button id="btn_signin" name="btn_signin" class="btn btn-primary">Sign In\n                                            </button>\n                                        </div>\n                                </div>\n\n                                </fieldset>\n                        </form>\n                        </div>\n                    </div>\n                    <div class="tab-pane fade" id="signup">\n                        <div class="container">\n                            <form class="form-horizontal" id="form_signup">\n                                <fieldset>\n                                    <div class="form-group">\n                                        <label class="col-sm-2 control-label" for="signup_email">E-Mail</label>\n\n                                        <div class="col-sm-10">\n                                            <input id="signup_email" name="email" type="email" placeholder=""\n                                                   class="form-control" required="">\n                                            <span class="help-block" style="display: none;"></span>\n                                        </div>\n                                    </div>\n\n                                    <div class="form-group">\n                                        <label class="col-sm-2 control-label" for="signup_username">Username</label>\n\n                                        <div class="col-sm-10">\n                                            <input id="signup_username" name="username" type="text" placeholder=""\n                                                   class="form-control" required="">\n                                            <span class="help-block" style="display: none;"></span>\n                                        </div>\n                                    </div>\n\n                                    <div class="form-group">\n                                        <label class="col-sm-2 control-label" for="signup_password">Password</label>\n\n                                        <div class="col-sm-10">\n                                            <input id="signup_password" name="password" type="password"\n                                                   placeholder="**************" class="form-control" required="">\n                                        </div>\n                                    </div>\n\n                                    <div class="form-group">\n                                        <label class="col-sm-2 control-label" for="signup_password_repeat"></label>\n\n                                        <div class="col-sm-10">\n                                            <input id="signup_password_repeat" name="password_repeat" type="password"\n                                                   placeholder="**************" class="form-control" required="">\n                                            <span class="help-block" style="display: none;"></span>\n                                        </div>\n                                    </div>\n\n                                    <div class="form-group">\n                                        <label class="col-sm-2 control-label" for="signup_username">Website</label>\n\n                                        <div class="col-sm-10">\n                                            <input id="signup_homepage" name="homepage" type="url" placeholder=""\n                                                   class="form-control">\n                                        </div>\n                                    </div>\n\n                                    <div class="form-group">\n                                        <div class="col-sm-offset-2 col-sm-10">\n                                            <button id="btn_signup" name="btn_signup" class="btn btn-primary">Sign Up\n                                            </button>\n                                        </div>\n                                    </div>\n\n                                </fieldset>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <center>\n                    <button type="button" class="btn btn-default" id="closebutton">Close</button>\n                </center>\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/SignInView",["jquery","underscore","Framework","text!templates/signin.html","app","models/User","md5"],function(e,t,i,n,r,a,s){var o=i.View.extend({default_texts:{signin_password:"This email/password combination does not exist.",signup_email:"This e-mail address is invalid.",signup_username:"This username is already taken.",signup_password_repeat:"These passwords do not match."},render:function(){var i=this;this.$el.html(t.template(n,{})),this.$("#user_modal").on("shown.bs.modal",function(){i.$("#link_signin").tab("show"),i.$("#signin_email").focus()}),this.listenTo(r.session,"change:logged_in",function(){e("#user_modal").modal("hide")}),this.$("#user_modal").on("hidden.bs.modal",function(){i.remove()}),this.$("#link_signin").on("shown.bs.tab",function(e){i.$("#form_"+e.target.id.substr(5)).find("input:first").focus()}),this.$("#user_modal").modal("show")},events:{"click #btn_signup":"onSignUpBtnClick","click #btn_signin":"onSignInBtnClick","click #closebutton":"closeModal"},onSignUpBtnClick:function(i){i.preventDefault();var n=this,o=e("#form_signup");if(this.validateForm(o)){var l=this.getFormData(o);if(l.password!=l.password_repeat)return n.markValid(!1,"signup_password"),n.markValid(!1,"signup_password_repeat"),!1;var c=new a;l.password=s.MD5(l.password).toString(),c.save(t.pick(l,"username","email","password","homepage"),{success:function(){console.log("signup succeeded"),r.session.login(t.pick(l,"email","password"))},error:function(e,t){switch(console.log("error catched"),t){case"USER_EMAIL_NOT_VALID":n.markValid(!1,"signup_email","This email address does not exist.");break;case"USER_EMAIL_ALREADY_EXISTS":n.markValid(!1,"signup_email","An account with this email address does already exist.");break;case"USER_NAME_ALREADY_EXISTS":n.markValid(!1,"signup_username","This username is already taken.");break;default:console.error("unhandled error from backend")}}})}return!1},onSignInBtnClick:function(t){t.preventDefault();var i=this,n=e("#form_signin");if(this.validateForm(n)){var a=this.getFormData(n);return a.password=s.MD5(a.password).toString(),r.session.login(a,{error:function(e,t){switch(t){case"SIGNIN_USER_NOT_FOUND":case"SIGNIN_CREDENTIALS_INCORRECT":i.markValid(!1,"signin_email"),i.markValid(!1,"signin_password");break;default:console.error("unhandled error from backend: "+t)}}}),!1}},markValid:function(e,t,i){var n=this.$("input#"+t),r=n.closest(".form-group");r.removeClass(e?"has-error":"has-success"),e||r.addClass("has-error");var a=n.siblings(".help-block").first();a&&(a[e?"hide":"show"](),a.html(i||this.default_texts[t]))},validateForm:function(t){var i=!0,n=this;return t.find("input").each(function(){var t=this.checkValidity();n.markValid(t,e(this).attr("id")),i=i&&t}),i},getFormData:function(t){var i={},n=t.serializeArray();return e.each(n,function(){void 0!==i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""}),i},closeModal:function(){e("#user_modal").modal("hide")}});return o}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var r=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){function t(t){return this.each(function(){var i=e(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof t&&r[t].call(i)})}var i='[data-dismiss="alert"]',n=function(t){e(t).on("click",i,this.close)};n.VERSION="3.2.0",n.prototype.close=function(t){function i(){a.detach().trigger("closed.bs.alert").remove()}var n=e(this),r=n.attr("data-target");r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var a=e(r);t&&t.preventDefault(),a.length||(a=n.hasClass("alert")?n:n.parent()),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(150):i())};var r=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),r=n.data("bs.button"),a="object"==typeof t&&t;r||n.data("bs.button",r=new i(this,a)),"toggle"==t?r.toggle():t&&r.setState(t)})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,r=n.is("input")?"val":"html",a=n.data();t+="Text",null==a.resetText&&n.data("resetText",n[r]()),n[r](null==a[t]?this.options[t]:a[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=e(i.target);n.hasClass("btn")||(n=n.closest(".btn")),t.call(n,"toggle"),i.preventDefault()})}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),r=n.data("bs.carousel"),a=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),s="string"==typeof t?t:a.slide;r||n.data("bs.carousel",r=new i(this,a)),"number"==typeof t?r.to(t):s?r[s]():a.interval&&r.pause().cycle()})}var i=function(t,i){this.$element=e(t).on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.2.0",i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.to=function(t){var i=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(t,i){var n=this.$element.find(".item.active"),r=i||n[t](),a=this.interval,s="next"==t?"left":"right",o="next"==t?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[o]()}if(r.hasClass("active"))return this.sliding=!1;var c=r[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=e(this.$indicators.children()[this.getItemIndex(r)]);p&&p.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(r.addClass(t),r[0].offsetWidth,n.addClass(s),r.addClass(s),n.one("bsTransitionEnd",function(){r.removeClass([t,s].join(" ")).addClass("active"),n.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(d)),a&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(i){var n,r=e(this),a=e(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var s=e.extend({},a.data(),r.data()),o=r.attr("data-slide-to");o&&(s.interval=!1),t.call(a,s),o&&a.data("bs.carousel").to(o),i.preventDefault()}}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),r=n.data("bs.collapse"),a=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!r&&a.toggle&&"show"==t&&(t=!t),r||n.data("bs.collapse",r=new i(this,a)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=e.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;t.call(n,"hide"),r||n.data("bs.collapse",null)}var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0),this.transitioning=1;
var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var o=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(350)[a](this.$element[0][o])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=t,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var n,r=e(this),a=r.attr("data-target")||i.preventDefault()||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(a),o=s.data("bs.collapse"),l=o?"toggle":r.data(),c=r.attr("data-parent"),u=c&&e(c);o&&o.transitioning||(u&&u.find('[data-toggle="collapse"][data-parent="'+c+'"]').not(r).addClass("collapsed"),r[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),t.call(s,l)})}(jQuery),+function(e){function t(t){t&&3===t.which||(e(r).remove(),e(a).each(function(){var n=i(e(this)),r={relatedTarget:this};n.hasClass("open")&&(n.trigger(t=e.Event("hide.bs.dropdown",r)),t.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",r))}))}function i(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function n(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof t&&n[t].call(i)})}var r=".dropdown-backdrop",a='[data-toggle="dropdown"]',s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.VERSION="3.2.0",s.prototype.toggle=function(n){var r=e(this);if(!r.is(".disabled, :disabled")){var a=i(r),s=a.hasClass("open");if(t(),!s){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var o={relatedTarget:this};if(a.trigger(n=e.Event("show.bs.dropdown",o)),n.isDefaultPrevented())return;r.trigger("focus"),a.toggleClass("open").trigger("shown.bs.dropdown",o)}return!1}},s.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var n=e(this);if(t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled")){var r=i(n),s=r.hasClass("open");if(!s||s&&27==t.keyCode)return 27==t.which&&r.find(a).trigger("focus"),n.trigger("click");var o=" li:not(.divider):visible a",l=r.find('[role="menu"]'+o+', [role="listbox"]'+o);if(l.length){var c=l.index(l.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var o=e.fn.dropdown;e.fn.dropdown=n,e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,s.prototype.toggle).on("keydown.bs.dropdown.data-api",a+', [role="menu"], [role="listbox"]',s.prototype.keydown)}(jQuery),+function(e){function t(t,n){return this.each(function(){var r=e(this),a=r.data("bs.modal"),s=e.extend({},i.DEFAULTS,r.data(),"object"==typeof t&&t);a||r.data("bs.modal",a=new i(this,s)),"string"==typeof t?a[t](n):s.show&&a.show(n)})}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.2.0",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var i=this,n=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var n=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:t});n?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(r)}))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(150):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(150):a()}else t&&t()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=e(this),r=n.attr("href"),a=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},a.data(),n.data());n.is("a")&&i.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),t.call(a,s,this)})}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),r=n.data("bs.tooltip"),a="object"==typeof t&&t;(r||"destroy"!=t)&&(r||n.data("bs.tooltip",r=new i(this,a)),"string"==typeof t&&r[t]())})}var i=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(t,i,n){this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var r=this.options.trigger.split(" "),a=r.length;a--;){var s=r[a];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){var o="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},i.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},i.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(document.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var n=this,r=this.tip(),a=this.getUID(this.type);this.setContent(),r.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,l=o.test(s);l&&(s=s.replace(o,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var c=this.getPosition(),u=r[0].offsetWidth,p=r[0].offsetHeight;if(l){var d=s,h=this.$element.parent(),f=this.getPosition(h);s="bottom"==s&&c.top+c.height+p-f.scroll>f.height?"top":"top"==s&&c.top-f.scroll-p<0?"bottom":"right"==s&&c.right+u>f.width?"left":"left"==s&&c.left-u<f.left?"right":s,r.removeClass(d).addClass(s)}var m=this.getCalculatedOffset(s,c,u,p);this.applyPlacement(m,s);var y=function(){n.$element.trigger("shown.bs."+n.type),n.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",y).emulateTransitionEnd(150):y()}},i.prototype.applyPlacement=function(t,i){var n=this.tip(),r=n[0].offsetWidth,a=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),o=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(o)&&(o=0),t.top=t.top+s,t.left=t.left+o,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=a&&(t.top=t.top+a-c);var u=this.getViewportAdjustedDelta(i,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var p=u.left?2*u.left-r+l:2*u.top-a+c,d=u.left?"left":"top",h=u.left?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(p,n[0][h],d)},i.prototype.replaceArrow=function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function t(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),r=e.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(r),r.isDefaultPrevented()?void 0:(n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName;return e.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:n?e(window).width():t.outerWidth(),height:n?e(window).height():t.outerHeight()},n?{top:0,left:0}:t.offset())},i.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var a=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(e)){var o=t.top-a-s.scroll,l=t.top+a-s.scroll+n;o<s.top?r.top=s.top-o:l>s.top+s.height&&(r.top=s.top+s.height-l)}else{var c=t.left-a,u=t.left+a+i;c<s.left?r.left=s.left-c:u>s.width&&(r.left=s.left+s.width-u)}return r},i.prototype.getTitle=function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},i.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},i.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(t){var i=this;t&&(i=e(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=i,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),r=n.data("bs.popover"),a="object"==typeof t&&t;(r||"destroy"!=t)&&(r||n.data("bs.popover",r=new i(this,a)),"string"==typeof t&&r[t]())})}var i=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.2.0",i.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=i,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){function t(i,n){var r=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(e(i).is("body")?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",r),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),r=n.data("bs.scrollspy"),a="object"==typeof i&&i;r||n.data("bs.scrollspy",r=new t(this,a)),"string"==typeof i&&r[i]()})}t.VERSION="3.2.0",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t="offset",i=0;e.isWindow(this.$scrollElement[0])||(t="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=e(this),r=n.data("target")||n.attr("href"),a=/^#./.test(r)&&e(r);return a&&a.length&&a.is(":visible")&&[[a[t]().top+i,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,a=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return s!=(e=a[a.length-1])&&this.activate(e);if(s&&t<=r[0])return s!=(e=a[0])&&this.activate(e);for(e=r.length;e--;)s!=a[e]&&t>=r[e]&&(!r[e+1]||t<=r[e+1])&&this.activate(a[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),r=n.data("bs.tab");r||n.data("bs.tab",r=new i(this)),"string"==typeof t&&r[t]()})}var i=function(t){this.element=e(t)};i.VERSION="3.2.0",i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=i.find(".active:last a")[0],a=e.Event("show.bs.tab",{relatedTarget:r});if(t.trigger(a),!a.isDefaultPrevented()){var s=e(n);this.activate(t.closest("li"),i),this.activate(s,s.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},i.prototype.activate=function(t,i,n){function r(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var a=i.find("> .active"),s=n&&e.support.transition&&a.hasClass("fade");s?a.one("bsTransitionEnd",r).emulateTransitionEnd(150):r(),a.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(i){i.preventDefault(),t.call(e(this),"show")})}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),r=n.data("bs.affix"),a="object"==typeof t&&t;r||n.data("bs.affix",r=new i(this,a)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.2.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=e(document).height(),n=this.$target.scrollTop(),r=this.$element.offset(),a=this.options.offset,s=a.top,o=a.bottom;"object"!=typeof a&&(o=s=a),"function"==typeof s&&(s=a.top(this.$element)),"function"==typeof o&&(o=a.bottom(this.$element));var l=null!=this.unpin&&n+this.unpin<=r.top?!1:null!=o&&r.top+this.$element.height()>=t-o?"bottom":null!=s&&s>=n?"top":!1;if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),u=e.Event(c+".bs.affix");this.$element.trigger(u),u.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(c).trigger(e.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:t-this.$element.height()-o}))}}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var i=e(this),n=i.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)})})}(jQuery),define("lib/bootstrap",["jquery"],function(e){return function(){var t;return t||e.$.fn.popover}}(this)),define("views/SignInMenuButtonView",["jquery","underscore","Framework","views/SignInView","app","lib/bootstrap"],function(e,t,i,n,r){var a=i.View.extend({tagName:"li",render:function(){this.$el.html('<button class="btn btn-primary navbar-btn" id="btn_showsigninmodal">Sign in</button>')},events:{"click #btn_showsigninmodal":"clickedSignInButton"},clickedSignInButton:function(){console.log("clicked signinbutton"),r.session.get("logged_in")||r.getMainView().openSignInModal()}});return a}),define("text!templates/UserMenuButton.html",[],function(){return'<a href="#" class="dropdown-toggle" data-toggle="dropdown">You <span class="caret"></span></a>\n<ul class="dropdown-menu" role="menu">\n    <li class="disabled"><a href="#" id="item_user"><b><%= username %></b><br>\n        <small style="display: block;">Show Profile</small>\n    </a></li>\n    <li class="divider"></li>\n    <li><a href="#" id="item_logout">Logout</a></li>\n    <li class="disabled"><a href="#" id="item_settings">Settings</a></li>\n</ul>\n</div>'}),define("views/UserMenuButtonView",["jquery","underscore","Framework","app","text!templates/UserMenuButton.html","lib/bootstrap"],function(e,t,i,n,r){var a=i.View.extend({tagName:"li",className:"dropdown",render:function(){var e=n.session.get("user");this.$el.html(t.template(r,e.toJSON()))},events:{"click #item_logout":"logout"},logout:function(){n.session.logout()}});return a}),define("framework/ExchangeableContent",["underscore"],function(e){var t=function(){var t={},i=null,n=null,r=null,a="content",s=!1;e.extend(this,{configureExchangableContents:function(e){var t=e||{};r=t.callback_after,n=t.callback_before,a=t.className,"undefined"!=typeof t.contentsareinstances&&(s=t.contentsareinstances)},addContent:function(e,i){t[e]=i},addContents:function(i){e.extend(t,i)},setContent:function(e,t){if(n){var o=n(e,t);o&&(e=o)}null!==i&&i.close(),i=s?new this.getContent(e):this.getContent(e);var l=this.$("."+a).first();i.render.apply(i,t),l.html(i.el),s&&i.delegateEvents(),r&&r()},getContent:function(e){return t[e]||t[e+"view"]},deleteContent:function(e){var i=this.getContent(e);"undefined"!=typeof i&&(i.close(),t[e]=void 0)},getCurrentContent:function(){return i}})};return t}),define("views/MenuView",["jquery","underscore","Framework","text!templates/menu.html","views/SignInMenuButtonView","views/UserMenuButtonView","app","framework/ExchangeableContent","lib/bootstrap"],function(e,t,i,n,r,a,s,o){var l=i.View.extend(t.extend(new o,{initialize:function(){this.configureExchangableContents({className:"usermenucontainer",contentsareinstances:!0}),this.addContents({nosession:new r,session:new a})},render:function(){var e=t.template(n,{});return this.$el.html(e),this.changeLoggedInState(s.session),this.listenTo(i.history,"route",this.updateMenuState.bind(this)),this.listenTo(s.session,"change:logged_in",this.changeLoggedInState.bind(this)),this},menustates:{createlevel:"levelbuilder",editlevel:"levelbuilder",buildlevel:"levelbuilder"},events:{"click .navbar-collapse ul li a:not(.dropdown-toggle)":"changeMenuVisibility"},changeMenuVisibility:function(){this.$(".navbar-toggle:visible").click()},changeLoggedInState:function(e){e.get("logged_in")?this.setContent("session"):this.setContent("nosession",["navbar-btn"])},updateMenuState:function(t,i){var n=e(".active");null!==n&&n.removeClass("active");var r=e("#"+(this.menustates[i]||i));null!==r&&r.addClass("active")}}));return l}),define("text!templates/home.html",[],function(){return'<div class="container">\n    <!-- Main jumbotron for a primary marketing message or call to action -->\n    <div class="jumbotron">\n        <div class="container">\n            <h1>TouchTheBeat</h1>\n\n            <p>TouchTheBeat is a HTML5 multi-touch music game currently <strong>in development</strong>. </p>\n\n            <p><a href="#/chooselevel" class="btn btn-primary btn-lg">Try TouchTheBeat &raquo;</a></p>\n        </div>\n    </div>\n\n    <!-- Example row of columns -->\n    <div class="row">\n        <div class="col-lg-4">\n            <h2>The Game</h2>\n\n            <p>TouchTheBeat is <strong>level-based</strong>. Each level consists of a song and a composition of\n                interactive objects. The objects can be either tapped,\n                <del>hold, dragged or slided</del>\n                <i> (soon)</i>. The more <strong>rhythmically accurate</strong> you interact with the objects, the more\n                points you get in the end.\n            </p>\n\n        </div>\n        <div class="col-lg-4">\n            <h2 id="debug">The Level-Builder</h2>\n\n            <p>You can easily create your own levels by using any <strong>SoundCloud track</strong> as music for your\n                level. When finished, you might share and exchange your levels online in text-format. This way it is\n                easy to <strong>play levels created by others</strong>.</p>\n\n            <p><a class="btn btn-default pull-right" href="#levelbuilder">Build a level &raquo;</a></p>\n        </div>\n        <div class="col-lg-4">\n            <h2>Development</h2>\n\n            <p>TouchTheBeat is currently in active development and you are testing an <strong>early version</strong>.\n                The finished game may be completely different than the current version. I am glad about every <strong>feedback</strong>\n                you may give to me. You can give feedback by pressing the button below.</p>\n\n            <p><a class="btn btn-default pull-right" href="//twitter.com/intent/tweet?text=.@TouchTheBeat "\n                  target="_blank">Give Feedback</a></p>\n        </div>\n\n    </div>\n</div>\n'}),define("views/HomeView",["jquery","underscore","Framework","text!templates/home.html"],function(e,t,i,n){var r=i.View.extend({render:function(){var e=t.template(n,{});this.$el.html(e)}});return r}),define("text!templates/leveloverview.html",[],function(){return'<div class="container">\n    <h1>Level Overview</h1>\n    <hr/>\n\n    <div class="row" id="levelcollection_container">\n\n    </div>\n\n    <!--\n    <hr/>\n    <p>\n        TouchTheBeat lets you create your own levels, too. To start a level you or someone else has created, copy\n        the level-text into the input-field below.\n    </p>\n\n    <div class="alert alert-fatal alert-danger" id="alert_invalidlevel" style="display:none;">\n        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n        <div id="alert_tinvalidlevel_text"><strong>Oh snap!</strong> TouchTheBeat could not parse your leveltext.\n            You\n            might want to <a href="#buildlevel" class="alert-link">create a new level</a>...\n        </div>\n\n    </div>\n\n    <p id="manualinputcontainer">\n    </p>\n    -->\n</div>\n'}),define("text!templates/components/levelpanel.html",[],function(){return'<h4 class="list-group-item-heading"><%- name %></h4>\n<p class="list-group-item-text">\n<dl class="dl-horizontal">\n    <dt>Author</dt>\n    <dd><%- owner.username %></dd>\n    <dt>Track</dt>\n    <dd><%- audio.title %> by <%- audio.artist %></dd>\n    <dt>Duration</dt>\n    <dd><%- duration %></dd>\n</dl>\n</p>'}),define("views/LevelPanelView",["jquery","underscore","Framework","text!templates/components/levelpanel.html"],function(e,t,i,n){var r=i.View.extend({tagName:"a",initialize:function(e){this.model=e.model,this.callback=e.callback},attributes:{"class":"list-group-item",href:"#"},render:function(){var e=t.template(n,t.extend(this.model.toJSON(),{duration:this.model.getDurationString()}));return this.$el.html(e),this},events:{click:"triggerCallback"},triggerCallback:function(e){return this.callback(this.model),e.preventDefault(),e.returnValue=!1,!1}});return r}),function(e,t){"function"==typeof define&&define.amd?define("tv4",[],t):"undefined"!=typeof module&&module.exports?module.exports=t():e.tv4=t()}(this,function(){function e(t,i){if(t===i)return!0;if("object"==typeof t&&"object"==typeof i){if(Array.isArray(t)!==Array.isArray(i))return!1;if(Array.isArray(t)){if(t.length!==i.length)return!1;for(var n=0;n<t.length;n++)if(!e(t[n],i[n]))return!1}else{var r;for(r in t)if(void 0===i[r]&&void 0!==t[r])return!1;for(r in i)if(void 0===t[r]&&void 0!==i[r])return!1;for(r in t)if(!e(t[r],i[r]))return!1
}return!0}return!1}function t(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function i(e,i){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return i=t(i||""),e=t(e||""),i&&e?(i.protocol||e.protocol)+(i.protocol||i.authority?i.authority:e.authority)+n(i.protocol||i.authority||"/"===i.pathname.charAt(0)?i.pathname:i.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+i.pathname:e.pathname)+(i.protocol||i.authority||i.pathname?i.search:i.search||e.search)+i.hash:null}function n(e){return e.split("#")[0]}function r(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=i(t,e.id),e.id=t),Array.isArray(e))for(var n=0;n<e.length;n++)r(e[n],t);else{"string"==typeof e.$ref&&(e.$ref=i(t,e.$ref));for(var a in e)"enum"!==a&&r(e[a],t)}}function a(e,t,i,n,r){if(Error.call(this),void 0===e)throw new Error("No code supplied for error: "+t);this.message=t,this.code=e,this.dataPath=i||"",this.schemaPath=n||"",this.subErrors=r||null;var a=new Error(this.message);if(this.stack=a.stack||a.stacktrace,!this.stack)try{throw a}catch(a){this.stack=a.stack||a.stacktrace}}function s(e,t){if(t.substring(0,e.length)===e){var i=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===i.charAt(0)||"?"===i.charAt(0))return!0}return!1}function o(e){var t=new l,a=e||"en",s={addFormat:function(){t.addFormat.apply(t,arguments)},language:function(e){return e?(h[e]||(e=e.split("-")[0]),h[e]?(a=e,e):!1):a},addLanguage:function(e,t){var i;for(i in c)t[i]&&!t[c[i]]&&(t[c[i]]=t[i]);var n=e.split("-")[0];if(h[n]){h[e]=Object.create(h[n]);for(i in t)"undefined"==typeof h[n][i]&&(h[n][i]=t[i]),h[e][i]=t[i]}else h[e]=t,h[n]=t;return this},freshApi:function(e){var t=o();return e&&t.language(e),t},validate:function(e,i,n,r){var s=new l(t,!1,h[a],n,r);"string"==typeof i&&(i={$ref:i}),s.addSchema("",i);var o=s.validateAll(e,i,null,null,"");return!o&&r&&(o=s.banUnknownProperties()),this.error=o,this.missing=s.missing,this.valid=null===o,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,i,n,r){var s=new l(t,!0,h[a],n,r);"string"==typeof i&&(i={$ref:i}),s.addSchema("",i),s.validateAll(e,i,null,null,""),r&&s.banUnknownProperties();var o={};return o.errors=s.errors,o.missing=s.missing,o.valid=0===o.errors.length,o},addSchema:function(){return t.addSchema.apply(t,arguments)},getSchema:function(){return t.getSchema.apply(t,arguments)},getSchemaMap:function(){return t.getSchemaMap.apply(t,arguments)},getSchemaUris:function(){return t.getSchemaUris.apply(t,arguments)},getMissingUris:function(){return t.getMissingUris.apply(t,arguments)},dropSchemas:function(){t.dropSchemas.apply(t,arguments)},defineKeyword:function(){t.defineKeyword.apply(t,arguments)},defineError:function(e,t,i){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||1e4>t)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof c[e])throw new Error("Error already defined: "+e+" as "+c[e]);if("undefined"!=typeof u[t])throw new Error("Error code already used: "+u[t]+" as "+t);c[e]=t,u[t]=e,d[e]=d[t]=i;for(var n in h){var r=h[n];r[e]&&(r[t]=r[t]||r[e])}},reset:function(){t.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:r,resolveUrl:i,getDocumentUri:n,errorCodes:c};return s}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(r){if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError("Object.keys called on non-object");var a=[];for(var s in r)e.call(r,s)&&a.push(s);if(t)for(var o=0;n>o;o++)e.call(r,i[o])&&a.push(i[o]);return a}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var r=n>=0?n:Math.max(i-Math.abs(n),0);i>r;r++)if(r in t&&t[r]===e)return r;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(i){return!0}});var l=function(e,t,i,n,r){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),r&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=i,this.definedKeywords={},e)for(var a in e.definedKeywords)this.definedKeywords[a]=e.definedKeywords[a].slice(0)};l.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},l.prototype.createError=function(e,t,i,n,r){var s=this.errorMessages[e]||d[e];if("string"!=typeof s)return new a(e,"Unknown error code "+e+": "+JSON.stringify(t),i,n,r);var o=s.replace(/\{([^{}]*)\}/g,function(e,i){var n=t[i];return"string"==typeof n||"number"==typeof n?n:e});return new a(e,o,i,n,r)},l.prototype.returnError=function(e){return e},l.prototype.collectError=function(e){return e&&this.errors.push(e),null},l.prototype.prefixErrors=function(e,t,i){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,i);return this},l.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(c.UNKNOWN_PROPERTY,{path:e},e,""),i=this.handleError(t);if(i)return i}return null},l.prototype.addFormat=function(e,t){if("object"==typeof e){for(var i in e)this.addFormat(i,e[i]);return this}this.formatValidators[e]=t},l.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(c.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},l.prototype.getSchema=function(e,t){var i;if(void 0!==this.schemas[e])return i=this.schemas[e],this.resolveRefs(i,t);var n=e,r="";if(-1!==e.indexOf("#")&&(r=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[n]){i=this.schemas[n];var a=decodeURIComponent(r);if(""===a)return this.resolveRefs(i,t);if("/"!==a.charAt(0))return void 0;for(var s=a.split("/").slice(1),o=0;o<s.length;o++){var l=s[o].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===i[l]){i=void 0;break}i=i[l]}if(void 0!==i)return this.resolveRefs(i,t)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},l.prototype.searchSchemas=function(e,t){if(e&&"object"==typeof e){"string"==typeof e.id&&s(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var i in e)if("enum"!==i)if("object"==typeof e[i])this.searchSchemas(e[i],t);else if("$ref"===i){var r=n(e[i]);r&&void 0===this.schemas[r]&&void 0===this.missingMap[r]&&(this.missingMap[r]=r)}}},l.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}e===n(e)+"#"&&(e=n(e)),this.schemas[e]=t,delete this.missingMap[e],r(t,e),this.searchSchemas(t,e)},l.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},l.prototype.getSchemaUris=function(e){var t=[];for(var i in this.schemas)(!e||e.test(i))&&t.push(i);return t},l.prototype.getMissingUris=function(e){var t=[];for(var i in this.missingMap)(!e||e.test(i))&&t.push(i);return t},l.prototype.dropSchemas=function(){this.schemas={},this.reset()},l.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},l.prototype.validateAll=function(e,t,i,n,r){var s;if(t=this.resolveRefs(t),!t)return null;if(t instanceof a)return this.errors.push(t),t;var o,l=this.errors.length,c=null,u=null;if(this.checkRecursive&&e&&"object"==typeof e){if(s=!this.scanned.length,e[this.validatedSchemasKey]){var p=e[this.validatedSchemasKey].indexOf(t);if(-1!==p)return this.errors=this.errors.concat(e[this.validationErrorsKey][p]),null}if(Object.isFrozen(e)&&(o=this.scannedFrozen.indexOf(e),-1!==o)){var d=this.scannedFrozenSchemas[o].indexOf(t);if(-1!==d)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[o][d]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===o&&(o=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),c=this.scannedFrozenSchemas[o].length,this.scannedFrozenSchemas[o][c]=t,this.scannedFrozenValidationErrors[o][c]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(h){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}u=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][u]=t,e[this.validationErrorsKey][u]=[]}}var f=this.errors.length,m=this.validateBasic(e,t,r)||this.validateNumeric(e,t,r)||this.validateString(e,t,r)||this.validateArray(e,t,r)||this.validateObject(e,t,r)||this.validateCombinations(e,t,r)||this.validateFormat(e,t,r)||this.validateDefinedKeywords(e,t,r)||null;if(s){for(;this.scanned.length;){var y=this.scanned.pop();delete y[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(m||f!==this.errors.length)for(;i&&i.length||n&&n.length;){var g=i&&i.length?""+i.pop():null,v=n&&n.length?""+n.pop():null;m&&(m=m.prefixWith(g,v)),this.prefixErrors(f,g,v)}return null!==c?this.scannedFrozenValidationErrors[o][c]=this.errors.slice(l):null!==u&&(e[this.validationErrorsKey][u]=this.errors.slice(l)),this.handleError(m)},l.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var i=this.formatValidators[t.format].call(null,e,t);return"string"==typeof i||"number"==typeof i?this.createError(c.FORMAT_CUSTOM,{message:i}).prefixWith(null,"format"):i&&"object"==typeof i?this.createError(c.FORMAT_CUSTOM,{message:i.message||"?"},i.dataPath||null,i.schemaPath||"/format"):null},l.prototype.validateDefinedKeywords=function(e,t){for(var i in this.definedKeywords)if("undefined"!=typeof t[i])for(var n=this.definedKeywords[i],r=0;r<n.length;r++){var a=n[r],s=a(e,t[i],t);if("string"==typeof s||"number"==typeof s)return this.createError(c.KEYWORD_CUSTOM,{key:i,message:s}).prefixWith(null,"format");if(s&&"object"==typeof s){var o=s.code||c.KEYWORD_CUSTOM;if("string"==typeof o){if(!c[o])throw new Error("Undefined error code (use defineError): "+o);o=c[o]}var l="object"==typeof s.message?s.message:{key:i,message:s.message||"?"},u=s.schemaPath||"/"+i.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(o,l,s.dataPath||null,u)}}return null},l.prototype.validateBasic=function(e,t,i){var n;return(n=this.validateType(e,t,i))?n.prefixWith(null,"type"):(n=this.validateEnum(e,t,i))?n.prefixWith(null,"type"):null},l.prototype.validateType=function(e,t){if(void 0===t.type)return null;var i=typeof e;null===e?i="null":Array.isArray(e)&&(i="array");var n=t.type;"object"!=typeof n&&(n=[n]);for(var r=0;r<n.length;r++){var a=n[r];if(a===i||"integer"===a&&"number"===i&&e%1===0)return null}return this.createError(c.INVALID_TYPE,{type:i,expected:n.join("/")})},l.prototype.validateEnum=function(t,i){if(void 0===i["enum"])return null;for(var n=0;n<i["enum"].length;n++){var r=i["enum"][n];if(e(t,r))return null}return this.createError(c.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(t):t})},l.prototype.validateNumeric=function(e,t,i){return this.validateMultipleOf(e,t,i)||this.validateMinMax(e,t,i)||null},l.prototype.validateMultipleOf=function(e,t){var i=t.multipleOf||t.divisibleBy;return void 0===i?null:"number"==typeof e&&e%i!==0?this.createError(c.NUMBER_MULTIPLE_OF,{value:e,multipleOf:i}):null},l.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(c.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(c.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(c.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(c.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null},l.prototype.validateString=function(e,t,i){return this.validateStringLength(e,t,i)||this.validateStringPattern(e,t,i)||null},l.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(c.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(c.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null},l.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||void 0===t.pattern)return null;var i=new RegExp(t.pattern);return i.test(e)?null:this.createError(c.STRING_PATTERN,{pattern:t.pattern}).prefixWith(null,"pattern")},l.prototype.validateArray=function(e,t,i){return Array.isArray(e)?this.validateArrayLength(e,t,i)||this.validateArrayUniqueItems(e,t,i)||this.validateArrayItems(e,t,i)||null:null},l.prototype.validateArrayLength=function(e,t){var i;return void 0!==t.minItems&&e.length<t.minItems&&(i=this.createError(c.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(i))?i:void 0!==t.maxItems&&e.length>t.maxItems&&(i=this.createError(c.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(i))?i:null},l.prototype.validateArrayUniqueItems=function(t,i){if(i.uniqueItems)for(var n=0;n<t.length;n++)for(var r=n+1;r<t.length;r++)if(e(t[n],t[r])){var a=this.createError(c.ARRAY_UNIQUE,{match1:n,match2:r}).prefixWith(null,"uniqueItems");if(this.handleError(a))return a}return null},l.prototype.validateArrayItems=function(e,t,i){if(void 0===t.items)return null;var n,r;if(Array.isArray(t.items)){for(r=0;r<e.length;r++)if(r<t.items.length){if(n=this.validateAll(e[r],t.items[r],[r],["items",r],i+"/"+r))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(c.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+r,"additionalItems"),this.handleError(n)))return n}else if(n=this.validateAll(e[r],t.additionalItems,[r],["additionalItems"],i+"/"+r))return n}else for(r=0;r<e.length;r++)if(n=this.validateAll(e[r],t.items,[r],["items"],i+"/"+r))return n;return null},l.prototype.validateObject=function(e,t,i){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,i)||this.validateObjectRequiredProperties(e,t,i)||this.validateObjectProperties(e,t,i)||this.validateObjectDependencies(e,t,i)||null},l.prototype.validateObjectMinMaxProperties=function(e,t){var i,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(i=this.createError(c.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(i))?i:void 0!==t.maxProperties&&n.length>t.maxProperties&&(i=this.createError(c.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(i))?i:null},l.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var i=0;i<t.required.length;i++){var n=t.required[i];if(void 0===e[n]){var r=this.createError(c.OBJECT_REQUIRED,{key:n}).prefixWith(null,""+i).prefixWith(null,"required");if(this.handleError(r))return r}}return null},l.prototype.validateObjectProperties=function(e,t,i){var n;for(var r in e){var a=i+"/"+r.replace(/~/g,"~0").replace(/\//g,"~1"),s=!1;if(void 0!==t.properties&&void 0!==t.properties[r]&&(s=!0,n=this.validateAll(e[r],t.properties[r],[r],["properties",r],a)))return n;if(void 0!==t.patternProperties)for(var o in t.patternProperties){var l=new RegExp(o);if(l.test(r)&&(s=!0,n=this.validateAll(e[r],t.patternProperties[o],[r],["patternProperties",o],a)))return n}if(s)this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(c.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(r,"additionalProperties"),this.handleError(n)))return n}else if(n=this.validateAll(e[r],t.additionalProperties,[r],["additionalProperties"],a))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[a]&&(this.unknownPropertyPaths[a]=!0)}return null},l.prototype.validateObjectDependencies=function(e,t,i){var n;if(void 0!==t.dependencies)for(var r in t.dependencies)if(void 0!==e[r]){var a=t.dependencies[r];if("string"==typeof a){if(void 0===e[a]&&(n=this.createError(c.OBJECT_DEPENDENCY_KEY,{key:r,missing:a}).prefixWith(null,r).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(a))for(var s=0;s<a.length;s++){var o=a[s];if(void 0===e[o]&&(n=this.createError(c.OBJECT_DEPENDENCY_KEY,{key:r,missing:o}).prefixWith(null,""+s).prefixWith(null,r).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,a,[],["dependencies",r],i))return n}return null},l.prototype.validateCombinations=function(e,t,i){return this.validateAllOf(e,t,i)||this.validateAnyOf(e,t,i)||this.validateOneOf(e,t,i)||this.validateNot(e,t,i)||null},l.prototype.validateAllOf=function(e,t,i){if(void 0===t.allOf)return null;for(var n,r=0;r<t.allOf.length;r++){var a=t.allOf[r];if(n=this.validateAll(e,a,[],["allOf",r],i))return n}return null},l.prototype.validateAnyOf=function(e,t,i){if(void 0===t.anyOf)return null;var n,r,a=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,r=this.knownPropertyPaths);for(var o=!0,l=0;l<t.anyOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.anyOf[l],p=this.errors.length,d=this.validateAll(e,u,[],["anyOf",l],i);if(null===d&&p===this.errors.length){if(this.errors=this.errors.slice(0,s),this.trackUnknownProperties){for(var h in this.knownPropertyPaths)r[h]=!0,delete n[h];for(var f in this.unknownPropertyPaths)r[f]||(n[f]=!0);o=!1;continue}return null}d&&a.push(d.prefixWith(null,""+l).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=r),o?(a=a.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(c.ANY_OF_MISSING,{},"","/anyOf",a)):void 0},l.prototype.validateOneOf=function(e,t,i){if(void 0===t.oneOf)return null;var n,r,a=null,s=[],o=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,r=this.knownPropertyPaths);for(var l=0;l<t.oneOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.oneOf[l],p=this.errors.length,d=this.validateAll(e,u,[],["oneOf",l],i);if(null===d&&p===this.errors.length){if(null!==a)return this.errors=this.errors.slice(0,o),this.createError(c.ONE_OF_MULTIPLE,{index1:a,index2:l},"","/oneOf");if(a=l,this.trackUnknownProperties){for(var h in this.knownPropertyPaths)r[h]=!0,delete n[h];for(var f in this.unknownPropertyPaths)r[f]||(n[f]=!0)}}else d&&s.push(d.prefixWith(null,""+l).prefixWith(null,"oneOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=r),null===a?(s=s.concat(this.errors.slice(o)),this.errors=this.errors.slice(0,o),this.createError(c.ONE_OF_MISSING,{},"","/oneOf",s)):(this.errors=this.errors.slice(0,o),null)},l.prototype.validateNot=function(e,t,i){if(void 0===t.not)return null;var n,r,a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,r=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var s=this.validateAll(e,t.not,null,null,i),o=this.errors.slice(a);return this.errors=this.errors.slice(0,a),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=r),null===s&&0===o.length?this.createError(c.NOT_PASSED,{},"","/not"):null};var c={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},u={};for(var p in c)u[c[p]]=p;var d={INVALID_TYPE:"invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a.prototype.name="ValidationError",a.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var i=0;i<this.subErrors.length;i++)this.subErrors[i].prefixWith(e,t);return this};var h={},f=o();return f.addLanguage("en-gb",d),f.tv4=f,f}),define("schema",[],function(){var e={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{id:{type:"string"},name:{type:"string"},tags:{type:"array",items:{type:"string"}},audio:{type:"object",properties:{artist:{type:"string"},title:{type:"string"},duration:{type:"number"},streamUrl:{type:"string"},permalinkUrl:{type:"string"}},required:["artist","title","duration","streamUrl","permalinkUrl"]},visuals:{type:"object"},gameObjects:{type:"array",items:[{type:"object",properties:{type:{type:"string","enum":["Tap"]},tapTime:{type:"number"},x:{type:"number"},y:{type:"number"},shape:{type:"object",properties:{type:{type:"string","enum":["circle","square_sidedown","square_edgedown","triangle_sidedown","triangle_edgedown"]},size:{type:"string","enum":["small","medium","large"]}},required:["type","size"]}},required:["type","tapTime","x","y","shape"]}],uniqueItems:!0},owner:{type:"object",properties:{id:{type:"string"},username:{type:"string"},homepage:{type:"string"}},required:["id","username"]}},required:["name","audio","gameObjects","owner"]};return e}),define("util/levelvalidator",["jquery","underscore","backbone","tv4","schema"],function(e,t,i,n,r){var a={};return a.validate=function(e){try{if(n.validate(JSON.parse(e),r))return!0;console.info("Level validation: "+n.error.message)}catch(t){console.info("Level validation: "+t.message)}return!1},a}),define("models/GameObject",["jquery","underscore","Framework"],function(e,t,i){var n=i.Model.extend({defaults:{shape:{type:"circle",size:"medium"}},initialize:function(){i.Select.Me.applyTo(this)}});return n}),define("collections/GameObjectCollection",["jquery","underscore","backbone","models/GameObject"],function(e,t,i,n){var r=i.Collection.extend({model:n,initialize:function(e){i.Select.Many.applyTo(this,e)}});return r}),define("models/Track",["jquery","underscore","Framework"],function(e,t,i){var n=i.Model.extend({urlRoot:"audio/soundcloud",validate:function(e){return"url"in e&&!e.url.match(n.regex)?n.errorMessages.WRONGFORMAT:void 0},parse:function(e,t){var i=t.error;if(console.log("parsing"),"undefined"!=typeof i){if("track"!==e.kind)return void i(n.errorMessages.NOTRACK,t);if(!e.streamable)return void i(n.errorMessages.NOTSTREAMABLE,t)}return this.clear({silent:!0}),{streamUrl:e.stream_url,permalinkUrl:e.permalink_url,artist:e.user.username,title:e.title,duration:e.duration,artworkUrl:e.artwork_url,avatarUrl:e.avatar_url,artistUrl:e.user.permalink_url}},getStreamUrl:function(){return this.get("streamUrl")+"?client_id=1dfc22b8b6e9ae1fd500cf90f9065607"},getDurationString:function(){var e=this.get("duration");if(e){e=1e3*Math.round(e/1e3);var t=e%6e4/1e3;return Math.floor(e/6e4)+":"+(10>t?"0":"")+t}return"unknown"}});return n.regex=/^https?:\/\/(soundcloud.com|snd.sc)\/(.*)$/,n.errorMessages={},n.errorMessages.CONTACTIFERRORSTAYS="Please check if the url is correct, try again and contact me if the error still occurs.",n.errorMessages.SOUNDCLOUDERROR="Sorry. The track you entered could not be found. "+n.errorMessages.CONTACTIFERRORSTAYS,n.errorMessages.NOTRACK="Sorry. The URL you entered is not a valid Soundcloud-Track. "+n.errorMessages.CONTACTIFERRORSTAYS,n.errorMessages.NOTSTREAMABLE="Sorry. The track you entered is not streamable. Please select a different one.",n.errorMessages.WRONGFORMAT="Please make sure the URL has the correct format: https://soundcloud.com/user/title-of-the-track",n}),define("models/Level",["jquery","underscore","Framework","util/levelvalidator","collections/GameObjectCollection","models/Track","models/User","app"],function(e,t,i,n,r,a,s,o){var l=i.Model.extend({defaults:{gameObjects:new r,tags:[],audio:new a,name:""},urlRoot:"level",initialize:function(){this.has("owner")||(t.isUndefined(o.session)?console.warn("A level without owner was created before the session was initialized."):this.set("owner",o.session.get("user")))},getDurationString:function(){return this.get("audio").getDurationString()},parse:function(e){var t={};for(var i in e)switch(i){case"gameObjects":t.gameObjects=new r(e[i],{parse:!0});break;case"owner":t.owner=new s(e[i],{parse:!0});break;case"audio":t.audio=(new a).set(e[i]);break;default:t[i]=e[i]}return t}});return l.createFromSoundCloud=function(e){var t=new l,i=new a;return i.fetch({data:e,success:function(e){t.setSoundcloudAudio(e)},error:function(e){throw e}}),t},l}),define("levelcontainer",[],function(){return[{audio:{streamUrl:"https://api.soundcloud.com/tracks/57984848/stream",permalinkUrl:"http://soundcloud.com/dearreadermusic/03-great-white-bear",artist:"Dear Reader",title:"Great White Bear",duration:245939,artworkUrl:"https://i1.sndcdn.com/artworks-000029335022-06ag8f-large.jpg",artistUrl:"http://soundcloud.com/dearreadermusic"},gameObjects:[{type:"Tap",x:130,y:650,tapTime:7.9786666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:9.8986666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:10.837333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:11.861333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:13.269333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:13.525333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:130,y:650,tapTime:15.658666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:17.621333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:18.602666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:19.541333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:20.949333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:21.248,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:150,tapTime:23.338666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:150,tapTime:23.850666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:450,tapTime:24.413333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:450,tapTime:24.874666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:750,tapTime:25.344,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:750,tapTime:25.856,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:1050,tapTime:26.368,shape:{type:"circle",size:"medium"}},{type:"Tap",x:330,y:1050,tapTime:26.88,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:1050,tapTime:27.093333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:750,tapTime:27.306666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:450,tapTime:27.776,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:150,tapTime:28.245333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:150,tapTime:28.8,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:150,tapTime:29.013333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:450,tapTime:29.269333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:730,tapTime:29.696,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:1050,tapTime:30.165333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:150,tapTime:31.146666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:150,tapTime:31.573333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:450,tapTime:32.085333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:450,tapTime:32.554666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:750,tapTime:33.024,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:750,tapTime:33.493333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:1050,tapTime:34.005333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:330,y:1050,tapTime:34.517333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:1050,tapTime:34.730666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:750,tapTime:34.986666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:450,tapTime:35.456,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:150,tapTime:35.925333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:150,tapTime:36.394666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:150,tapTime:36.650666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:450,tapTime:36.906666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:750,tapTime:37.376,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:1050,tapTime:37.845333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:150,tapTime:38.826666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:150,tapTime:39.253333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:450,tapTime:39.765333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:450,tapTime:40.277333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:750,tapTime:40.789333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:750,tapTime:41.258666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:1050,tapTime:41.770666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:330,y:1050,tapTime:42.24,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:1050,tapTime:42.453333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:750,tapTime:42.752,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:450,tapTime:43.221333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:150,tapTime:43.690666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:150,tapTime:44.16,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:150,tapTime:44.373333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:450,tapTime:44.629333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:750,tapTime:45.098666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:1050,tapTime:45.568,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:550,tapTime:46.592,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:48.554666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:800,tapTime:50.432,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:550,tapTime:52.352,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:550,tapTime:54.314666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:56.234666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:1050,tapTime:57.216,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:57.685333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:800,tapTime:58.197333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:550,tapTime:60.117333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:130,y:650,tapTime:62.037333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:64,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:64.896,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:65.877333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:67.285333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:67.541333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:130,y:650,tapTime:69.674666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:71.637333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:72.533333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:73.557333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:75.008,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:75.221333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:77.482666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:78.890666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:80.384,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:81.365333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:82.816,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:84.224,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:85.162666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:86.613333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:88.064,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:89.045333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:90.496,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:91.946666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:92.928,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:850,tapTime:93.653333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:94.378666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:975,y:600,tapTime:95.146666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:95.829333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:96.768,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:850,tapTime:97.493333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:98.218666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:975,y:600,tapTime:98.944,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:99.669333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:500,y:600,tapTime:100.65066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:600,tapTime:101.54666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:500,tapTime:102.528,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:200,tapTime:103.50933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:700,tapTime:104.40533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1e3,tapTime:105.38666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1100,y:600,tapTime:106.28266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:600,tapTime:107.30666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:500,y:600,tapTime:108.24533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:600,tapTime:109.184,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:500,tapTime:110.208,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:200,tapTime:111.232,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:700,tapTime:112.128,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1e3,tapTime:113.10933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:114.09066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:114.09066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:115.072,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:115.072,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:116.096,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:116.096,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:117.034,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:117.034,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:118.05866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:118.05866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:118.99733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:118.99733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:119.936,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:119.936,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:120.87466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:120.87466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:121.856,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:121.856,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:122.83733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:122.83733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:123.776,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:123.776,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:124.75,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:124.75,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:125.73866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:125.73866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:126.67733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:126.67733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:127.65866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:127.65866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:128.64,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:128.64,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:500,tapTime:129.62133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:150,tapTime:133.41866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:150,tapTime:133.41866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:150,tapTime:134.4,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:150,tapTime:134.4,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:450,tapTime:135.424,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:450,tapTime:135.424,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:450,tapTime:136.36266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:450,tapTime:136.36266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:750,tapTime:137.30133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:750,tapTime:137.30133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:750,tapTime:138.28266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:750,tapTime:138.28266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:1050,tapTime:139.17,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:1050,tapTime:139.17,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:1050,tapTime:140.20266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:1050,tapTime:140.20266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:150,tapTime:141.14133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:150,tapTime:141.14133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:150,tapTime:142.16533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:150,tapTime:142.16533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:450,tapTime:143.104,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:450,tapTime:143.104,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:450,tapTime:144.04266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:450,tapTime:144.04266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:750,tapTime:144.98133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:750,tapTime:144.98133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:750,tapTime:145.92,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:750,tapTime:145.92,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:1050,tapTime:146.816,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:1050,tapTime:146.816,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:1050,tapTime:147.75466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:1050,tapTime:147.75466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:150.86933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:151.76533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:151.89333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:152.27733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:152.74666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:153.68533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:153.81333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:154.19733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:154.70933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:155.60533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:155.73333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:156.11733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:156.672,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:157.52533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:157.696,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:158.08,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:158.54933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:159.44533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:159.57333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:159.95733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:160.46933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:161.408,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:161.536,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:161.92,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:162.38933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:500,y:700,tapTime:163.2,shape:{type:"circle",size:"medium"}},{type:"Tap",x:770,y:700,tapTime:163.328,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1040,y:700,tapTime:163.584,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:163.79733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:164.26666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:166.22933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:167.168,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:168.14933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:169.13066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1300,y:900,tapTime:170.112,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1600,y:900,tapTime:171.09333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:171.98933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:172.50133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:173.952,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:174.93333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:175.872,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:176.85333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1300,y:900,tapTime:177.792,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1600,y:900,tapTime:178.77333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:179.712,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:180.13866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:300,tapTime:180.69333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:181.71733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:182.69866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:183.59466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:184.53333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1300,y:900,tapTime:185.51466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1600,y:900,tapTime:186.5,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:187.43466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:187.904,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:300,tapTime:188.45866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:189.44,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:190.37866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:191.36,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:192.256,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1300,y:900,tapTime:193.23733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1600,y:900,tapTime:194.21866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:195.15733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:195.584,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:300,tapTime:196.13866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:197.12,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:198.10133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:199.04,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:199.97866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1300,y:900,tapTime:201.00266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1600,y:900,tapTime:201.984,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:202.88,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:203.34933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:300,tapTime:203.81866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:204.84266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:205.824,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:206.76266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:207.70133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:208.72533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:208.72533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:209.70666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:209.70666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:210.688,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:210.688,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:211.62,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:211.62,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:212.56533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:212.56533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:213.55,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:213.55,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:214.528,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:214.528,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:215.55,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:215.55,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:216.448,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:216.448,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:217.38666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:217.38666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:218.368,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:218.368,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:219.30666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:219.30666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:220.288,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:220.288,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:221.269,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:221.269,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:222.208,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:222.208,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:223.189,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:223.189,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:224.128,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:224.128,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:225.10933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:225.10933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:226.048,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:226.048,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:227.02933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:227.02933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:130,y:650,tapTime:228.05333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:229.97333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:230.912,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:231.85066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:233.30133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:233.55733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:130,y:650,tapTime:235.73333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:237.65333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:238.592,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:239.53066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:240.98133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:241.28,shape:{type:"circle",size:"medium"}}],name:"Demolevel 1",owner:{username:"LiaLinna",id:"undefined"},id:"undefined_1"},{audio:{streamUrl:"https://api.soundcloud.com/tracks/129873688/stream",permalinkUrl:"http://soundcloud.com/momomoyouth/dont-wanna-dance-90clip",artist:"_M_",title:"Don't Wanna Dance (Clip)",duration:90078,artworkUrl:"https://i1.sndcdn.com/artworks-000071118932-dol82q-large.jpg",artistUrl:"http://soundcloud.com/momomoyouth"},gameObjects:[{type:"Tap",x:400,y:600,tapTime:7.637333333333332,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:7.978666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:8.319999999999999,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:9.045333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:9.557333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:9.898666666666665,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:10.24,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:10.922666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:11.392000000000001,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:11.690666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:12.031999999999998,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:12.714666666666668,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:13.226666666666665,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:13.568,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:13.909333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:14.634666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:15.061333333333332,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:15.402666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:15.786666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:16.384,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:16.896,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:17.237333333333332,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:17.578666666666663,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:18.261333333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:18.730666666666664,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:19.072000000000003,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:19.370666666666665,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:20.138666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:20.693333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:20.991999999999997,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:21.290666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:22.442666666666668,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:22.784,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:23.125333333333337,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:23.381333333333338,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:23.85066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:24.27733333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:24.576,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:24.96,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:25.216,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:25.685333333333332,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:26.15466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:26.453333333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:26.837333333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:27.093333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:27.562666666666665,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:27.989333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:28.288000000000004,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:28.672000000000004,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:28.928000000000004,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:29.354666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:29.866666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:30.165333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:30.506666666666668,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:30.762666666666668,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:31.40266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:31.701333333333338,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:32,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:32.384,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:32.59733333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:33.024,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:33.536,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:33.83466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:34.21866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:34.47466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:34.944,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:37.205333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:37.54666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:37.93066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:38.144,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:38.61333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:39.08266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:39.38133333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:39.72266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:39.97866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:40.448,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:40.91733333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:41.25866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:41.64266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:41.89866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:42.368,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:44.629333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:44.928000000000004,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:45.312000000000005,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:45.525333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:45.952,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:46.42133333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:46.76266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1195,y:600,tapTime:47.14666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:47.36,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:47.82933333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:48.34133333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:48.64,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1247,y:600,tapTime:49.024,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:49.23733333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:49.70666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:52.010666666666665,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:52.053333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:52.522666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:52.522666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:52.949333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:52.992000000000004,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:53.376000000000005,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:53.41866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:53.845333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:53.888,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:54.31466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:54.31466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:54.784,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:54.784,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:55.21066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:55.21066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:55.68000000000001,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:55.68000000000001,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:56.14933333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:56.14933333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:56.61866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:56.61866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:57.04533333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:57.04533333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:57.51466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:57.51466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:57.983999999999995,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:57.983999999999995,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:58.495999999999995,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:58.53866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:58.92266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:58.92266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:59.349333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:59.391999999999996,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:59.81866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:59.81866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:60.33066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:60.33066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:60.757333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:60.757333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:61.184,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:61.226666666666674,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:61.653333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:61.696,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:62.122666666666674,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:62.165333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:62.592,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:62.592,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:63.01866666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:63.01866666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:63.53066666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:63.53066666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:64.04266666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:64.04266666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:64.42666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:64.46933333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:64.896,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:64.896,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:65.36533333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:65.408,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:65.87733333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:65.87733333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:66.304,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:66.34666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:70.48533333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:70.784,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:71.12533333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:72.32000000000001,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:72.66133333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:73.00266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:74.112,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:74.496,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:74.83733333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:75.52,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:76.032,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:76.33066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:76.672,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:77.35466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:77.86666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:78.16533333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:78.50666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:78.76266666666668,shape:{type:"circle",size:"medium"}},{type:"Tap",x:771,y:180,tapTime:79.18933333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:79.70133333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:80,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:80.384,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:80.59733333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:81.06666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:81.536,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:81.87733333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:82.21866666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:82.47466666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:82.90133333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:83.41333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:83.712,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:84.05333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:84.352,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:84.77866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:85.248,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:85.54666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:85.93066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:86.144,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:86.61333333333333,shape:{type:"circle",size:"medium"}}],name:"Demolevel 2",owner:{username:"coloreddrums",id:"undefined"},id:"undefined_2"}]
}),define("collections/LevelCollection",["jquery","underscore","backbone","models/Level","levelcontainer"],function(e,t,i,n){var r=i.Collection.extend({model:n,url:"levels",initialize:function(){}});return r}),define("text!templates/components/leveltext-input.html",[],function(){return'<div class="row">\n    <div class="form-group inputstatediv">\n        <label class="control-label">The level-text</label>\n        <input type="text" class="form-control input-lg leveljsoninput" placeholder="Copy you level-text here...">\n\n    </div>\n</div>\n<div class="row">\n    <div class="list-group levelcontainer_custom"></div>\n</div>'}),define("views/LevelTextInputView",["jquery","underscore","Framework","util/levelvalidator","text!templates/components/leveltext-input.html","views/LevelPanelView","models/Level"],function(e,t,i,n,r,a,s){var o=i.View.extend({template:t.template(r,{}),initialize:function(e){this.callback=e},render:function(){return this.$el.html(this.template),this.containerelement_custom=this.$(".levelcontainer_custom"),this.inputstatediv=this.$(".inputstatediv"),this},events:{"input .leveljsoninput":"inputchanged"},inputchanged:function(){var e=this.$(".leveljsoninput").val();if(""===e)this.inputstatediv.removeClass("has-success has-error"),this.containerelement_custom.slideUp(),this.$(".alert_invalidlevel").is(":visible")&&this.$(".alert_invalidlevel").slideUp(),this.containerelement_custom.is(":visible")&&this.containerelement_custom.slideUp();else if(n.validate(e)){this.inputstatediv.removeClass("has-error").addClass("has-success"),this.$(".alert_invalidlevel").is(":visible")&&this.$(".alert_invalidlevel").slideUp();var t=new a({callback:this.callback,model:new s(JSON.parse(e),{parse:!0})});t.render(),this.containerelement_custom.html(t.el),this.containerelement_custom.is(":visible")||this.containerelement_custom.slideDown()}else this.inputstatediv.removeClass("has-success").addClass("has-error"),this.containerelement_custom.is(":visible")&&this.containerelement_custom.slideUp(),this.$(".alert_invalidlevel").slideDown(),this.containerelement_custom.is(":visible")&&this.containerelement_custom.slideUp()}});return o}),define("views/ChooseLevelView",["jquery","underscore","Framework","text!templates/leveloverview.html","views/LevelPanelView","collections/LevelCollection","app","views/LevelTextInputView"],function(e,t,i,n,r,a,s){var o=i.View.extend({initialize:function(){this.levelcollection=new a,this.collectionview=new i.CollectionView({className:"list-group",childView:r,collection:this.levelcollection,getViewParams:function(e){return{model:e,callback:this.levelSelectedCallback}}.bind(this)})},levelSelectedCallback:function(e){s.startLevel(e)},render:function(){i.history.navigate("chooselevel",{trigger:!1,replace:!0});var e=t.template(n,{});this.$el.html(e),this.collectionview.render(),this.$("#levelcollection_container").html(this.collectionview.el),this.levelcollection.fetch({success:function(e){console.log("fetched successfully"),console.log(e.toJSON())}})},onClose:function(){this.collectionview.close()}});return o}),define("text!templates/applicationwithmenu.html",[],function(){return'<div id="menu"></div>\n<div id="abovecontent"></div>\n<div id="content"></div>\n<hr>\n<div class="container">\n    <footer>\n        Version: <strong>indev</strong>\n        <a class="pull-right" href="http://soundcloud.com" target="_blank">\n            <img src="img/powered_by_black.png"/>\n        </a>\n        </p>\n    </footer>\n</div>'}),define("views/ApplicationWithMenuView",["jquery","underscore","Framework","text!templates/applicationwithmenu.html","views/MenuView","views/SignInView"],function(e,t,i,n,r,a){var s=i.View.extend({el:"body",fullscreen:!0,render:function(){var e=t.template(n,{});this.$el.html(e),this.menu=new r,this.$("#menu").html(this.menu.render().el)},setContent:function(e){this.$("#content").html(e)},openSignInModal:function(){var t=new a;t.render(),e("#abovecontent").html(t.el)},onClose:function(){this.menu.close()}});return s}),define("text!templates/404.html",[],function(){return'<div class="container">\n    <div class="alert alert-warning alert-dismissable" id="alert404" style="display:none">\n        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n        <strong>Sorry!</strong> The page you requested could not be found. You\'ve been redirected to the home page.\n    </div>\n</div>'}),define("views/PageNotFoundView",["jquery","underscore","Framework","text!templates/404.html"],function(e,t,i,n){var r=i.View.extend({render:function(){var r=t.template(n,{});this.$el.html(r),e("#alert404").slideDown(),i.history.bind("route",this.updateState)},updateState:function(t,i){if("notfound"!=i){console.log(i);var n=e("#alert404");null!==n&&n.slideUp()}}});return r}),define("text!templates/legal.html",[],function(){return'\n<div class="container">\n<h2>Person responsible for content in accordance with 55 Abs. 2 RStV</h2>\n    <br>\n    Hermann Stolte\n    <br><br>\n\n\n<h2>Disclaimer</h2>\nAccountability for content\nThe contents of our pages have been created with the utmost care. However, we cannot guarantee the contents\' accuracy, completeness or topicality. According to statutory provisions, we are furthermore responsible for our own content on these web pages. In this context, please note that we are accordingly not obliged to monitor merely the transmitted or saved information of third parties, or investigate circumstances pointing to illegal activity. Our obligations to remove or block the use of information under generally applicable laws remain unaffected by this as per  8 to 10 of the Telemedia Act (TMG).\n\nAccountability for links\nResponsibility for the content of external links (to web pages of third parties) lies solely with the operators of the linked pages. No violations were evident to us at the time of linking. Should any legal infringement become known to us, we will remove the respective link immediately.\n\nCopyright\nOur web pages and their contents are subject to German copyright law. Unless expressly permitted by law ( 44a et seq. of the copyright law), every form of utilizing, reproducing or processing works subject to copyright protection on our web pages requires the prior consent of the respective owner of the rights. Individual reproductions of a work are allowed only for private use, so must not serve either directly or indirectly for earnings. Unauthorized utilization of copyrighted works is punishable ( 106 of the copyright law).\n\n<i>Source: </i><a href="http://www.twigg.de" target="_blank">twiggs translations</a>\n\n<h3 id="dependencies">Third-party involvement</h3>\n<p>TouchTheBeat uses the following <strong>third party services</strong>:</p>\n<ul>\n    <li><strong>\'audio streaming service\' offered by SoundCloud Limited</strong>, a company incorporated under the laws of England &amp; Wales and with its main place of business at Rheinsberger Str. 76/77, 10115 Berlin, Germany. More information about SoundCloud is available here: https://soundcloud.com/imprint </li>\n</ul>\n<p>I may not be associated with any of these third party services or content provided by them.</p>\n<p>TouchTheBeat uses and contains the following <strong>software components</strong> under their respective licenses:</p>\n<ul>\n    <li><strong>jQuery</strong> JavaScript Library v1.10.1, http://jquery.com/, Includes Sizzle.js http://sizzlejs.com/ Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors Released under the MIT license</li>\n    <li><strong>Underscore.js</strong> 1.6.0 http://underscorejs.org (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters &amp; Editors MIT license.</li>\n    <li><strong>Backbone.js</strong> 1.1.2 http://backbonejs.org (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters &amp; Editors MIT license</li>\n    <li><strong>RequireJS</strong> 2.1.13 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved. Available via the MIT or new BSD license. see: http://github.com/jrburke/requirejs for details</li>\n    <li><strong>RequireJS text</strong> 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved. Available via the MIT or new BSD license. see: http://github.com/requirejs/text for details</li>\n    <li><strong>Bootstrap</strong> v3.2.0 (http://getbootstrap.com) Copyright 2011-2014 Twitter, Inc. Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)</li>\n    <li><strong>Snap.svg</strong> 0.3.0 Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved. Licensed under the Apache License, Version 2.0 ; http://www.apache.org/licenses/LICENSE-2.0</li>\n    <li><strong>TV4.js</strong> Author: Geraint Luff and others Year: 2013 This code is released into the "public domain" by its auth</li>\n\n</ul>\n\n<h2>Privacy Policy</h2>\n    Google Analytics is a web analysis service provided by Google. Google utilizes the data collected to track and examine the use of dev.coloreddrums.com/ttb, to prepare reports on its activities and share them with other Google services.\n    Google may use the data collected to contextualize and personalize the ads of its own advertising network.\n\n    Personal data collected: Cookie and Usage Data. Place of processing: USA. Find Google\'s <a href="http://www.google.com/intl/en/policies/privacy/" target="_blank">privacy policy here</a>.\n    Find information on an opt-out option provided by Google <a href="//tools.google.com/dlpage/gaoptout" target="_blank">here</a>.\n</div>'}),define("views/LegalView",["jquery","underscore","Framework","text!templates/legal.html"],function(e,t,i,n){var r=i.View.extend({render:function(){var e=t.template(n,{});this.$el.html(e)}});return r}),define("text!templates/play.html",[],function(){return'<div id="playdiv" class="svgcontainer">\n    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1600 1200" id="svg">\n    </svg>\n</div>\n\n'}),function(e){var t,i,n="0.4.2",r="hasOwnProperty",a=/[\.\/]/,s=/\s*,\s*/,o="*",l=function(e,t){return e-t},c={n:{}},u=function(){for(var e=0,t=this.length;t>e;e++)if("undefined"!=typeof this[e])return this[e]},p=function(){for(var e=this.length;--e;)if("undefined"!=typeof this[e])return this[e]},d=function(e,n){e=String(e);var r,a=i,s=Array.prototype.slice.call(arguments,2),o=d.listeners(e),c=0,h=[],f={},m=[],y=t;m.firstDefined=u,m.lastDefined=p,t=e,i=0;for(var g=0,v=o.length;v>g;g++)"zIndex"in o[g]&&(h.push(o[g].zIndex),o[g].zIndex<0&&(f[o[g].zIndex]=o[g]));for(h.sort(l);h[c]<0;)if(r=f[h[c++]],m.push(r.apply(n,s)),i)return i=a,m;for(g=0;v>g;g++)if(r=o[g],"zIndex"in r)if(r.zIndex==h[c]){if(m.push(r.apply(n,s)),i)break;do if(c++,r=f[h[c]],r&&m.push(r.apply(n,s)),i)break;while(r)}else f[r.zIndex]=r;else if(m.push(r.apply(n,s)),i)break;return i=a,t=y,m};d._events=c,d.listeners=function(e){var t,i,n,r,s,l,u,p,d=e.split(a),h=c,f=[h],m=[];for(r=0,s=d.length;s>r;r++){for(p=[],l=0,u=f.length;u>l;l++)for(h=f[l].n,i=[h[d[r]],h[o]],n=2;n--;)t=i[n],t&&(p.push(t),m=m.concat(t.f||[]));f=p}return m},d.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var i=e.split(s),n=0,r=i.length;r>n;n++)!function(e){for(var i,n=e.split(a),r=c,s=0,o=n.length;o>s;s++)r=r.n,r=r.hasOwnProperty(n[s])&&r[n[s]]||(r[n[s]]={n:{}});for(r.f=r.f||[],s=0,o=r.f.length;o>s;s++)if(r.f[s]==t){i=!0;break}!i&&r.f.push(t)}(i[n]);return function(e){+e==+e&&(t.zIndex=+e)}},d.f=function(e){var t=[].slice.call(arguments,1);return function(){d.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},d.stop=function(){i=1},d.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},d.nts=function(){return t.split(a)},d.off=d.unbind=function(e,t){if(!e)return void(d._events=c={n:{}});var i=e.split(s);if(i.length>1)for(var n=0,l=i.length;l>n;n++)d.off(i[n],t);else{i=e.split(a);var u,p,h,n,l,f,m,y=[c];for(n=0,l=i.length;l>n;n++)for(f=0;f<y.length;f+=h.length-2){if(h=[f,1],u=y[f].n,i[n]!=o)u[i[n]]&&h.push(u[i[n]]);else for(p in u)u[r](p)&&h.push(u[p]);y.splice.apply(y,h)}for(n=0,l=y.length;l>n;n++)for(u=y[n];u.n;){if(t){if(u.f){for(f=0,m=u.f.length;m>f;f++)if(u.f[f]==t){u.f.splice(f,1);break}!u.f.length&&delete u.f}for(p in u.n)if(u.n[r](p)&&u.n[p].f){var g=u.n[p].f;for(f=0,m=g.length;m>f;f++)if(g[f]==t){g.splice(f,1);break}!g.length&&delete u.n[p].f}}else{delete u.f;for(p in u.n)u.n[r](p)&&u.n[p].f&&delete u.n[p].f}u=u.n}}},d.once=function(e,t){var i=function(){return d.unbind(e,i),t.apply(this,arguments)};return d.on(e,i)},d.version=n,d.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=d:"function"==typeof define&&define.amd?define("eve",[],function(){return d}):e.eve=d}(this),function(e,t){"function"==typeof define&&define.amd?define("snap",["eve"],function(i){return t(e,i)}):t(e,e.eve)}(this,function(e,t){var i=function(t){var i={},n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},r=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},a=0,s="M"+(+new Date).toString(36),o=function(){return s+(a++).toString(36)},l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var i=t.s-e;t.b+=t.dur*i,t.B+=t.dur*i,t.s=e},u=function(e){var t=this;return null==e?t.spd:void(t.spd=e)},p=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},d=function(){var e=this;delete i[e.id],e.update(),t("mina.stop."+e.id,e)},h=function(){var e=this;e.pdif||(delete i[e.id],e.update(),e.pdif=e.get()-e.b)},f=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,i[e.id]=e)},m=function(){var e,t=this;if(r(t.start)){e=[];for(var i=0,n=t.start.length;n>i;i++)e[i]=+t.start[i]+(t.end[i]-t.start[i])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)},y=function(){var e=0;for(var r in i)if(i.hasOwnProperty(r)){var a=i[r],s=a.get();e++,a.s=(s-a.b)/(a.dur/a.spd),a.s>=1&&(delete i[r],a.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(a)),a.update()}e&&n(y)},g=function(e,t,r,a,s,l,v){var b={id:o(),start:e,end:t,b:r,s:0,dur:a-r,spd:1,get:s,set:l,easing:v||g.linear,status:c,speed:u,duration:p,stop:d,pause:h,resume:f,update:m};i[b.id]=b;var x,T=0;for(x in i)if(i.hasOwnProperty(x)&&(T++,2==T))break;return 1==T&&n(y),b};return g.time=l,g.getById=function(e){return i[e]||null},g.linear=function(e){return e},g.easeout=function(e){return Math.pow(e,1.7)},g.easein=function(e){return Math.pow(e,.48)},g.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,i=Math.sqrt(.1734+t*t),n=i-t,r=Math.pow(Math.abs(n),1/3)*(0>n?-1:1),a=-i-t,s=Math.pow(Math.abs(a),1/3)*(0>a?-1:1),o=r+s+.5;return 3*(1-o)*o*o+o*o*o},g.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},g.backout=function(e){if(0==e)return 0;e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},g.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},g.bounce=function(e){var t,i=7.5625,n=2.75;return 1/n>e?t=i*e*e:2/n>e?(e-=1.5/n,t=i*e*e+.75):2.5/n>e?(e-=2.25/n,t=i*e*e+.9375):(e-=2.625/n,t=i*e*e+.984375),t},e.mina=g,g}("undefined"==typeof t?function(){}:t),n=function(){function n(e,t){if(e){if(e.tagName)return _(e);if(a(e,"array")&&n.set)return n.set.apply(n,e);if(e instanceof x)return e;if(null==t)return e=C.doc.querySelector(e),_(e)}return e=null==e?"100%":e,t=null==t?"100%":t,new k(e,t)}function r(e,t){if(t){if("#text"==e&&(e=C.doc.createTextNode(t.text||"")),"string"==typeof e&&(e=r(e)),"string"==typeof t)return"xlink:"==t.substring(0,6)?e.getAttributeNS(X,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(Y,t.substring(4)):e.getAttribute(t);for(var i in t)if(t[S](i)){var n=E(t[i]);n?"xlink:"==i.substring(0,6)?e.setAttributeNS(X,i.substring(6),n):"xml:"==i.substring(0,4)?e.setAttributeNS(Y,i.substring(4),n):e.setAttribute(i,n):e.removeAttribute(i)}}else e=C.doc.createElementNS(Y,e);return e}function a(e,t){return t=E.prototype.toLowerCase.call(t),"finite"==t?isFinite(e):"array"==t&&(e instanceof Array||Array.isArray&&Array.isArray(e))?!0:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||L.call(e).slice(8,-1).toLowerCase()==t}function s(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var i in e)e[S](i)&&(t[i]=s(e[i]));return t}function o(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return e.push(e.splice(i,1)[0])}function l(e,t,i){function n(){var r=Array.prototype.slice.call(arguments,0),a=r.join(""),s=n.cache=n.cache||{},l=n.count=n.count||[];return s[S](a)?(o(l,a),i?i(s[a]):s[a]):(l.length>=1e3&&delete s[l.shift()],l.push(a),s[a]=e.apply(t,r),i?i(s[a]):s[a])}return n}function c(e,t,i,n,r,a){if(null==r){var s=e-i,o=t-n;return s||o?(180+180*j.atan2(-o,-s)/P+360)%360:0}return c(e,t,r,a)-c(i,n,r,a)}function u(e){return e%360*P/180}function p(e){return 180*e/P%360}function d(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,i,n){return n=n.split(/\s*,\s*|\s+/),"rotate"==i&&1==n.length&&n.push(0,0),"scale"==i&&(n.length>2?n=n.slice(0,2):2==n.length&&n.push(0,0),1==n.length&&n.push(n[0],0,0)),t.push("skewX"==i?["m",1,0,j.tan(u(n[0])),1,0,0]:"skewY"==i?["m",1,j.tan(u(n[0])),0,1,0,0]:[i.charAt(0)].concat(n)),e}),t}function h(e,t){var i=rt(e),r=new n.Matrix;if(i)for(var a=0,s=i.length;s>a;a++){var o,l,c,u,p,d=i[a],h=d.length,f=E(d[0]).toLowerCase(),m=d[0]!=f,y=m?r.invert():0;"t"==f&&2==h?r.translate(d[1],0):"t"==f&&3==h?m?(o=y.x(0,0),l=y.y(0,0),c=y.x(d[1],d[2]),u=y.y(d[1],d[2]),r.translate(c-o,u-l)):r.translate(d[1],d[2]):"r"==f?2==h?(p=p||t,r.rotate(d[1],p.x+p.width/2,p.y+p.height/2)):4==h&&(m?(c=y.x(d[2],d[3]),u=y.y(d[2],d[3]),r.rotate(d[1],c,u)):r.rotate(d[1],d[2],d[3])):"s"==f?2==h||3==h?(p=p||t,r.scale(d[1],d[h-1],p.x+p.width/2,p.y+p.height/2)):4==h?m?(c=y.x(d[2],d[3]),u=y.y(d[2],d[3]),r.scale(d[1],d[1],c,u)):r.scale(d[1],d[1],d[2],d[3]):5==h&&(m?(c=y.x(d[3],d[4]),u=y.y(d[3],d[4]),r.scale(d[1],d[2],c,u)):r.scale(d[1],d[2],d[3],d[4])):"m"==f&&7==h&&r.add(d[1],d[2],d[3],d[4],d[5],d[6])}return r}function f(e,t){if(null==t){var i=!0;if(t=e.node.getAttribute("linearGradient"==e.type||"radialGradient"==e.type?"gradientTransform":"pattern"==e.type?"patternTransform":"transform"),!t)return new n.Matrix;t=d(t)}else t=n._.rgTransform.test(t)?E(t).replace(/\.{3}|\u2026/g,e._.transform||R):d(t),a(t,"array")&&(t=n.path?n.path.toString.call(t):E(t)),e._.transform=t;var r=h(t,e.getBBox(1));return i?r:void(e.matrix=r)}function m(e){var t=e.node.ownerSVGElement&&_(e.node.ownerSVGElement)||e.node.parentNode&&_(e.node.parentNode)||n.select("svg")||n(0,0),i=t.select("defs"),r=null==i?!1:i.node;return r||(r=w("defs",t.node).node),r}function y(e){return e.node.ownerSVGElement&&_(e.node.ownerSVGElement)||n.select("svg")}function v(e,t,i){function n(e){if(null==e)return R;if(e==+e)return e;r(c,{width:e});try{return c.getBBox().width}catch(t){return 0}}function a(e){if(null==e)return R;if(e==+e)return e;r(c,{height:e});try{return c.getBBox().height}catch(t){return 0}}function s(n,r){null==t?l[n]=r(e.attr(n)||0):n==t&&(l=r(null==i?e.attr(n)||0:i))}var o=y(e).node,l={},c=o.querySelector(".svg---mgr");switch(c||(c=r("rect"),r(c,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),o.appendChild(c)),e.type){case"rect":s("rx",n),s("ry",a);case"image":s("width",n),s("height",a);case"text":s("x",n),s("y",a);break;case"circle":s("cx",n),s("cy",a),s("r",n);break;case"ellipse":s("cx",n),s("cy",a),s("rx",n),s("ry",a);break;case"line":s("x1",n),s("x2",n),s("y1",a),s("y2",a);break;case"marker":s("refX",n),s("markerWidth",n),s("refY",a),s("markerHeight",a);break;case"radialGradient":s("fx",n),s("fy",a);break;case"tspan":s("dx",n),s("dy",a);break;default:s(t,n)}return o.removeChild(c),l}function b(e){a(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,i=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){n.appendChild(e.node)}):n.appendChild(e[t].node);var r=n.childNodes;for(t=0;t<r.length;t++)this[i++]=_(r[t]);return this}function x(e){if(e.snap in J)return J[e.snap];var t,i=this.id=W();try{t=e.ownerSVGElement}catch(n){}if(this.node=e,t&&(this.paper=new k(t)),this.type=e.tagName,this.anims={},this._={transform:[]},e.snap=i,J[i]=this,"g"==this.type&&(this.add=b),this.type in{g:1,mask:1,pattern:1})for(var r in k.prototype)k.prototype[S](r)&&(this[r]=k.prototype[r])}function T(e){this.node=e}function w(e,t){var i=r(e);t.appendChild(i);var n=_(i);return n}function k(e,t){var i,n,a,s=k.prototype;if(e&&"svg"==e.tagName){if(e.snap in J)return J[e.snap];var o=e.ownerDocument;i=new x(e),n=e.getElementsByTagName("desc")[0],a=e.getElementsByTagName("defs")[0],n||(n=r("desc"),n.appendChild(o.createTextNode("Created with Snap")),i.node.appendChild(n)),a||(a=r("defs"),i.node.appendChild(a)),i.defs=a;for(var l in s)s[S](l)&&(i[l]=s[l]);i.paper=i.root=i}else i=w("svg",C.doc.body),r(i.node,{height:t,version:1.1,width:e,xmlns:Y});return i}function _(e){return e?e instanceof x||e instanceof T?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new k(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new k(e.contentDocument.getElementsByTagName("svg")[0]):new x(e):e}n.version="0.3.0",n.toString=function(){return"Snap v"+this.version},n._={};var C={win:e,doc:e.document};n._.glob=C;var S="hasOwnProperty",E=String,z=parseFloat,A=parseInt,j=Math,O=j.max,N=j.min,M=j.abs,P=(j.pow,j.PI),R=(j.round,""),I=" ",L=Object.prototype.toString,$=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,F="	\n\f\r \u2028\u2029",D=(n._.separator=new RegExp("[,"+F+"]+"),new RegExp("["+F+"]","g"),new RegExp("["+F+"]*,["+F+"]*")),B={hs:1,rg:1},q=new RegExp("([a-z])["+F+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+F+"]*,?["+F+"]*)+)","ig"),U=new RegExp("([rstm])["+F+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+F+"]*,?["+F+"]*)+)","ig"),V=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+F+"]*,?["+F+"]*","ig"),H=0,G="S"+(+new Date).toString(36),W=function(){return G+(H++).toString(36)},X="http://www.w3.org/1999/xlink",Y="http://www.w3.org/2000/svg",J={},K=n.url=function(e){return"url('#"+e+"')"};n._.$=r,n._.id=W,n.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(e,i,n){var r=n;return i.replace(t,function(e,t,i,n,a){t=t||n,r&&(t in r&&(r=r[t]),"function"==typeof r&&a&&(r=r()))}),r=(null==r||r==n?e:r)+""};return function(t,n){return E(t).replace(e,function(e,t){return i(e,t,n)})}}(),n._.clone=s,n._.cacher=l,n.rad=u,n.deg=p,n.angle=c,n.is=a,n.snapTo=function(e,t,i){if(i=a(i,"finite")?i:10,a(e,"array")){for(var n=e.length;n--;)if(M(e[n]-t)<=i)return e[n]}else{e=+e;var r=t%e;if(i>r)return t-r;if(r>e-i)return t-r+e}return t},n.getRGB=l(function(e){if(!e||(e=E(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:tt};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:tt};if(!(B[S](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=Q(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:tt};var t,i,r,s,o,l,c=e.match($);return c?(c[2]&&(r=A(c[2].substring(5),16),i=A(c[2].substring(3,5),16),t=A(c[2].substring(1,3),16)),c[3]&&(r=A((o=c[3].charAt(3))+o,16),i=A((o=c[3].charAt(2))+o,16),t=A((o=c[3].charAt(1))+o,16)),c[4]&&(l=c[4].split(D),t=z(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),i=z(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),r=z(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(s=z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100)),c[5]?(l=c[5].split(D),t=z(l[0]),"%"==l[0].slice(-1)&&(t/=100),i=z(l[1]),"%"==l[1].slice(-1)&&(i/=100),r=z(l[2]),"%"==l[2].slice(-1)&&(r/=100),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(s=z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),n.hsb2rgb(t,i,r,s)):c[6]?(l=c[6].split(D),t=z(l[0]),"%"==l[0].slice(-1)&&(t/=100),i=z(l[1]),"%"==l[1].slice(-1)&&(i/=100),r=z(l[2]),"%"==l[2].slice(-1)&&(r/=100),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(s=z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),n.hsl2rgb(t,i,r,s)):(t=N(j.round(t),255),i=N(j.round(i),255),r=N(j.round(r),255),s=N(O(s,0),1),c={r:t,g:i,b:r,toString:tt},c.hex="#"+(16777216|r|i<<8|t<<16).toString(16).slice(1),c.opacity=a(s,"finite")?s:1,c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:tt}},n),n.hsb=l(function(e,t,i){return n.hsb2rgb(e,t,i).hex}),n.hsl=l(function(e,t,i){return n.hsl2rgb(e,t,i).hex}),n.rgb=l(function(e,t,i,n){if(a(n,"finite")){var r=j.round;return"rgba("+[r(e),r(t),r(i),+n.toFixed(2)]+")"}return"#"+(16777216|i|t<<8|e<<16).toString(16).slice(1)});var Q=function(e){var t=C.doc.getElementsByTagName("head")[0]||C.doc.getElementsByTagName("svg")[0],i="rgb(255, 0, 0)";return(Q=l(function(e){if("red"==e.toLowerCase())return i;t.style.color=i,t.style.color=e;var n=C.doc.defaultView.getComputedStyle(t,R).getPropertyValue("color");return n==i?null:n}))(e)},Z=function(){return"hsb("+[this.h,this.s,this.b]+")"},et=function(){return"hsl("+[this.h,this.s,this.l]+")"},tt=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},it=function(e,t,i){if(null==t&&a(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(i=e.b,t=e.g,e=e.r),null==t&&a(e,string)){var r=n.getRGB(e);e=r.r,t=r.g,i=r.b}return(e>1||t>1||i>1)&&(e/=255,t/=255,i/=255),[e,t,i]},nt=function(e,t,i,r){e=j.round(255*e),t=j.round(255*t),i=j.round(255*i);var s={r:e,g:t,b:i,opacity:a(r,"finite")?r:1,hex:n.rgb(e,t,i),toString:tt};return a(r,"finite")&&(s.opacity=r),s};n.color=function(e){var t;return a(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=n.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):a(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=n.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(a(e,"string")&&(e=n.getRGB(e)),a(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=n.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=n.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=tt,e},n.hsb2rgb=function(e,t,i,n){a(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(i=e.b,t=e.s,e=e.h,n=e.o),e*=360;var r,s,o,l,c;return e=e%360/60,c=i*t,l=c*(1-M(e%2-1)),r=s=o=i-c,e=~~e,r+=[c,l,0,0,l,c][e],s+=[l,c,c,l,0,0][e],o+=[0,0,l,c,c,l][e],nt(r,s,o,n)},n.hsl2rgb=function(e,t,i,n){a(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(i=e.l,t=e.s,e=e.h),(e>1||t>1||i>1)&&(e/=360,t/=100,i/=100),e*=360;var r,s,o,l,c;return e=e%360/60,c=2*t*(.5>i?i:1-i),l=c*(1-M(e%2-1)),r=s=o=i-c/2,e=~~e,r+=[c,l,0,0,l,c][e],s+=[l,c,c,l,0,0][e],o+=[0,0,l,c,c,l][e],nt(r,s,o,n)},n.rgb2hsb=function(e,t,i){i=it(e,t,i),e=i[0],t=i[1],i=i[2];var n,r,a,s;return a=O(e,t,i),s=a-N(e,t,i),n=0==s?null:a==e?(t-i)/s:a==t?(i-e)/s+2:(e-t)/s+4,n=(n+360)%6*60/360,r=0==s?0:s/a,{h:n,s:r,b:a,toString:Z}},n.rgb2hsl=function(e,t,i){i=it(e,t,i),e=i[0],t=i[1],i=i[2];var n,r,a,s,o,l;return s=O(e,t,i),o=N(e,t,i),l=s-o,n=0==l?null:s==e?(t-i)/l:s==t?(i-e)/l+2:(e-t)/l+4,n=(n+360)%6*60/360,a=(s+o)/2,r=0==l?0:.5>a?l/(2*a):l/(2-2*a),{h:n,s:r,l:a,toString:et}},n.parsePathString=function(e){if(!e)return null;var t=n.path(e);if(t.arr)return n.path.clone(t.arr);var i={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return a(e,"array")&&a(e[0],"array")&&(r=n.path.clone(e)),r.length||E(e).replace(q,function(e,t,n){var a=[],s=t.toLowerCase();if(n.replace(V,function(e,t){t&&a.push(+t)}),"m"==s&&a.length>2&&(r.push([t].concat(a.splice(0,2))),s="l",t="m"==t?"l":"L"),"o"==s&&1==a.length&&r.push([t,a[0]]),"r"==s)r.push([t].concat(a));else for(;a.length>=i[s]&&(r.push([t].concat(a.splice(0,i[s]))),i[s]););}),r.toString=n.path.toString,t.arr=n.path.clone(r),r};var rt=n.parseTransformString=function(e){if(!e)return null;var t=[];return a(e,"array")&&a(e[0],"array")&&(t=n.path.clone(e)),t.length||E(e).replace(U,function(e,i,n){{var r=[];i.toLowerCase()}n.replace(V,function(e,t){t&&r.push(+t)}),t.push([i].concat(r))}),t.toString=n.path.toString,t};n._.svgTransform2string=d,n._.rgTransform=new RegExp("^[a-z]["+F+"]*-?\\.?\\d","i"),n._.transform2matrix=h,n._unit2px=v;C.doc.contains||C.doc.compareDocumentPosition?function(e,t){var i=9==e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e==n||!(!n||1!=n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t;)if(t=t.parentNode,t==e)return!0;return!1};n._.getSomeDefs=m,n._.getSomeSVG=y,n.select=function(e){return _(C.doc.querySelector(e))},n.selectAll=function(e){for(var t=C.doc.querySelectorAll(e),i=(n.set||Array)(),r=0;r<t.length;r++)i.push(_(t[r]));return i},setInterval(function(){for(var e in J)if(J[S](e)){var t=J[e],i=t.node;("svg"!=t.type&&!i.ownerSVGElement||"svg"==t.type&&(!i.parentNode||"ownerSVGElement"in i.parentNode&&!i.ownerSVGElement))&&delete J[e]}},1e4),function(e){function s(e){function t(e,t){var i=r(e.node,t);i=i&&i.match(s),i=i&&i[2],i&&"#"==i.charAt()&&(i=i.substring(1),i&&(l[i]=(l[i]||[]).concat(function(i){var n={};n[t]=K(i),r(e.node,n)})))}function i(e){var t=r(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1),t&&(l[t]=(l[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)})))}for(var n,a=e.selectAll("*"),s=/^\s*url\(("|'|)(.*)\1\)\s*$/,o=[],l={},c=0,u=a.length;u>c;c++){n=a[c],t(n,"fill"),t(n,"stroke"),t(n,"filter"),t(n,"mask"),t(n,"clip-path"),i(n);var p=r(n.node,"id");p&&(r(n.node,{id:n.id}),o.push({old:p,id:n.id}))}for(c=0,u=o.length;u>c;c++){var d=l[o[c].old];if(d)for(var h=0,f=d.length;f>h;h++)d[h](o[c].id)}}function o(e,t,i){return function(n){var r=n.slice(e,t);return 1==r.length&&(r=r[0]),i?i(r):r}}function l(e){return function(){var t=e?"<"+this.type:"",i=this.node.attributes,n=this.node.childNodes;if(e)for(var r=0,a=i.length;a>r;r++)t+=" "+i[r].name+'="'+i[r].value.replace(/"/g,'\\"')+'"';if(n.length){for(e&&(t+=">"),r=0,a=n.length;a>r;r++)3==n[r].nodeType?t+=n[r].nodeValue:1==n[r].nodeType&&(t+=_(n[r]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}e.attr=function(e,i){{var n=this;n.node}if(!e)return n;if(a(e,"string")){if(!(arguments.length>1))return t("snap.util.getattr."+e,n).firstDefined();var r={};r[e]=i,e=r}for(var s in e)e[S](s)&&t("snap.util.attr."+s,n,e[s]);return n},e.getBBox=function(e){if(!n.Matrix||!n.path)return this.node.getBBox();var t=this,i=new n.Matrix;if(t.removed)return n._.box();for(;"use"==t.type;)if(e||(i=i.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))),t.original)t=t.original;else{var r=t.attr("xlink:href");t=t.original=t.node.ownerDocument.getElementById(r.substring(r.indexOf("#")+1))}var a=t._,s=n.path.get[t.type]||n.path.get.deflt;try{return e?(a.bboxwt=s?n.path.getBBox(t.realPath=s(t)):n._.box(t.node.getBBox()),n._.box(a.bboxwt)):(t.realPath=s(t),t.matrix=t.transform().localMatrix,a.bbox=n.path.getBBox(n.path.map(t.realPath,i.add(t.matrix))),n._.box(a.bbox))}catch(o){return n._.box()}};var c=function(){return this.string};e.transform=function(e){var t=this._;if(null==e){for(var i,a=this,s=new n.Matrix(this.node.getCTM()),o=f(this),l=[o],u=new n.Matrix,p=o.toTransformString(),d=E(o)==E(this.matrix)?E(t.transform):p;"svg"!=a.type&&(a=a.parent());)l.push(f(a));for(i=l.length;i--;)u.add(l[i]);return{string:d,globalMatrix:s,totalMatrix:u,localMatrix:o,diffMatrix:s.clone().add(o.invert()),global:s.toTransformString(),total:u.toTransformString(),local:p,toString:c}}return e instanceof n.Matrix?this.matrix=e:f(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?r(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?r(this.node,{patternTransform:this.matrix}):r(this.node,{transform:this.matrix})),this
},e.parent=function(){return _(this.node.parentNode)},e.append=e.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=_(e),this.node.appendChild(e.node),e.paper=this.paper}return this},e.appendTo=function(e){return e&&(e=_(e),e.append(this)),this},e.prepend=function(e){if(e){if("set"==e.type){var t,i=this;return e.forEach(function(e){t?t.after(e):i.prepend(e),t=e}),this}e=_(e);var n=e.parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),n&&n.add()}return this},e.prependTo=function(e){return e=_(e),e.prepend(this),this},e.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var i=e.parent();t.node.parentNode.insertBefore(e.node,t.node),i&&i.add()}),this.parent().add(),this}e=_(e);var i=e.parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),i&&i.add(),e.paper=this.paper,this},e.after=function(e){e=_(e);var t=e.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},e.insertBefore=function(e){e=_(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.insertAfter=function(e){e=_(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},e.select=function(e){return _(this.node.querySelector(e))},e.selectAll=function(e){for(var t=this.node.querySelectorAll(e),i=(n.set||Array)(),r=0;r<t.length;r++)i.push(_(t[r]));return i},e.asPX=function(e,t){return null==t&&(t=this.attr(e)),+v(this,e,t)},e.use=function(){var e,t=this.node.id;return t||(t=this.id,r(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?w(this.type,this.node.parentNode):w("use",this.node.parentNode),r(e.node,{"xlink:href":"#"+t}),e.original=this,e};var u=/\S+/g;e.addClass=function(e){var t,i,n,r,a=(e||"").match(u)||[],s=this.node,o=s.className.baseVal,l=o.match(u)||[];if(a.length){for(t=0;n=a[t++];)i=l.indexOf(n),~i||l.push(n);r=l.join(" "),o!=r&&(s.className.baseVal=r)}return this},e.removeClass=function(e){var t,i,n,r,a=(e||"").match(u)||[],s=this.node,o=s.className.baseVal,l=o.match(u)||[];if(l.length){for(t=0;n=a[t++];)i=l.indexOf(n),~i&&l.splice(i,1);r=l.join(" "),o!=r&&(s.className.baseVal=r)}return this},e.hasClass=function(e){var t=this.node,i=t.className.baseVal,n=i.match(u)||[];return!!~n.indexOf(e)},e.toggleClass=function(e,t){if(null!=t)return t?this.addClass(e):this.removeClass(e);var i,n,r,a,s=(e||"").match(u)||[],o=this.node,l=o.className.baseVal,c=l.match(u)||[];for(i=0;r=s[i++];)n=c.indexOf(r),~n?c.splice(n,1):c.push(r);return a=c.join(" "),l!=a&&(o.className.baseVal=a),this},e.clone=function(){var e=_(this.node.cloneNode(!0));return r(e.node,"id")&&r(e.node,{id:e.id}),s(e),e.insertAfter(this),e},e.toDefs=function(){var e=m(this);return e.appendChild(this.node),this},e.pattern=e.toPattern=function(e,t,i,n){var s=w("pattern",m(this));return null==e&&(e=this.getBBox()),a(e,"object")&&"x"in e&&(t=e.y,i=e.width,n=e.height,e=e.x),r(s.node,{x:e,y:t,width:i,height:n,patternUnits:"userSpaceOnUse",id:s.id,viewBox:[e,t,i,n].join(" ")}),s.node.appendChild(this.node),s},e.marker=function(e,t,i,n,s,o){var l=w("marker",m(this));return null==e&&(e=this.getBBox()),a(e,"object")&&"x"in e&&(t=e.y,i=e.width,n=e.height,s=e.refX||e.cx,o=e.refY||e.cy,e=e.x),r(l.node,{viewBox:[e,t,i,n].join(I),markerWidth:i,markerHeight:n,orient:"auto",refX:s||0,refY:o||0,id:l.id}),l.node.appendChild(this.node),l};var p=function(e,t,n,r){"function"!=typeof n||n.length||(r=n,n=i.linear),this.attr=e,this.dur=t,n&&(this.easing=n),r&&(this.callback=r)};n._.Animation=p,n.animation=function(e,t,i,n){return new p(e,t,i,n)},e.inAnim=function(){var e=this,t=[];for(var i in e.anims)e.anims[S](i)&&!function(e){t.push({anim:new p(e._attrs,e.dur,e.easing,e._callback),mina:e,curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[i]);return t},n.animate=function(e,n,r,a,s,o){"function"!=typeof s||s.length||(o=s,s=i.linear);var l=i.time(),c=i(e,n,l,l+a,i.time,r,s);return o&&t.once("mina.finish."+c.id,o),c},e.stop=function(){for(var e=this.inAnim(),t=0,i=e.length;i>t;t++)e[t].stop();return this},e.animate=function(e,n,r,s){"function"!=typeof r||r.length||(s=r,r=i.linear),e instanceof p&&(s=e.callback,r=e.easing,n=r.dur,e=e.attr);var l,c,u,d,h=[],f=[],m={},y=this;for(var g in e)if(e[S](g)){y.equal?(d=y.equal(g,E(e[g])),l=d.from,c=d.to,u=d.f):(l=+y.attr(g),c=+e[g]);var v=a(l,"array")?l.length:1;m[g]=o(h.length,h.length+v,u),h=h.concat(l),f=f.concat(c)}var b=i.time(),x=i(h,f,b,b+n,i.time,function(e){var t={};for(var i in m)m[S](i)&&(t[i]=m[i](e));y.attr(t)},r);return y.anims[x.id]=x,x._attrs=e,x._callback=s,t("snap.animcreated."+y.id,x),t.once("mina.finish."+x.id,function(){delete y.anims[x.id],s&&s.call(y)}),t.once("mina.stop."+x.id,function(){delete y.anims[x.id]}),y};var d={};e.data=function(e,i){var r=d[this.id]=d[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,r,null),r;if(1==arguments.length){if(n.is(e,"object")){for(var a in e)e[S](a)&&this.data(a,e[a]);return this}return t("snap.data.get."+this.id,this,r[e],e),r[e]}return r[e]=i,t("snap.data.set."+this.id,this,i,e),this},e.removeData=function(e){return null==e?d[this.id]={}:d[this.id]&&delete d[this.id][e],this},e.outerSVG=e.toString=l(1),e.innerSVG=l()}(x.prototype),n.parse=function(e){var t=C.doc.createDocumentFragment(),i=!0,n=C.doc.createElement("div");if(e=E(e),e.match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",i=!1),n.innerHTML=e,e=n.getElementsByTagName("svg")[0])if(i)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return n.innerHTML=R,new T(t)},T.prototype.select=x.prototype.select,T.prototype.selectAll=x.prototype.selectAll,n.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=C.doc.createDocumentFragment(),i=0,r=e.length;r>i;i++){var a=e[i];a.node&&a.node.nodeType&&t.appendChild(a.node),a.nodeType&&t.appendChild(a),"string"==typeof a&&t.appendChild(n.parse(a).node)}return new T(t)},n._.make=w,n._.wrap=_,k.prototype.el=function(e,t){var i=w(e,this.node);return t&&i.attr(t),i},t.on("snap.util.getattr",function(){var e=t.nt();e=e.substring(e.lastIndexOf(".")+1);var i=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return at[S](i)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(i):r(this.node,e)});var at={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var i=t.nt(),n={};i=i.substring(i.lastIndexOf(".")+1),n[i]=e;var a=i.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),s=i.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});at[S](s)?this.node.style[a]=null==e?R:e:r(this.node,n)}),function(){}(k.prototype),n.ajax=function(e,i,n,r){var s=new XMLHttpRequest,o=W();if(s){if(a(i,"function"))r=n,n=i,i=null;else if(a(i,"object")){var l=[];for(var c in i)i.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(i[c]));i=l.join("&")}return s.open(i?"POST":"GET",e,!0),i&&(s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-type","application/x-www-form-urlencoded")),n&&(t.once("snap.ajax."+o+".0",n),t.once("snap.ajax."+o+".200",n),t.once("snap.ajax."+o+".304",n)),s.onreadystatechange=function(){4==s.readyState&&t("snap.ajax."+o+"."+s.status,r,s)},4==s.readyState?s:(s.send(i),s)}},n.load=function(e,t,i){n.ajax(e,function(e){var r=n.parse(e.responseText);i?t.call(i,r):t(r)})};var st=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,n=i.body,r=i.documentElement,a=r.clientTop||n.clientTop||0,s=r.clientLeft||n.clientLeft||0,o=t.top+(g.win.pageYOffset||r.scrollTop||n.scrollTop)-a,l=t.left+(g.win.pageXOffset||r.scrollLeft||n.scrollLeft)-s;return{y:o,x:l}};return n.getElementByPoint=function(e,t){var i=this,n=(i.canvas,C.doc.elementFromPoint(e,t));if(C.win.opera&&"svg"==n.tagName){var r=st(n),a=n.createSVGRect();a.x=e-r.x,a.y=t-r.y,a.width=a.height=1;var s=n.getIntersectionList(a,null);s.length&&(n=s[s.length-1])}return n?_(n):null},n.plugin=function(e){e(n,x,k,C,T)},C.win.Snap=n,n}();return n.plugin(function(e){function t(e,t,n,r,a,s){return null==t&&"[object SVGMatrix]"==i.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+a,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var i=Object.prototype.toString,n=String,r=Math,a="";!function(i){function s(e){return e[0]*e[0]+e[1]*e[1]}function o(e){var t=r.sqrt(s(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}i.add=function(e,i,n,r,a,s){var o,l,c,u,p=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[e,n,a],[i,r,s],[0,0,1]];for(e&&e instanceof t&&(h=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),o=0;3>o;o++)for(l=0;3>l;l++){for(u=0,c=0;3>c;c++)u+=d[o][c]*h[c][l];p[o][l]=u}return this.a=p[0][0],this.b=p[1][0],this.c=p[0][1],this.d=p[1][1],this.e=p[0][2],this.f=p[1][2],this},i.invert=function(){var e=this,i=e.a*e.d-e.b*e.c;return new t(e.d/i,-e.b/i,-e.c/i,e.a/i,(e.c*e.f-e.d*e.e)/i,(e.b*e.e-e.a*e.f)/i)},i.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},i.translate=function(e,t){return this.add(1,0,0,1,e,t)},i.scale=function(e,t,i,n){return null==t&&(t=e),(i||n)&&this.add(1,0,0,1,i,n),this.add(e,0,0,t,0,0),(i||n)&&this.add(1,0,0,1,-i,-n),this},i.rotate=function(t,i,n){t=e.rad(t),i=i||0,n=n||0;var a=+r.cos(t).toFixed(9),s=+r.sin(t).toFixed(9);return this.add(a,s,-s,a,i,n),this.add(1,0,0,1,-i,-n)},i.x=function(e,t){return e*this.a+t*this.c+this.e},i.y=function(e,t){return e*this.b+t*this.d+this.f},i.get=function(e){return+this[n.fromCharCode(97+e)].toFixed(4)},i.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},i.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},i.determinant=function(){return this.a*this.d-this.b*this.c},i.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=r.sqrt(s(i[0])),o(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=r.sqrt(s(i[1])),o(i[1]),t.shear/=t.scaley,this.determinant()<0&&(t.scalex=-t.scalex);var n=-i[0][1],a=i[1][1];return 0>a?(t.rotate=e.deg(r.acos(a)),0>n&&(t.rotate=360-t.rotate)):t.rotate=e.deg(r.asin(n)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},i.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:a)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:a)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:a))}}(t.prototype),e.Matrix=t,e.matrix=function(e,i,n,r,a,s){return new t(e,i,n,r,a,s)}}),n.plugin(function(e,i,n,r,a){function s(n){return function(r){if(t.stop(),r instanceof a&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,h(this).appendChild(r),r=p(r)),r instanceof i)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||m(r.node,{id:r.id});var s=y(r.node.id)}else s=r.attr(n);else if(s=e.color(r),s.error){var o=e(h(this).ownerSVGElement).gradient(r);o?(o.node.id||m(o.node,{id:o.id}),s=y(o.node.id)):s=r}else s=g(s);var l={};l[n]=s,m(this.node,l),this.node.style[n]=b}}function o(e){t.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function l(e){for(var t=[],i=e.childNodes,n=0,r=i.length;r>n;n++){var a=i[n];3==a.nodeType&&t.push(a.nodeValue),"tspan"==a.tagName&&t.push(1==a.childNodes.length&&3==a.firstChild.nodeType?a.firstChild.nodeValue:l(a))}return t}function c(){return t.stop(),this.node.style.fontSize}var u=e._.make,p=e._.wrap,d=e.is,h=e._.getSomeDefs,f=/^url\(#?([^)]+)\)$/,m=e._.$,y=e.url,g=String,v=e._.separator,b="";t.on("snap.util.attr.mask",function(e){if(e instanceof i||e instanceof a){if(t.stop(),e instanceof a&&1==e.node.childNodes.length&&(e=e.node.firstChild,h(this).appendChild(e),e=p(e)),"mask"==e.type)var n=e;else n=u("mask",h(this)),n.node.appendChild(e.node);!n.node.id&&m(n.node,{id:n.id}),m(this.node,{mask:y(n.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof i||e instanceof a){if(t.stop(),"clipPath"==e.type)var n=e;else n=u("clipPath",h(this)),n.node.appendChild(e.node),!n.node.id&&m(n.node,{id:n.id});m(this.node,{"clip-path":y(n.id)})}}),t.on("snap.util.attr.fill",s("fill")),t.on("snap.util.attr.stroke",s("stroke"));var x=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(e){e=g(e);var t=e.match(x);if(!t)return null;var i=t[1],n=t[2],r=t[3];return n=n.split(/\s*,\s*/).map(function(e){return+e==e?+e:e}),1==n.length&&0==n[0]&&(n=[]),r=r.split("-"),r=r.map(function(e){e=e.split(":");var t={color:e[0]};return e[1]&&(t.offset=parseFloat(e[1])),t}),{type:i,params:n,stops:r}}),t.on("snap.util.attr.d",function(i){t.stop(),d(i,"array")&&d(i[0],"array")&&(i=e.path.toString.call(i)),i=g(i),i.match(/[ruo]/i)&&(i=e.path.toAbsolute(i)),m(this.node,{d:i})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=g(e);for(var i=r.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(i)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.class",function(e){t.stop(),this.node.className.baseVal=e})(-1),t.on("snap.util.attr.viewBox",function(e){var i;i=d(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):d(e,"array")?e.join(" "):e,m(this.node,{viewBox:i}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),m(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var n,r,a;if(!e&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);return r.remove(),void delete this.textPath}if(d(e,"string")){var s=h(this),o=p(s.parentNode).path(e);s.appendChild(o.node),n=o.id,o.attr({id:n})}else e=p(e),e instanceof i&&(n=e.attr("id"),n||(n=e.id,e.attr({id:n})));if(n)if(r=this.textPath,a=this.node,r)r.attr({"xlink:href":"#"+n});else{for(r=m("textPath",{"xlink:href":"#"+n});a.firstChild;)r.appendChild(a.firstChild);a.appendChild(r),this.textPath=p(r)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var i=this.node,n=function(e){var t=m("tspan");if(d(e,"array"))for(var i=0;i<e.length;i++)t.appendChild(n(e[i]));else t.appendChild(r.doc.createTextNode(e));return t.normalize&&t.normalize(),t};i.firstChild;)i.removeChild(i.firstChild);for(var a=n(e);a.firstChild;)i.appendChild(a.firstChild)}t.stop()})(-1),t.on("snap.util.attr.fontSize",o)(-1),t.on("snap.util.attr.font-size",o)(-1),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function i(i){return function(){t.stop();var n=r.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+i);return"none"==n?n:e(r.doc.getElementById(n.match(f)[1]))}}function n(e){return function(i){t.stop();var n="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""==i||!i)return void(this.node.style[n]="none");if("marker"==i.type){var r=i.node.id;return r||m(i.node,{id:i.id}),void(this.node.style[n]=y(r))}}}t.on("snap.util.getattr.marker-end",i("end"))(-1),t.on("snap.util.getattr.markerEnd",i("end"))(-1),t.on("snap.util.getattr.marker-start",i("start"))(-1),t.on("snap.util.getattr.markerStart",i("start"))(-1),t.on("snap.util.getattr.marker-mid",i("mid"))(-1),t.on("snap.util.getattr.markerMid",i("mid"))(-1),t.on("snap.util.attr.marker-end",n("end"))(-1),t.on("snap.util.attr.markerEnd",n("end"))(-1),t.on("snap.util.attr.marker-start",n("start"))(-1),t.on("snap.util.attr.markerStart",n("start"))(-1),t.on("snap.util.attr.marker-mid",n("mid"))(-1),t.on("snap.util.attr.markerMid",n("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){return"rect"==this.type&&m(this.node,"rx")==m(this.node,"ry")?(t.stop(),m(this.node,"rx")):void 0})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=l(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var i=m(this.node,"viewBox");return i?(i=i.split(v),e._.box(+i[0],+i[1],+i[2],+i[3])):void 0})(-1),t.on("snap.util.getattr.points",function(){var e=m(this.node,"points");return t.stop(),e?e.split(v):void 0})(-1),t.on("snap.util.getattr.path",function(){var e=m(this.node,"d");return t.stop(),e})(-1),t.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),t.on("snap.util.getattr.fontSize",c)(-1),t.on("snap.util.getattr.font-size",c)(-1)}),n.plugin(function(){function e(e){return e}function i(e){return function(t){return+t.toFixed(3)+e}}var n={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},r=String,a=/[a-z]+$/i,s=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;t.on("snap.util.attr",function(e){var i=r(e).match(s);if(i){var o=t.nt(),l=o.substring(o.lastIndexOf(".")+1),c=this.attr(l),u={};t.stop();var p=i[3]||"",d=c.match(a),h=n[i[1]];if(d&&d==p?e=h(parseFloat(c),+i[2]):(c=this.asPX(l),e=h(this.asPX(l),this.asPX(l,i[2]+p))),isNaN(c)||isNaN(e))return;u[l]=e,this.attr(u)}})(-10),t.on("snap.util.equal",function(o,l){var c=r(this.attr(o)||""),u=r(l).match(s);if(u){t.stop();var p=u[3]||"",d=c.match(a),h=n[u[1]];return d&&d==p?{from:parseFloat(c),to:h(parseFloat(c),+u[2]),f:i(d)}:(c=this.asPX(o),{from:c,to:h(c,this.asPX(o,u[2]+p)),f:e})}})(-10)}),n.plugin(function(e,i,n,r){var a=n.prototype,s=e.is;a.rect=function(e,t,i,n,r,a){var o;return null==a&&(a=r),s(e,"object")&&"[object Object]"==e?o=e:null!=e&&(o={x:e,y:t,width:i,height:n},null!=r&&(o.rx=r,o.ry=a)),this.el("rect",o)},a.circle=function(e,t,i){var n;return s(e,"object")&&"[object Object]"==e?n=e:null!=e&&(n={cx:e,cy:t,r:i}),this.el("circle",n)};var o=function(){function e(){this.parentNode.removeChild(this)}return function(t,i){var n=r.doc.createElement("img"),a=r.doc.body;n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){i.call(n),n.onload=n.onerror=null,a.removeChild(n)},n.onerror=e,a.appendChild(n),n.src=t}}();a.image=function(t,i,n,r,a){var l=this.el("image");if(s(t,"object")&&"src"in t)l.attr(t);else if(null!=t){var c={"xlink:href":t,preserveAspectRatio:"none"};null!=i&&null!=n&&(c.x=i,c.y=n),null!=r&&null!=a?(c.width=r,c.height=a):o(t,function(){e._.$(l.node,{width:this.offsetWidth,height:this.offsetHeight})}),e._.$(l.node,c)}return l},a.ellipse=function(e,t,i,n){var r;return s(e,"object")&&"[object Object]"==e?r=e:null!=e&&(r={cx:e,cy:t,rx:i,ry:n}),this.el("ellipse",r)},a.path=function(e){var t;return s(e,"object")&&!s(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},a.group=a.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},a.svg=function(e,t,i,n,r,a,o,l){var c={};return s(e,"object")&&null==t?c=e:(null!=e&&(c.x=e),null!=t&&(c.y=t),null!=i&&(c.width=i),null!=n&&(c.height=n),null!=r&&null!=a&&null!=o&&null!=l&&(c.viewBox=[r,a,o,l])),this.el("svg",c)},a.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},a.ptrn=function(e,t,i,n,r,a,o,l){if(s(e,"object"))var c=e;else arguments.length?(c={},null!=e&&(c.x=e),null!=t&&(c.y=t),null!=i&&(c.width=i),null!=n&&(c.height=n),null!=r&&null!=a&&null!=o&&null!=l&&(c.viewBox=[r,a,o,l])):c={patternUnits:"userSpaceOnUse"};return this.el("pattern",c)},a.use=function(e){if(null!=e){{make("use",this.node)}return e instanceof i&&(e.attr("id")||e.attr({id:ID()}),e=e.attr("id")),this.el("use",{"xlink:href":e})}return i.prototype.use.call(this)},a.text=function(e,t,i){var n={};return s(e,"object")?n=e:null!=e&&(n={x:e,y:t,text:i||""}),this.el("text",n)},a.line=function(e,t,i,n){var r={};return s(e,"object")?r=e:null!=e&&(r={x1:e,x2:i,y1:t,y2:n}),this.el("line",r)},a.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return s(e,"object")&&!s(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},a.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return s(e,"object")&&!s(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},function(){function i(){return this.selectAll("stop")}function n(t,i){var n=c("stop"),r={offset:+i+"%"};return t=e.color(t),r["stop-color"]=t.hex,t.opacity<1&&(r["stop-opacity"]=t.opacity),c(n,r),this.node.appendChild(n),this}function r(){if("linearGradient"==this.type){var t=c(this.node,"x1")||0,i=c(this.node,"x2")||1,n=c(this.node,"y1")||0,r=c(this.node,"y2")||0;return e._.box(t,n,math.abs(i-t),math.abs(r-n))}var a=this.node.cx||.5,s=this.node.cy||.5,o=this.node.r||0;return e._.box(a-o,s-o,2*o,2*o)}function s(e,i){function n(e,t){for(var i=(t-p)/(e-d),n=d;e>n;n++)s[n].offset=+(+p+i*(n-d)).toFixed(2);d=e,p=t}var r,a=t("snap.util.grad.parse",null,i).firstDefined();if(!a)return null;a.params.unshift(e),r="l"==a.type.toLowerCase()?o.apply(0,a.params):l.apply(0,a.params),a.type!=a.type.toLowerCase()&&c(r.node,{gradientUnits:"userSpaceOnUse"});var s=a.stops,u=s.length,p=0,d=0;u--;for(var h=0;u>h;h++)"offset"in s[h]&&n(h,s[h].offset);for(s[u].offset=s[u].offset||100,n(u,s[u].offset),h=0;u>=h;h++){var f=s[h];r.addStop(f.color,f.offset)}return r}function o(t,a,s,o,l){var u=e._.make("linearGradient",t);return u.stops=i,u.addStop=n,u.getBBox=r,null!=a&&c(u.node,{x1:a,y1:s,x2:o,y2:l}),u}function l(t,a,s,o,l,u){var p=e._.make("radialGradient",t);return p.stops=i,p.addStop=n,p.getBBox=r,null!=a&&c(p.node,{cx:a,cy:s,r:o}),null!=l&&null!=u&&c(p.node,{fx:l,fy:u}),p}var c=e._.$;a.gradient=function(e){return s(this.defs,e)},a.gradientLinear=function(e,t,i,n){return o(this.defs,e,t,i,n)},a.gradientRadial=function(e,t,i,n,r){return l(this.defs,e,t,i,n,r)},a.toString=function(){var t,i=this.node.ownerDocument,n=i.createDocumentFragment(),r=i.createElement("div"),a=this.node.cloneNode(!0);return n.appendChild(r),r.appendChild(a),e._.$(a,{xmlns:"http://www.w3.org/2000/svg"}),t=r.innerHTML,n.removeChild(n.firstChild),t},a.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):a.clear.call({node:t}),t=e}}()}),n.plugin(function(e,t){function i(e){var t=i.ps=i.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var i in t)t[I](i)&&i!=e&&(t[i].sleep--,!t[i].sleep&&delete t[i])}),t[e]}function n(e,t,i,n){return null==e&&(e=t=i=n=0),null==t&&(t=e.y,i=e.width,n=e.height,e=e.x),{x:e,y:t,width:i,w:i,height:n,h:n,x2:e+i,y2:t+n,cx:e+i/2,cy:t+n/2,r1:F.min(i,n)/2,r2:F.max(i,n)/2,r0:F.sqrt(i*i+n*n)/2,path:w(e,t,i,n),vb:[e,t,i,n].join(" ")}}function r(){return this.join(",").replace(L,"$1")}function a(e){var t=R(e);return t.toString=r,t}function s(e,t,i,n,r,a,s,o,c){return null==c?h(e,t,i,n,r,a,s,o):l(e,t,i,n,r,a,s,o,f(e,t,i,n,r,a,s,o,c))}function o(i,n){function r(e){return+(+e).toFixed(3)}return e._.cacher(function(e,a,o){e instanceof t&&(e=e.attr("d")),e=j(e);for(var c,u,p,d,h,f="",m={},y=0,g=0,v=e.length;v>g;g++){if(p=e[g],"M"==p[0])c=+p[1],u=+p[2];else{if(d=s(c,u,p[1],p[2],p[3],p[4],p[5],p[6]),y+d>a){if(n&&!m.start){if(h=s(c,u,p[1],p[2],p[3],p[4],p[5],p[6],a-y),f+=["C"+r(h.start.x),r(h.start.y),r(h.m.x),r(h.m.y),r(h.x),r(h.y)],o)return f;m.start=f,f=["M"+r(h.x),r(h.y)+"C"+r(h.n.x),r(h.n.y),r(h.end.x),r(h.end.y),r(p[5]),r(p[6])].join(),y+=d,c=+p[5],u=+p[6];continue}if(!i&&!n)return h=s(c,u,p[1],p[2],p[3],p[4],p[5],p[6],a-y)}y+=d,c=+p[5],u=+p[6]}f+=p.shift()+p}return m.end=f,h=i?y:n?m:l(c,u,p[0],p[1],p[2],p[3],p[4],p[5],1)},null,e._.clone)}function l(e,t,i,n,r,a,s,o,l){var c=1-l,u=U(c,3),p=U(c,2),d=l*l,h=d*l,f=u*e+3*p*l*i+3*c*l*l*r+h*s,m=u*t+3*p*l*n+3*c*l*l*a+h*o,y=e+2*l*(i-e)+d*(r-2*i+e),g=t+2*l*(n-t)+d*(a-2*n+t),v=i+2*l*(r-i)+d*(s-2*r+i),b=n+2*l*(a-n)+d*(o-2*a+n),x=c*e+l*i,T=c*t+l*n,w=c*r+l*s,k=c*a+l*o,_=90-180*F.atan2(y-v,g-b)/D;return{x:f,y:m,m:{x:y,y:g},n:{x:v,y:b},start:{x:x,y:T},end:{x:w,y:k},alpha:_}}function c(t,i,r,a,s,o,l,c){e.is(t,"array")||(t=[t,i,r,a,s,o,l,c]);var u=A.apply(null,t);return n(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function u(e,t,i){return t>=e.x&&t<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function p(e,t){return e=n(e),t=n(t),u(t,e.x,e.y)||u(t,e.x2,e.y)||u(t,e.x,e.y2)||u(t,e.x2,e.y2)||u(e,t.x,t.y)||u(e,t.x2,t.y)||u(e,t.x,t.y2)||u(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function d(e,t,i,n,r){var a=-3*t+9*i-9*n+3*r,s=e*a+6*t-12*i+6*n;return e*s-3*t+3*i}function h(e,t,i,n,r,a,s,o,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var c=l/2,u=12,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,m=0;u>m;m++){var y=c*p[m]+c,g=d(y,e,i,r,s),v=d(y,t,n,a,o),b=g*g+v*v;f+=h[m]*F.sqrt(b)}return c*f}function f(e,t,i,n,r,a,s,o,l){if(!(0>l||h(e,t,i,n,r,a,s,o)<l)){var c,u=1,p=u/2,d=u-p,f=.01;for(c=h(e,t,i,n,r,a,s,o,d);V(c-l)>f;)p/=2,d+=(l>c?1:-1)*p,c=h(e,t,i,n,r,a,s,o,d);return d}}function m(e,t,i,n,r,a,s,o){if(!(q(e,i)<B(r,s)||B(e,i)>q(r,s)||q(t,n)<B(a,o)||B(t,n)>q(a,o))){var l=(e*n-t*i)*(r-s)-(e-i)*(r*o-a*s),c=(e*n-t*i)*(a-o)-(t-n)*(r*o-a*s),u=(e-i)*(a-o)-(t-n)*(r-s);if(u){var p=l/u,d=c/u,h=+p.toFixed(2),f=+d.toFixed(2);if(!(h<+B(e,i).toFixed(2)||h>+q(e,i).toFixed(2)||h<+B(r,s).toFixed(2)||h>+q(r,s).toFixed(2)||f<+B(t,n).toFixed(2)||f>+q(t,n).toFixed(2)||f<+B(a,o).toFixed(2)||f>+q(a,o).toFixed(2)))return{x:p,y:d}}}}function y(e,t,i){var n=c(e),r=c(t);if(!p(n,r))return i?0:[];for(var a=h.apply(0,e),s=h.apply(0,t),o=~~(a/8),u=~~(s/8),d=[],f=[],y={},g=i?0:[],v=0;o+1>v;v++){var b=l.apply(0,e.concat(v/o));d.push({x:b.x,y:b.y,t:v/o})}for(v=0;u+1>v;v++)b=l.apply(0,t.concat(v/u)),f.push({x:b.x,y:b.y,t:v/u});for(v=0;o>v;v++)for(var x=0;u>x;x++){var T=d[v],w=d[v+1],k=f[x],_=f[x+1],C=V(w.x-T.x)<.001?"y":"x",S=V(_.x-k.x)<.001?"y":"x",E=m(T.x,T.y,w.x,w.y,k.x,k.y,_.x,_.y);if(E){if(y[E.x.toFixed(4)]==E.y.toFixed(4))continue;y[E.x.toFixed(4)]=E.y.toFixed(4);var z=T.t+V((E[C]-T[C])/(w[C]-T[C]))*(w.t-T.t),A=k.t+V((E[S]-k[S])/(_[S]-k[S]))*(_.t-k.t);z>=0&&1>=z&&A>=0&&1>=A&&(i?g++:g.push({x:E.x,y:E.y,t1:z,t2:A}))}}return g}function g(e,t){return b(e,t)}function v(e,t){return b(e,t,1)}function b(e,t,i){e=j(e),t=j(t);for(var n,r,a,s,o,l,c,u,p,d,h=i?0:[],f=0,m=e.length;m>f;f++){var g=e[f];if("M"==g[0])n=o=g[1],r=l=g[2];else{"C"==g[0]?(p=[n,r].concat(g.slice(1)),n=p[6],r=p[7]):(p=[n,r,n,r,o,l,o,l],n=o,r=l);for(var v=0,b=t.length;b>v;v++){var x=t[v];if("M"==x[0])a=c=x[1],s=u=x[2];else{"C"==x[0]?(d=[a,s].concat(x.slice(1)),a=d[6],s=d[7]):(d=[a,s,a,s,c,u,c,u],a=c,s=u);var T=y(p,d,i);if(i)h+=T;else{for(var w=0,k=T.length;k>w;w++)T[w].segment1=f,T[w].segment2=v,T[w].bez1=p,T[w].bez2=d;h=h.concat(T)}}}}}return h}function x(e,t,i){var n=T(e);return u(n,t,i)&&b(e,[["M",t,i],["H",n.x2+10]],1)%2==1}function T(e){var t=i(e);if(t.bbox)return R(t.bbox);if(!e)return n();e=j(e);for(var r,a=0,s=0,o=[],l=[],c=0,u=e.length;u>c;c++)if(r=e[c],"M"==r[0])a=r[1],s=r[2],o.push(a),l.push(s);else{var p=A(a,s,r[1],r[2],r[3],r[4],r[5],r[6]);o=o.concat(p.min.x,p.max.x),l=l.concat(p.min.y,p.max.y),a=r[5],s=r[6]}var d=B.apply(0,o),h=B.apply(0,l),f=q.apply(0,o),m=q.apply(0,l),y=n(d,h,f-d,m-h);return t.bbox=R(y),y}function w(e,t,i,n,a){if(a)return[["M",+e+ +a,t],["l",i-2*a,0],["a",a,a,0,0,1,a,a],["l",0,n-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-i,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-n],["a",a,a,0,0,1,a,-a],["z"]];var s=[["M",e,t],["l",i,0],["l",0,n],["l",-i,0],["z"]];return s.toString=r,s}function k(e,t,i,n,a){if(null==a&&null==n&&(n=i),e=+e,t=+t,i=+i,n=+n,null!=a)var s=Math.PI/180,o=e+i*Math.cos(-n*s),l=e+i*Math.cos(-a*s),c=t+i*Math.sin(-n*s),u=t+i*Math.sin(-a*s),p=[["M",o,c],["A",i,i,0,+(a-n>180),0,l,u]];else p=[["M",e,t],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]];return p.toString=r,p}function _(t){var n=i(t),s=String.prototype.toLowerCase;if(n.rel)return a(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var o=[],l=0,c=0,u=0,p=0,d=0;"M"==t[0][0]&&(l=t[0][1],c=t[0][2],u=l,p=c,d++,o.push(["M",l,c]));for(var h=d,f=t.length;f>h;h++){var m=o[h]=[],y=t[h];if(y[0]!=s.call(y[0]))switch(m[0]=s.call(y[0]),m[0]){case"a":m[1]=y[1],m[2]=y[2],m[3]=y[3],m[4]=y[4],m[5]=y[5],m[6]=+(y[6]-l).toFixed(3),m[7]=+(y[7]-c).toFixed(3);break;case"v":m[1]=+(y[1]-c).toFixed(3);break;case"m":u=y[1],p=y[2];default:for(var g=1,v=y.length;v>g;g++)m[g]=+(y[g]-(g%2?l:c)).toFixed(3)}else{m=o[h]=[],"m"==y[0]&&(u=y[1]+l,p=y[2]+c);for(var b=0,x=y.length;x>b;b++)o[h][b]=y[b]}var T=o[h].length;switch(o[h][0]){case"z":l=u,c=p;break;case"h":l+=+o[h][T-1];break;case"v":c+=+o[h][T-1];break;default:l+=+o[h][T-2],c+=+o[h][T-1]}}return o.toString=r,n.rel=a(o),o}function C(t){var n=i(t);if(n.abs)return a(n.abs);if(P(t,"array")&&P(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var s,o=[],l=0,c=0,u=0,p=0,d=0;"M"==t[0][0]&&(l=+t[0][1],c=+t[0][2],u=l,p=c,d++,o[0]=["M",l,c]);for(var h,f,m=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),y=d,g=t.length;g>y;y++){if(o.push(h=[]),f=t[y],s=f[0],s!=s.toUpperCase())switch(h[0]=s.toUpperCase(),h[0]){case"A":h[1]=f[1],h[2]=f[2],h[3]=f[3],h[4]=f[4],h[5]=f[5],h[6]=+f[6]+l,h[7]=+f[7]+c;break;case"V":h[1]=+f[1]+c;break;case"H":h[1]=+f[1]+l;break;case"R":for(var v=[l,c].concat(f.slice(1)),b=2,x=v.length;x>b;b++)v[b]=+v[b]+l,v[++b]=+v[b]+c;o.pop(),o=o.concat(N(v,m));break;case"O":o.pop(),v=k(l,c,f[1],f[2]),v.push(v[0]),o=o.concat(v);break;case"U":o.pop(),o=o.concat(k(l,c,f[1],f[2],f[3])),h=["U"].concat(o[o.length-1].slice(-2));break;case"M":u=+f[1]+l,p=+f[2]+c;default:for(b=1,x=f.length;x>b;b++)h[b]=+f[b]+(b%2?l:c)}else if("R"==s)v=[l,c].concat(f.slice(1)),o.pop(),o=o.concat(N(v,m)),h=["R"].concat(f.slice(-2));
else if("O"==s)o.pop(),v=k(l,c,f[1],f[2]),v.push(v[0]),o=o.concat(v);else if("U"==s)o.pop(),o=o.concat(k(l,c,f[1],f[2],f[3])),h=["U"].concat(o[o.length-1].slice(-2));else for(var T=0,w=f.length;w>T;T++)h[T]=f[T];if(s=s.toUpperCase(),"O"!=s)switch(h[0]){case"Z":l=+u,c=+p;break;case"H":l=h[1];break;case"V":c=h[1];break;case"M":u=h[h.length-2],p=h[h.length-1];default:l=h[h.length-2],c=h[h.length-1]}}return o.toString=r,n.abs=a(o),o}function S(e,t,i,n){return[e,t,i,n,i,n]}function E(e,t,i,n,r,a){var s=1/3,o=2/3;return[s*e+o*i,s*t+o*n,s*r+o*i,s*a+o*n,r,a]}function z(t,i,n,r,a,s,o,l,c,u){var p,d=120*D/180,h=D/180*(+a||0),f=[],m=e._.cacher(function(e,t,i){var n=e*F.cos(i)-t*F.sin(i),r=e*F.sin(i)+t*F.cos(i);return{x:n,y:r}});if(u)_=u[0],C=u[1],w=u[2],k=u[3];else{p=m(t,i,-h),t=p.x,i=p.y,p=m(l,c,-h),l=p.x,c=p.y;var y=(F.cos(D/180*a),F.sin(D/180*a),(t-l)/2),g=(i-c)/2,v=y*y/(n*n)+g*g/(r*r);v>1&&(v=F.sqrt(v),n=v*n,r=v*r);var b=n*n,x=r*r,T=(s==o?-1:1)*F.sqrt(V((b*x-b*g*g-x*y*y)/(b*g*g+x*y*y))),w=T*n*g/r+(t+l)/2,k=T*-r*y/n+(i+c)/2,_=F.asin(((i-k)/r).toFixed(9)),C=F.asin(((c-k)/r).toFixed(9));_=w>t?D-_:_,C=w>l?D-C:C,0>_&&(_=2*D+_),0>C&&(C=2*D+C),o&&_>C&&(_-=2*D),!o&&C>_&&(C-=2*D)}var S=C-_;if(V(S)>d){var E=C,A=l,j=c;C=_+d*(o&&C>_?1:-1),l=w+n*F.cos(C),c=k+r*F.sin(C),f=z(l,c,n,r,a,0,o,A,j,[C,E,w,k])}S=C-_;var O=F.cos(_),N=F.sin(_),M=F.cos(C),P=F.sin(C),R=F.tan(S/4),I=4/3*n*R,L=4/3*r*R,$=[t,i],B=[t+I*N,i-L*O],q=[l+I*P,c-L*M],U=[l,c];if(B[0]=2*$[0]-B[0],B[1]=2*$[1]-B[1],u)return[B,q,U].concat(f);f=[B,q,U].concat(f).join().split(",");for(var H=[],G=0,W=f.length;W>G;G++)H[G]=G%2?m(f[G-1],f[G],h).y:m(f[G],f[G+1],h).x;return H}function A(e,t,i,n,r,a,s,o){for(var l,c,u,p,d,h,f,m,y=[],g=[[],[]],v=0;2>v;++v)if(0==v?(c=6*e-12*i+6*r,l=-3*e+9*i-9*r+3*s,u=3*i-3*e):(c=6*t-12*n+6*a,l=-3*t+9*n-9*a+3*o,u=3*n-3*t),V(l)<1e-12){if(V(c)<1e-12)continue;p=-u/c,p>0&&1>p&&y.push(p)}else f=c*c-4*u*l,m=F.sqrt(f),0>f||(d=(-c+m)/(2*l),d>0&&1>d&&y.push(d),h=(-c-m)/(2*l),h>0&&1>h&&y.push(h));for(var b,x=y.length,T=x;x--;)p=y[x],b=1-p,g[0][x]=b*b*b*e+3*b*b*p*i+3*b*p*p*r+p*p*p*s,g[1][x]=b*b*b*t+3*b*b*p*n+3*b*p*p*a+p*p*p*o;return g[0][T]=e,g[1][T]=t,g[0][T+1]=s,g[1][T+1]=o,g[0].length=g[1].length=T+2,{min:{x:B.apply(0,g[0]),y:B.apply(0,g[1])},max:{x:q.apply(0,g[0]),y:q.apply(0,g[1])}}}function j(e,t){var n=!t&&i(e);if(!t&&n.curve)return a(n.curve);for(var r=C(e),s=t&&C(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=(function(e,t,i){var n,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(z.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==i||"S"==i?(n=2*t.x-t.bx,r=2*t.y-t.by):(n=t.x,r=t.y),e=["C",n,r].concat(e.slice(1));break;case"T":"Q"==i||"T"==i?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(E(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(E(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(S(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(S(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(S(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(S(t.x,t.y,t.X,t.Y))}return e}),u=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)d[t]="A",s&&(h[t]="A"),e.splice(t++,0,["C"].concat(i.splice(0,6)));e.splice(t,1),g=q(r.length,s&&s.length||0)}},p=function(e,t,i,n,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",n.x,n.y]),i.bx=0,i.by=0,i.x=e[a][1],i.y=e[a][2],g=q(r.length,s&&s.length||0))},d=[],h=[],f="",m="",y=0,g=q(r.length,s&&s.length||0);g>y;y++){r[y]&&(f=r[y][0]),"C"!=f&&(d[y]=f,y&&(m=d[y-1])),r[y]=c(r[y],o,m),"A"!=d[y]&&"C"==f&&(d[y]="C"),u(r,y),s&&(s[y]&&(f=s[y][0]),"C"!=f&&(h[y]=f,y&&(m=h[y-1])),s[y]=c(s[y],l,m),"A"!=h[y]&&"C"==f&&(h[y]="C"),u(s,y)),p(r,s,o,l,y),p(s,r,l,o,y);var v=r[y],b=s&&s[y],x=v.length,T=s&&b.length;o.x=v[x-2],o.y=v[x-1],o.bx=$(v[x-4])||o.x,o.by=$(v[x-3])||o.y,l.bx=s&&($(b[T-4])||l.x),l.by=s&&($(b[T-3])||l.y),l.x=s&&b[T-2],l.y=s&&b[T-1]}return s||(n.curve=a(r)),s?[r,s]:r}function O(e,t){if(!t)return e;var i,n,r,a,s,o,l;for(e=j(e),r=0,s=e.length;s>r;r++)for(l=e[r],a=1,o=l.length;o>a;a+=2)i=t.x(l[a],l[a+1]),n=t.y(l[a],l[a+1]),l[a]=i,l[a+1]=n;return e}function N(e,t){for(var i=[],n=0,r=e.length;r-2*!t>n;n+=2){var a=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?r-4==n?a[3]={x:+e[0],y:+e[1]}:r-2==n&&(a[2]={x:+e[0],y:+e[1]},a[3]={x:+e[2],y:+e[3]}):a[0]={x:+e[r-2],y:+e[r-1]}:r-4==n?a[3]=a[2]:n||(a[0]={x:+e[n],y:+e[n+1]}),i.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return i}var M=t.prototype,P=e.is,R=e._.clone,I="hasOwnProperty",L=/,?([a-z]),?/gi,$=parseFloat,F=Math,D=F.PI,B=F.min,q=F.max,U=F.pow,V=F.abs,H=o(1),G=o(),W=o(0,1),X=e._unit2px,Y={path:function(e){return e.attr("path")},circle:function(e){var t=X(e);return k(t.cx,t.cy,t.r)},ellipse:function(e){var t=X(e);return k(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=X(e);return w(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=X(e);return w(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return w(t.x,t.y,t.width,t.height)}};e.path=i,e.path.getTotalLength=H,e.path.getPointAtLength=G,e.path.getSubpath=function(e,t,i){if(this.getTotalLength(e)-i<1e-6)return W(e,t).end;var n=W(e,i,1);return t?W(n,t).end:n},M.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},M.getPointAtLength=function(e){return G(this.attr("d"),e)},M.getSubpath=function(t,i){return e.path.getSubpath(this.attr("d"),t,i)},e._.box=n,e.path.findDotsAtSegment=l,e.path.bezierBBox=c,e.path.isPointInsideBBox=u,e.path.isBBoxIntersect=p,e.path.intersection=g,e.path.intersectionNumber=v,e.path.isPointInside=x,e.path.getBBox=T,e.path.get=Y,e.path.toRelative=_,e.path.toAbsolute=C,e.path.toCubic=j,e.path.map=O,e.path.toString=r,e.path.clone=a}),n.plugin(function(e){var n=Math.max,r=Math.min,a=function(e){if(this.items=[],this.bindings={},this.length=0,this.type="set",e)for(var t=0,i=e.length;i>t;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},s=a.prototype;s.push=function(){for(var e,t,i=0,n=arguments.length;n>i;i++)e=arguments[i],e&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},s.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},s.forEach=function(e,t){for(var i=0,n=this.items.length;n>i;i++)if(e.call(t,this.items[i],i)===!1)return this;return this},s.animate=function(n,r,a,s){"function"!=typeof a||a.length||(s=a,a=i.linear),n instanceof e._.Animation&&(s=n.callback,a=n.easing,r=a.dur,n=n.attr);var o=arguments;if(e.is(n,"array")&&e.is(o[o.length-1],"array"))var l=!0;var c,u=function(){c?this.b=c:c=this.b},p=0,d=s&&function(){p++==this.length&&s.call(this)};return this.forEach(function(e,i){t.once("snap.animcreated."+e.id,u),l?o[i]&&e.animate.apply(e,o[i]):e.animate(n,r,a,d)})},s.remove=function(){for(;this.length;)this.pop().remove();return this},s.bind=function(e,t,i){var n={};if("function"==typeof t)this.bindings[e]=t;else{var r=i||e;this.bindings[e]=function(e){n[r]=e,t.attr(n)}}return this},s.attr=function(e){var t={};for(var i in e)this.bindings[i]?this.bindings[i](e[i]):t[i]=e[i];for(var n=0,r=this.items.length;r>n;n++)this.items[n].attr(t);return this},s.clear=function(){for(;this.length;)this.pop()},s.splice=function(e,t){e=0>e?n(this.length+e,0):e,t=n(0,r(this.length-e,t));var i,s=[],o=[],l=[];for(i=2;i<arguments.length;i++)l.push(arguments[i]);for(i=0;t>i;i++)o.push(this[e+i]);for(;i<this.length-e;i++)s.push(this[e+i]);var c=l.length;for(i=0;i<c+s.length;i++)this.items[e+i]=this[e+i]=c>i?l[i]:s[i-c];for(i=this.items.length=this.length-=t-c;this[i];)delete this[i++];return new a(o)},s.exclude=function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},s.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},s.getBBox=function(){for(var e=[],t=[],i=[],a=[],s=this.items.length;s--;)if(!this.items[s].removed){var o=this.items[s].getBBox();e.push(o.x),t.push(o.y),i.push(o.x+o.width),a.push(o.y+o.height)}return e=r.apply(0,e),t=r.apply(0,t),i=n.apply(0,i),a=n.apply(0,a),{x:e,y:t,x2:i,y2:a,width:i-e,height:a-t,cx:e+(i-e)/2,cy:t+(a-t)/2}},s.clone=function(e){e=new a;for(var t=0,i=this.items.length;i>t;t++)e.push(this.items[t].clone());return e},s.toString=function(){return"Snaps set"},s.type="set",e.set=function(){var e=new a;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),n.plugin(function(e,i){function n(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function r(t,i,r){i=d(i).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],i=e.parseTransformString(i)||[];for(var a,s,o,u,p=Math.max(t.length,i.length),h=[],f=[],m=0;p>m;m++){if(o=t[m]||n(i[m]),u=i[m]||n(o),o[0]!=u[0]||"r"==o[0].toLowerCase()&&(o[2]!=u[2]||o[3]!=u[3])||"s"==o[0].toLowerCase()&&(o[3]!=u[3]||o[4]!=u[4])){t=e._.transform2matrix(t,r()),i=e._.transform2matrix(i,r()),h=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],f=[["m",i.a,i.b,i.c,i.d,i.e,i.f]];break}for(h[m]=[],f[m]=[],a=0,s=Math.max(o.length,u.length);s>a;a++)a in o&&(h[m][a]=o[a]),a in u&&(f[m][a]=u[a])}return{from:c(h),to:c(f),f:l(h)}}function a(e){return e}function s(e){return function(t){return+t.toFixed(3)+e}}function o(t){return e.rgb(t[0],t[1],t[2])}function l(e){var t,i,n,r,a,s,o=0,l=[];for(t=0,i=e.length;i>t;t++){for(a="[",s=['"'+e[t][0]+'"'],n=1,r=e[t].length;r>n;n++)s[n]="val["+o++ +"]";a+=s+"]",l[t]=a}return Function("val","return Snap.path.toString.call(["+l+"])")}function c(e){for(var t=[],i=0,n=e.length;n>i;i++)for(var r=1,a=e[i].length;a>r;r++)t.push(e[i][r]);return t}var u={},p=/[a-z]+$/i,d=String;u.stroke=u.fill="colour",i.prototype.equal=function(e,i){return t("snap.util.equal",this,e,i).firstDefined()},t.on("snap.util.equal",function(t,i){var n,h,f=d(this.attr(t)||""),m=this;if(f==+f&&i==+i)return{from:+f,to:+i,f:a};if("colour"==u[t])return n=e.color(f),h=e.color(i),{from:[n.r,n.g,n.b,n.opacity],to:[h.r,h.g,h.b,h.opacity],f:o};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return i instanceof e.Matrix&&(i=i.toTransformString()),e._.rgTransform.test(i)||(i=e._.svgTransform2string(i)),r(f,i,function(){return m.getBBox(1)});if("d"==t||"path"==t)return n=e.path.toCubic(f,i),{from:c(n[0]),to:c(n[1]),f:l(n[0])};if("points"==t)return n=d(f).split(e._.separator),h=d(i).split(e._.separator),{from:n,to:h,f:function(e){return e}};aUnit=f.match(p);var y=d(i).match(p);return aUnit&&aUnit==y?{from:parseFloat(f),to:parseFloat(i),f:s(aUnit)}:{from:this.asPX(t),to:this.asPX(t,i),f:a}})}),n.plugin(function(e,i,n,r){for(var a=i.prototype,s="hasOwnProperty",o=("createTouch"in r.doc),l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},u=(function(e,t){var i="y"==e?"scrollTop":"scrollLeft",n=t&&t.node?t.node.ownerDocument:r.doc;return n[i in n.documentElement?"documentElement":"body"][i]}),p=function(){this.returnValue=!1},d=function(){return this.originalEvent.preventDefault()},h=function(){this.cancelBubble=!0},f=function(){return this.originalEvent.stopPropagation()},m=function(){return r.doc.addEventListener?function(e,t,i,n){var r=o&&c[t]?c[t]:t,a=function(r){var a=u("y",n),l=u("x",n);if(o&&c[s](t))for(var p=0,h=r.targetTouches&&r.targetTouches.length;h>p;p++)if(r.targetTouches[p].target==e||e.contains(r.targetTouches[p].target)){var m=r;r=r.targetTouches[p],r.originalEvent=m,r.preventDefault=d,r.stopPropagation=f;break}var y=r.clientX+l,g=r.clientY+a;return i.call(n,r,y,g)};return t!==r&&e.addEventListener(t,a,!1),e.addEventListener(r,a,!1),function(){return t!==r&&e.removeEventListener(t,a,!1),e.removeEventListener(r,a,!1),!0}}:r.doc.attachEvent?function(e,t,i,n){var r=function(e){e=e||n.node.ownerDocument.window.event;var t=u("y",n),r=u("x",n),a=e.clientX+r,s=e.clientY+t;return e.preventDefault=e.preventDefault||p,e.stopPropagation=e.stopPropagation||h,i.call(n,e,a,s)};e.attachEvent("on"+t,r);var a=function(){return e.detachEvent("on"+t,r),!0};return a}:void 0}(),y=[],g=function(e){for(var i,n=e.clientX,r=e.clientY,a=u("y"),s=u("x"),l=y.length;l--;){if(i=y[l],o){for(var c,p=e.touches&&e.touches.length;p--;)if(c=e.touches[p],c.identifier==i.el._drag.id||i.el.node.contains(c.target)){n=c.clientX,r=c.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();{var d=i.el.node;d.nextSibling,d.parentNode,d.style.display}n+=s,r+=a,t("snap.drag.move."+i.el.id,i.move_scope||i.el,n-i.el._drag.x,r-i.el._drag.y,n,r,e)}},v=function(i){e.unmousemove(g).unmouseup(v);for(var n,r=y.length;r--;)n=y[r],n.el._drag={},t("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,i);y=[]},b=l.length;b--;)!function(t){e[t]=a[t]=function(i,n){return e.is(i,"function")&&(this.events=this.events||[],this.events.push({name:t,f:i,unbind:m(this.node||document,t,i,n||this)})),this},e["un"+t]=a["un"+t]=function(e){for(var i=this.events||[],n=i.length;n--;)if(i[n].name==t&&(i[n].f==e||!e))return i[n].unbind(),i.splice(n,1),!i.length&&delete this.events,this;return this}}(l[b]);a.hover=function(e,t,i,n){return this.mouseover(e,i).mouseout(t,n||i)},a.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var x=[];a.drag=function(i,n,r,a,s,o){function l(l,c,u){(l.originalEvent||l).preventDefault(),this._drag.x=c,this._drag.y=u,this._drag.id=l.identifier,!y.length&&e.mousemove(g).mouseup(v),y.push({el:this,move_scope:a,start_scope:s,end_scope:o}),n&&t.on("snap.drag.start."+this.id,n),i&&t.on("snap.drag.move."+this.id,i),r&&t.on("snap.drag.end."+this.id,r),t("snap.drag.start."+this.id,s||a||this,c,u,l)}if(!arguments.length){var c;return this.drag(function(e,t){this.attr({transform:c+(c?"T":"t")+[e,t]})},function(){c=this.transform().local})}return this._drag={},x.push({el:this,start:l}),this.mousedown(l),this},a.undrag=function(){for(var i=x.length;i--;)x[i].el==this&&(this.unmousedown(x[i].start),x.splice(i,1),t.unbind("snap.drag.*."+this.id));return!x.length&&e.unmousemove(g).unmouseup(v),this}}),n.plugin(function(e,i,n){var r=(i.prototype,n.prototype),a=/^\s*url\((.+)\)/,s=String,o=e._.$;e.filter={},r.filter=function(t){var n=this;"svg"!=n.type&&(n=n.paper);var r=e.parse(s(t)),a=e._.id(),l=(n.node.offsetWidth,n.node.offsetHeight,o("filter"));return o(l,{id:a,filterUnits:"userSpaceOnUse"}),l.appendChild(r.node),n.defs.appendChild(l),new i(l)},t.on("snap.util.getattr.filter",function(){t.stop();var i=o(this.node,"filter");if(i){var n=s(i).match(a);return n&&e.select(n[1])}}),t.on("snap.util.attr.filter",function(n){if(n instanceof i&&"filter"==n.type){t.stop();var r=n.node.id;r||(o(n.node,{id:n.id}),r=n.id),o(this.node,{filter:e.url(r)})}n&&"none"!=n||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,i){null==t&&(t=2);var n=null==i?t:[t,i];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:n})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,i,n,r,a){return"string"==typeof n&&(r=n,a=r,n=4),"string"!=typeof r&&(a=r,r="#000"),r=r||"#000",null==n&&(n=4),null==a&&(a=1),null==t&&(t=0,i=2),null==i&&(i=t),r=e.color(r),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:r,dx:t,dy:i,blur:n,opacity:a})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),n}),define("game/ShapeFactory",["jquery","underscore","snap"],function(e,t,i){var n={sizes:{small:90,medium:120,large:150},shapes:{circle:function(e,t){return e.circle(t.x,t.y,n.sizes[t.size])},square_sidedown:function(e,t){var i=.85,r=i*n.sizes[t.size];return e.rect(t.x-r,t.y-r,2*r,2*r)},square_edgedown:function(e,t){var i=t.x,r=t.y,a=n.sizes[t.size];return e.polygon(i,r+a,i-a,r,i,r-a,i+a,r)},triangle_sidedown:function(e,t){var i=t.x,r=t.y,a=n.sizes[t.size];return e.polygon(i-a,r+a,i,r-a,i+a,r+a)},triangle_edgedown:function(e,t){var i=t.x,r=t.y,a=n.sizes[t.size];return e.polygon(i,r+a,i-a,r-a,i+a,r-a)}}};return n.createShape=function(e,t,i){return n.shapes[t]?n.shapes[t](e,i):(console.error("unknown shape type: "+t),n.shapes.circle(e,i))},n.setCSSRules=function(){var e="medium",r=.85,a=" .shape_<%= classname %>{ background-image: url('data:image/svg+xml;utf8,<%= svgstring %>') !important}\n",s=2*n.sizes[e],o="";for(var l in n.shapes){{var c=new i(s/r,s/r);n.createShape(c,l,{x:s/(2*r),y:s/(2*r),size:e}).attr({fill:"#000000",opacity:.75})}o+=t.template(a,{classname:l,svgstring:c.toString()})}console.log(o)},n.randomizeShapes=function(e){var t,i=e.gameobjects;for(t=0;t<i.length;++t)console.log(i[t]);return e},n}),define("game/renderer/TapObjectRenderer",["jquery","underscore","Framework","game/ShapeFactory"],function(e,t,i,n){var r=i.Renderer.extend({startborder:-.5,endborder:0,borderradius:20,removeuntil:.5,removefrom:.4,startshow:-.8,endshow:0,visual_type:"circle",color_plain_fill:"#FFFFFF",color_plain_border:"#EEEEEE",color_tapped_fill:"#33CC33",color_tapped_border:"#FFFF66",color_missed_fill:"#CC0000",color_missed_border:"#CC0000",initialize:function(e){this.options=e},setSnapAttr:function(e){"undefined"==typeof this.snapobject&&this.createVisualElement(),"undefined"!=typeof this.snapobject&&this.snapobject.attr(e)},markMissed:function(){this.setSnapAttr({fill:this.color_missed_fill})},getStartTime:function(){return this.startshow+this.options.timestamp},createVisualElement:function(){this.snapobject=n.createShape(this.snap,this.options.shape.type,{x:this.options.x,y:this.options.y,size:this.options.shape.size}),this.snapobject.attr({fill:this.color_plain_fill,stroke:this.color_plain_border,strokeWidth:this.borderradius,opacity:0}),this.snapobject.touchend(this.controller.handleTap.bind(this.controller)),this.snapobject.click(this.controller.handleTap.bind(this.controller))},markHit:function(){this.setSnapAttr({fill:this.color_tapped_fill})},markUpcoming:function(e){this.setSnapAttr({strokeWidth:this.borderradius*e})},setOpacity:function(e){this.setSnapAttr({opacity:e})},getPercentage:function(e,t){var i=this.time/(t-e);return Math.abs(i)},render:function(e){return this.time=e-=this.options.timestamp,e>=this.startborder&&e<this.endborder&&this.markUpcoming(this.getPercentage(this.startborder,this.endborder)),e>=this.startshow&&e<this.endshow&&("undefined"===this.snapobject&&this.createVisualElement(),this.setOpacity(1-this.getPercentage(this.startshow,this.endshow))),e>=this.removefrom&&e<this.removeuntil&&this.setOpacity(1-this.getPercentage(this.removefrom,this.removeuntil)),e>=this.removeuntil?("undefined"!=typeof this.snapobject&&this.snapobject.remove(),!1):!0}});return r}),define("util/scripts",[],function(){!function(){for(var e=0,t=["ms","moz","webkit","o"],i=!(!window.performance||!window.performance.now),n=0,r=t.length;r>n&&!window.requestAnimationFrame;n+=1)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];if(window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),r=window.setTimeout(function(){t(i+n)},n);return e=i+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)}),!i){var a=window.requestAnimationFrame,s=+new Date;window.requestAnimationFrame=function(e,t){var i=function(t){var i=1e12>t?t:t-s;return e(i)};a(i,t)}}}(),function(){if(!window.performance||!window.performance.now){window.performance||(window.performance={});for(var e=["webkitNow","msNow","mozNow"],t=0;t<e.length;t++)if(window.performance[e[t]])return void(window.performance.now=window.performance[e[t]]);return Date.now?void(window.performance.now=function(){return Date.now()}):void(window.performance.now=function(){return+new Date})}}(),Date.now||(Date.now=function(){return(new Date).getTime()});var e={};return e.pickRandomObject=function(e){var t,i=0;for(var n in e)Math.random()<1/++i&&(t=n);return t},e}),define("game/controller/TapObject",["jquery","underscore","Framework","snap","util/analytics","game/ShapeFactory","game/renderer/TapObjectRenderer","util/scripts"],function(e,t,i,n,r,a,s){var o=i.GameObject.extend({initialize:function(e,t,i,n,r){this.game=e,this.timestamp=t,this.setRenderer(new s({snap:e.surface.getSnap(),controller:this,x:i,y:n,timestamp:t,shape:r}))},tapdelta:0/0,logic_enabled:!0,time_render:0/0,time_logic:0/0,tapped:!1,tapdiff:0/0,max_tapdiff:.2,debugtime:0/0,handleTap:function(){this.timestamp==this.debugtime&&console.info("allowed tap: "+this.logic_enabled),this.tapped||(this.tapped=!0,this.logic_enabled?Math.abs(this.getTimeDiff())<=this.max_tapdiff?this.markHit():this.markMissed():(console.log("TapObject was missed (too late) at "+Math.abs(Math.floor(100*this.time_logic))),r.trackAction("game","TapObject","missed (too late)",Math.abs(Math.floor(100*this.time_logic)))))},markHit:function(){this.tapdiff=this.time_logic,this.logic_enabled=!1,r.trackAction("game","TapObject","hit (too "+(this.tapdiff<0?"early":"late")+")",Math.abs(Math.floor(100*this.tapdiff))),console.log("TapObject was hit too "+(this.tapdiff<0?"early":"late")+" at "+Math.abs(Math.floor(100*this.tapdiff))),this.getRenderer().markHit()},markMissed:function(){this.logic_enabled=!1,this.time_logic<this.max_tapdiff&&(console.log("TapObject was missed (too early) at "+Math.abs(Math.floor(100*this.time_logic))),r.trackAction("game","TapObject","missed (too early)",Math.abs(Math.abs(Math.floor(100*this.time_logic))))),this.getRenderer().markMissed()},update:function(){this.logic_enabled&&(this.time_logic=this.getTimeDiff(),this.time_logic>=this.max_tapdiff&&this.markMissed())},getTimeDiff:function(){return this.game.getTime()-this.timestamp},getHighScore:function(){if(isNaN(this.tapdiff))return 0;var e=Math.abs(this.tapdiff)-.05;return 0>=e?1:1-e/this.max_tapdiff}});return o}),define("game/controller/Game",["jquery","underscore","Framework","game/controller/TapObject"],function(e,t,i,n){var r=i.Controller.extend({updateintervall:null,stopped:!0,initialize:function(e){this.gameObjects=[],this.audiocontroller=e.audiocontroller,this.surface=e.surface;for(var t=e.level.toJSON(),i=0;i<t.gameObjects.length;i++){var r=t.gameObjects[i];switch(r.type){case"Tap":this.gameObjects.push(new n(this,r.tapTime,r.x,r.y,r.shape));break;default:console.error("undefined gameObject detected")}}},getTime:function(){return this.audiocontroller.getCurrentTime()},update:function(){if(!this.stopped)for(var e=0;e<this.gameObjects.length;e++)this.gameObjects[e].update(this.getTime())},updateView:function(){if(!this.stopped){for(var e=0;e<this.gameObjects.length;e++)this.gameObjects[e].render(this.getTime());requestAnimationFrame(this.updateView.bind(this))}},start:function(){this.stopped=!1,console.log("startet game"),this.updateinterval=setInterval(this.update.bind(this),1e3/60),this.updateView(this.getTime())},stop:function(){clearInterval(this.updateinterval),this.stopped=!0,console.log("stopped game")},calculateHighScore:function(){for(var e=0,t=0;t<this.gameObjects.length;t++)e+=this.gameObjects[t].getHighScore();var i=e/this.gameObjects.length;return(100*i).toFixed(1)+"%"}});return r}),define("game/controller/AudioController",["jquery","underscore","Framework","app"],function(e,t,i,n){var r=i.Controller.extend({cache:[],initialize:function(e){console.log(e),t.extend(this,t.pick(e,["callback_started","callback_ended","callback_readytoplay","callback_error","renderer"])),console.log(this)},callback_started:function(){},callback_ended:function(){},callback_readytoplay:function(){},callback_error:function(){},onClose:function(){if(this.active){this.active=!1,console.log("closing audio"),this.request&&(this.request.abort(),this.request=null);try{this.source&&(this.source.disconnect(),this.source.stop(),this.source=null)}catch(e){}}},onended:function(){console.info("The audio has stopped"),this.notified_ended||(this.callback_ended(),this.notified_ended=!0)},load:function(e){this.notified_ended=!1,this.active=!0,this.inittime=null,this.stream_url=e;try{if("undefined"!=typeof this.cache[e])return console.info("Reading audio-buffer from cache."),void this.initsound(this.cache[e]);var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.addEventListener("progress",this.passloadingpercentage.bind(this),!1);var i=function(){this.renderer.hideLoadingIndicator(),this.renderer.showProcessingInformation(),this.active&&n.audiocontext.decodeAudioData(t.response,this.initsound.bind(this),this.callback_error)}.bind(this);t.onload=i,this.request=t,this.request.send()}catch(r){console.error(r),this.callback_error("Web Audio API is not supported in this browser")}},passloadingpercentage:function(e){if(e.lengthComputable){var t=e.loaded/e.total;this.renderer.setProgress(t)}},initsound:function(e){if(console.log("init sound"),this.active){"undefined"==typeof this.cache[this.stream_url]&&(this.cache[this.stream_url]=e);var t=n.audiocontext.createBufferSource();t.buffer=e,t.connect(n.audiocontext.destination),t.onended=this.onended.bind(this),this.source=t,this.renderer.hideProcessingInformaion(),this.callback_readytoplay()}},start:function(){this.source.start(0),this.inittime=n.audiocontext.currentTime,this.callback_started()},getCurrentTime:function(){return n.audiocontext.currentTime-this.inittime},getPercentage:function(){return this.getCurrentTime()/this.getDuration()},getDuration:function(){return this.source.buffer.duration},attachAudioLoadingView:function(e){this.audioloaderview=e}});return r}),define("game/renderer/AudioLoadingRenderer",["jquery","underscore","Framework","snap"],function(e,t,i,n){var r=i.Renderer.extend({width:1600,height:1200,loadingindicatorwidth:1e3,loadingindicatorheight:100,textattributes:function(){return{fill:"#FFFFFF","font-size":"5em",textAnchor:"middle",filter:this.snap.filter(n.filter.shadow(0,2,3))}},render:function(e){this.options=e?e:{},this.r=this.snap.rect(0,0,"100%","100%",0),this.r.attr({fill:this.options.bgcolor||"#000000"}),this.loadingindicatorbackground=this.snap.rect(this.width/2-this.loadingindicatorwidth/2,.6*this.height-this.loadingindicatorheight/2,this.loadingindicatorwidth,this.loadingindicatorheight),this.loadingindicatorbackground.attr({fill:"#000000",stroke:"#FFFFFF",strokeWidth:2}),this.loadingindicator=this.snap.rect(this.width/2-this.loadingindicatorwidth/2,.6*this.height-this.loadingindicatorheight/2,0,this.loadingindicatorheight),this.loadingindicator.attr({fill:"#FFFFFF"}),this.loadingtext=this.snap.text(this.width/2,.4*this.height,"Loading audio"),this.loadingtext.attr(this.textattributes())},createStatusText:function(e){var t=this.snap.text(this.width/2,.4*this.height,e);return t.attr(this.textattributes()),t},setProgress:function(e){this.loadingindicator.attr({width:this.loadingindicatorwidth*e})},hideLoadingIndicator:function(){this.loadingtext&&this.loadingtext.remove(),this.loadingindicator&&this.loadingindicator.remove(),this.loadingindicatorbackground&&this.loadingindicatorbackground.remove()},showProcessingInformation:function(){this.processingText=this.snap.text(this.width/2,this.height/2,"Processing audio"),this.processingText.attr(this.textattributes())},hideProcessingInformaion:function(){this.processingText&&this.processingText.remove()}});return r}),define("game/Surface",["jquery","underscore","snap"],function(e,t,i){var n=function(e){this.options=e,this.snap=new i("#svg"),this.r=this.snap.rect(0,0,"100%","100%",0),this.r.attr({fill:this.options.bgcolor||"#000000"})};return n.prototype={width:1600,height:1200,getSnap:function(){return this.snap},getRootRect:function(){return this.r},requestStartFromUser:function(e){var t=this.snap.text(this.width/2,this.height/2,"Tap here to start!");t.attr({fill:"#FFFFFF","font-size":"5em",textAnchor:"middle",filter:this.snap.filter(i.filter.shadow(0,2,3)),id:"startactionbutton"}),this.startaction=t;var n=function(){this.getRootRect().unclick(),this.startaction.unclick(),t.remove(),e()}.bind(this);this.getRootRect().click(n),this.startaction.click(n)}},n}),define("views/PlayView",["jquery","underscore","Framework","text!templates/play.html","app","models/Track","game/controller/Game","util/analytics","game/controller/AudioController","game/renderer/AudioLoadingRenderer","game/Surface","util/scripts"],function(e,t,i,n,r,a,s,o,l,c,u){var p=i.View.extend({fullscreen:!0,onClose:function(){this.game&&this.game.stop(),this.result=null,this.audiocontroller.close(),this.game=null},stopGame:function(){this.game.stop(),e("#svg").fadeTo(1500,0,this.exitview.bind(this)),this.result={},this.result.highscore=this.game.calculateHighScore(),this.result.level=this.level,this.audiocontroller.close()},render:function(e){i.history.navigate("playlevel",!1);var r=this;this.level=e,console.log(this.level),this.levelloaded=this.level.get("gameObjects").length>0,this.audioready=!1,this.levelloaded||this.level.fetch({success:function(){console.log("level loaded"),r.audioready?r.start():r.levelloaded=!0}});var a=t.template(n,{});this.$el.html(a),this.surface=new u({bgcolor:"#000000"}),this.audioloadingrenderer=new c({snap:this.surface.getSnap()}),this.audioloadingrenderer.render(),this.audiocontroller=new l({renderer:this.audioloadingrenderer,callback_started:this.onAudioStarted.bind(this),callback_ended:this.stopGame.bind(this),callback_readytoplay:this.onAudioReady.bind(this),callback_error:this.onAudioError.bind(this)}),this.audiocontroller.load(this.level.get("audio").getStreamUrl(),!0)
},start:function(){this.game=new s({level:this.level,audiocontroller:this.audiocontroller,surface:this.surface}),this.surface.requestStartFromUser(this.audiocontroller.start.bind(this.audiocontroller))},onAudioReady:function(){console.log("audio is ready"),this.levelloaded?this.start():this.audioready=!0},onAudioStarted:function(){this.game.start()},onAudioError:function(e){console.error(e),alert(e),this.audiocontroller.close()},exitview:function(){o.trackAction("game","ending regularly","highscore:"+this.result.highscore),r.setContent(r.router.views.highscoreview,this.result)}});return p}),define("text!templates/highscore.html",[],function(){return'<div class="container">\n    <!-- Main jumbotron for a primary marketing message or call to action -->\n    <div class="jumbotron">\n        <div class="container">\n            <h1>Level Finished!</h1>\n\n            <p>Congratulations! You finished <%= levelname %> with <strong><%= highscore %></strong>.</p>\n\n            <p>\n                <button class="btn btn-primary btn" type="button" id="btn_playagain">Play again!</button>\n                <button class="btn btn-default" id="btn_gotoChooseLevelView">Return to Level-Overview</button>\n            </p>\n        </div>\n    </div>\n</div>\n'}),define("views/HighScoreView",["jquery","underscore","Framework","text!templates/highscore.html","app","util/analytics","lib/bootstrap"],function(e,t,i,n,r,a){var s=i.View.extend({events:{"click #btn_gotoChooseLevelView":"gotoChooseLevelView","click #btn_playagain":"playagain"},render:function(e){i.history.navigate("highscore",!1),this.game=e;var r=t.template(n,{highscore:this.game.highscore,levelname:this.game.level.get("name")});this.$el.html(r)},gotoChooseLevelView:function(){a.trackAction("highscoreview","click button","gotoChooseLevelview"),i.history.navigate("chooselevel",!0)},playagain:function(){a.trackAction("highscoreview","click button","playagain"),console.log(this.game),r.startlevel(this.game.level)}});return s}),define("text!templates/levelbuilder/base.html",[],function(){return'<div class="container">\n    <h1>Level Builder</h1>\n    <hr/>\n    <div class="content"></div>\n</div>'}),define("text!templates/levelbuilder/gameobjectrecorder.html",[],function(){return'<div id="gamerecorder" class="svgcontainer">\n    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1600 1200" id="svg">\n    </svg>\n</div>\n\n'}),define("views/levelbuilder/GameObjectRecorderView",["jquery","underscore","Framework","snap","game/controller/TapObject","game/Surface","game/controller/AudioController","game/renderer/AudioLoadingRenderer","models/Track","text!templates/levelbuilder/gameobjectrecorder.html","app","models/GameObject"],function(e,t,i,n,r,a,s,o,l,c,u,p){var d=i.View.extend({el:"#body",fullscreen:!0,onClose:function(){this.audiocontroller&&this.audiocontroller.close()},render:function(e){this.model=e,this.audiocontroller&&this.audiocontroller.close();var i=t.template(c,{});this.$el.html(i),this.surface=new a({bgcolor:"#222222"}),this.audioloadingrenderer=new o({snap:this.surface.getSnap()}),this.audioloadingrenderer.render({bgcolor:"#222222"}),this.audiocontroller=new s({renderer:this.audioloadingrenderer,callback_started:this.onAudioStarted.bind(this),callback_ended:this.recordingfinished.bind(this),callback_readytoplay:this.onAudioReady.bind(this),callback_error:this.onAudioError.bind(this)}),this.audiocontroller.load(this.model.get("audio").getStreamUrl(),!0)},addTapObject:function(e,t,i){this.model.get("gameObjects").add(new p({type:"Tap",x:t,y:i,tapTime:e}))},onAudioReady:function(){this.svgelem=document.getElementById("svg"),this.surface.requestStartFromUser(this.audiocontroller.start.bind(this.audiocontroller))},onAudioStarted:function(){this.isrecording=!0,this.surface.getRootRect().touchstart(function(e){if(this.isrecording){var t=e.changedTouches[0],i=this.svgelem.createSVGPoint();i.x=t.pageX,i.y=t.pageY;var n=e.target.getScreenCTM().inverse();n?(i=i.matrixTransform(n),console.log(JSON.stringify(i)),this.addTapObject(this.audiocontroller.getCurrentTime(),Math.floor(i.x),Math.floor(i.y))):console.error("error retrieving position")}}.bind(this))},onAudioError:function(){this.isrecording=!1,console.error("Audio error!!!!!"),this.audiocontroller.close(),alert("There was an error loading the audio file.")},recordingfinished:function(){this.isrecording=!1,console.log("finished"),u.router.openLevelBuilder("leveleditor")}});return d}),define("text!templates/levelbuilder/start.html",[],function(){return'<p>Here you can create and edit your own levels. You can either start from scratch or edit an existing level. Choose\n    your way below:</p>\n<br>\n\n<h2><span class="glyphicon glyphicon-pencil"></span> New Level</h2>\n\n<div class="list-group">\n\n    <a class="list-group-item" href="#levelbuilder/create" id="new">\n\n        <h4 class="list-group-item-heading">Create a new level!</h4>\n\n        <p class="list-group-item-text">\n            You will select a track from SoundCloud and record your gameobjects.\n        </p>\n    </a>\n</div>\n<div class="list-group">\n    <h2><span class="glyphicon glyphicon-pencil"></span> Your Levels</h2>\n\n    <div id="levelcontainer" class="list-group">\n\n    </div>\n</div>'}),define("collections/UserLevelCollection",["jquery","underscore","backbone","models/Level","levelcontainer","app"],function(e,t,i,n,r,a){var s=i.Collection.extend({model:n,url:function(){var e;try{e=a.session.get("user").url()}catch(t){e="user"}return e+"/levels"}});return s}),define("views/levelbuilder/StartView",["jquery","underscore","Framework","text!templates/levelbuilder/start.html","app","collections/UserLevelCollection","views/LevelPanelView"],function(e,t,i,n,r,a,s){var o=i.View.extend({template:t.template(n,{}),initialize:function(){this.levelcollection=new a,this.collectionview=new i.CollectionView({className:"list-group",childView:s,collection:this.levelcollection,getViewParams:function(e){return{model:e,callback:this.levelSelectedCallback}}.bind(this)})},events:{"click #new":"create"},levelSelectedCallback:function(e){var t=r.router.views.levelbuilderview;t.getContent("leveleditor").setModel(e),t.setContent("leveleditor"),e.fetch()},create:function(){var e=r.router.views.levelbuilderview;e.getContent("leveleditor").createModel(),e.setContent("leveleditor")},render:function(){this.$el.html(this.template),this.collectionview.render(),this.$("#levelcontainer").html(this.collectionview.el),this.levelcollection.fetch()}});return o}),define("text!templates/levelbuilder/importlevel.html",[],function(){return'<p>To import a level, copy the level-text into the input-field below.</p>\n<div class="leveltextinput"></div>'}),define("views/levelbuilder/ImportLevelView",["jquery","underscore","Framework","text!templates/levelbuilder/importlevel.html","views/LevelTextInputView","app"],function(e,t,i,n,r,a){return i.View.extend({template:t.template(n,{}),initialize:function(){this.leveltextinputview=new r(this.levelselected.bind(this))},render:function(){this.$el.html(this.template),this.leveltextinputview.setElement(this.$(".leveltextinput")),this.leveltextinputview.render()},levelselected:function(e){var t=a.router.views.levelbuilderview;e.set("owner",a.session.get("user")),e.unset("id"),console.log(e),t.getContent("leveleditor").setModel(e),t.setContent("leveleditor")}})}),define("text!templates/levelbuilder/leveleditor.html",[],function(){return'<div class="container">\n\n    <div class="btn-group pull-right">\n        <button type="button" id="delete" class="btn btn-danger">Delete</button>\n        <button type="button" id="export" class="btn btn-default">Export</button>\n        <!--<button type="button" id="save" class="btn btn-default">Save as Draft</button>-->\n        <button type="button" id="publish" class="btn btn-primary">Save and Publish</button>\n    </div>\n    <h3>\n        <span id="levelname"><%= levelname %></span>\n        <small>by <%= username %></small>\n    </h3>\n    <div class="row" id="panellist">\n\n    </div>\n    <div class="btn-group  pull-right">\n        <button type="button" id="play" class="btn btn-default">Play</button>\n    </div>\n\n\n</div>'}),define("text!templates/levelbuilder/gameobjecteditor/tapobjectrow.html",[],function(){return'<td class="select_td"><input type="checkbox" class="checkbox_rowselection" id="<%- cid %>-selection" value="checked"/>\n</td>\n<td><input class="form-control input-sm" id="<%- cid %>-time" type="number" value="<%- time %>"/></td>\n<td>Tap</td>\n<td><input class="form-control input-sm" id="<%- cid %>-x" type="number" value="<%- x %>"/></td>\n<td><input class="form-control input-sm" id="<%- cid %>-y" type="number" value="<%- y %>"/></td>\n<td>\n    <div class="btn-group">\n        <% _.each(shapes, function(s) { %>\n        <button type="button" class="btn btn-default shape shape_<%= s %>" alt="<%= s %>"\n                title="<%= s %>"></button>\n        <% }); %>\n    </div>\n</td>'}),define("views/levelbuilder/TapObjectRowView",["jquery","underscore","Framework","text!templates/levelbuilder/gameobjecteditor/tapobjectrow.html","game/ShapeFactory"],function(e,t,i,n,r){var a=i.View.extend({tagName:"tr",css_classname_active:"shape_selected",initialize:function(e){this.tapobject=e},events:{"click .shape":"clickedShapeButton",click:"clickRow","click .checkbox_rowselection":"clickSelectionToggle"},render:function(){var e=t.extend(this.tapobject.toJSON(),{time:(Math.round(100*this.tapobject.get("tapTime"))/100).toFixed(2),shapes:Object.keys(r.shapes),cid:this.tapobject.cid}),i=t.template(n,e);return this.$el.html(i),this.getShapeElem(this.currentShape()).addClass(this.css_classname_active),this.listenTo(this.tapobject,"change:shape",this.changeShape,this),this.listenTo(this.tapobject,"selected",this.setSelected,this),this.listenTo(this.tapobject,"deselected",this.setDeselected,this),this},clickRow:function(e){"TD"===e.target.tagName&&this.tapobject.toggleSelected()},clickSelectionToggle:function(){this.tapobject.toggleSelected()},setSelected:function(){console.log("model "+this.tapobject.cid+" was selected"),this.$(".checkbox_rowselection").prop("checked",!0),this.$el.addClass("active")},setDeselected:function(){console.log("model "+this.tapobject.cid+" was deselected"),this.$(".checkbox_rowselection").prop("checked",!1),this.$el.removeClass("active")},currentShape:function(){return this.tapobject.get("shape").type},previousShape:function(){return this.tapobject.previous("shape").type},clickedShapeButton:function(e){var t=e.target.getAttribute("alt");this.tapobject.set({shape:{type:t,size:"medium"}})},changeShape:function(){this.getShapeElem(this.previousShape()).removeClass(this.css_classname_active),this.getShapeElem(this.currentShape()).addClass(this.css_classname_active)},getShapeElem:function(e){return this.$(".shape_"+e)}});return a}),define("text!templates/components/levelexportmodal.html",[],function(){return'<div class="modal fade" id="exportmodal" tabindex="-1" role="dialog" aria-labelledby="exportmodallabel"\n     aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span\n                        class="sr-only">Close</span></button>\n                <h4 class="modal-title" id="exportmodallabel">Export</h4>\n            </div>\n            <div class="modal-body">\n                <textarea id="exportmodalcontent" style="width: 100%; max-width: 100%"></textarea>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/levelbuilder/ExportModalView",["jquery","underscore","Framework","text!templates/components/levelexportmodal.html"],function(e,t,i,n){var r=i.View.extend({tagName:"div",template:t.template(n,{}),initialize:function(){},events:{},render:function(e){console.log(e),this.$el.html(this.template),this.$("#exportmodalcontent").html(JSON.stringify(e)),this.$("#exportmodal").modal("show")}});return r}),define("text!templates/levelbuilder/panels/audio.html",[],function(){return'<div class="panel panel-default">\n    <div class="panel-heading">Audio</div>\n    <div class="panel-body">\n        <p>Choose a song from <a href="http://soundcloud.com/" target="_blank">Soundcloud</a>\n            and enter the track-url below.<br>\n            To start immediately, you can also use one of the preselected songs by pressing the white button.</p>\n\n        <div id="alert_tracknotfound_container"></div>\n        <div class="input-group input-group-lg" id="audio_inputgroup">\n            <input type="text" class="form-control input-lg" id="input_entertrack"\n                   placeholder="Paste Soundcloud URL here (https://soundcloud.com/artist/track)"/>\n            <span class="input-group-btn">\n                <button class="btn btn-default" type="button" id="btn_recommendedtrack">\n                    <span class=\'glyphicon glyphicon-random\'></span>\n                </button>\n            </span>\n        </div>\n        <div id="trackcontainer" class="margin-top-10"></div>\n\n    </div>\n</div>\n'}),define("text!templates/components/trackpanel.html",[],function(){return'<iframe width="100%" height="166" scrolling="no" frameborder="no"\n        src="https://w.soundcloud.com/player/?url=<%= permalinkUrl %>&show_artwork=true&color=0066cc&visual=false&auto_play=false&buying=true&liking=true&download=true&sharing=true&show_comments=true&show_playcount=true&show_user=true"></iframe>'}),define("text!templates/components/errormessagealert.html",[],function(){return'<div class="alert alert-info alert-dismissable" id="alert" style="display:none;">\n    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n    <%- message %>\n</div>'}),define("views/ErrorMessageView",["jquery","underscore","Framework","text!templates/components/errormessagealert.html"],function(e,t,i,n){var r=i.View.extend({render:function(e){this.$el.html(t.template(n,{message:e})),this.$("#alert").fadeIn()}});return r}),define("views/levelbuilder/panels/AudioPanelView",["jquery","underscore","Framework","app","text!templates/levelbuilder/panels/audio.html","text!templates/components/trackpanel.html","models/Track","views/ErrorMessageView","util/scripts","lib/bootstrap"],function(e,t,i,n,r,a,s,o){var l=i.View.extend({initialize:function(){this.randomtracks=["https://soundcloud.com/maxfrostmusic/white-lies","https://soundcloud.com/greco-roman/roosevelt-sea-1","https://soundcloud.com/homoheadphonico/phantogram-don-t-move","https://soundcloud.com/fosterthepeoplemusic/pumpedupkicks","https://soundcloud.com/benkhan/savage"]},render:function(e){this.model=e,this.track=new s(this.model.get("audio").attributes);var i=t.template(r,{});this.$el.html(i),this.track.get("title")&&(this.$("#input_entertrack").val(this.track.get("permalinkUrl")),this.updateTrackPanel()),this.listenTo(this.model,"change:audio",this.updateTrackPanel.bind(this))},onClose:function(){},events:{"click #btn_entertrack":"enteredTrack","click #btn_recommendedtrack":"selectedRandomTrack","click #btn_gameobjectrecorder":"openGameObjectRecorder","input #input_entertrack":"enteredTrack"},enteredTrack:t.debounce(function(){var e=this;this.track.clear({silent:!0});var t=this.track.set({url:this.$("#input_entertrack").val()},{validate:!0});t?this.track.fetch({data:this.track.toJSON(),success:function(t){t.has("url")||e.model.set("audio",new s(t.attributes))},error:function(t,i){"AUDIOPROVIDER_ERROR"==i&&(i=s.errorMessages.SOUNDCLOUDERROR),e.showError(i)}}):this.showError(this.track.validationError)},300),selectedRandomTrack:function(){var t=this.randomtracks[Math.floor(Math.random()*this.randomtracks.length)];e("#input_entertrack").val(t),this.enteredTrack()},showError:function(e){this.$("#audio_inputgroup").removeClass("has-success").addClass("has-error"),this.$("#trackcontainer").html("");var t=new o;t.render(e),this.$("#alert_tracknotfound_container").html(t.$el)},updateTrackPanel:function(){this.$("#audio_inputgroup").removeClass("has-error").addClass("has-success");var e=this.model.get("audio");this.$("#alert_tracknotfound_container").html(""),this.$("#input_entertrack").val(e.get("permalinkUrl"));var i=t.template(a,e.toJSON());this.$("#trackcontainer").html(i),this.$("#trackinfo").fadeIn()}});return l}),define("text!templates/levelbuilder/panels/gameobjects.html",[],function(){return'<div class="panel panel-default">\n    <div class="panel-heading">GameObjects</div>\n    <div class="panel-body">\n        <p>In this view you can edit all GameObjects of your level.</p>\n        <hr/>\n        <button id="btn_deleteseelected" class="btn btn-danger disabled">Delete selected</button>\n        <table class="table table-condensed">\n            <thead>\n            <tr>\n                <th></th>\n                <th>Time</th>\n                <th>Type</th>\n                <th>x</th>\n                <th>y</th>\n                <th>Shape</th>\n            </tr>\n            </thead>\n            <tbody id="tbody_gameobjects">\n\n            </tbody>\n        </table>\n        <div class="margin-top-15">\n            <p>Record new GameObjects by pressing the button below. The track will start playing in fullscreen and you\n                can add TapObjects by tapping at your desired positions in time. After playback, you will be redirected\n                back here.</p>\n\n            <div class="text-center">\n                <button class="btn btn-default" id="record_gameobjects">Record GameObjects!</button>\n            </div>\n        </div>\n        <div class="margin-top-15"></div>\n    </div>\n</div>\n'}),define("views/levelbuilder/panels/GameObjectEditorPanelView",["jquery","underscore","Framework","text!templates/levelbuilder/panels/gameobjects.html","views/levelbuilder/TapObjectRowView","views/levelbuilder/ExportModalView","app"],function(e,t,i,n,r,a,s){var o=i.View.extend({template:t.template(n,{}),render:function(e){this.model=e,this.$el.html(this.template),this.table=this.$("#tbody_gameobjects"),this.table.html(""),this.gameobjects=this.model.get("gameObjects"),this.collectionview=new i.CollectionView({el:this.table,childView:r,collection:this.gameobjects,getViewParams:function(e){return e}.bind(this)}),this.collectionview.render(),this.listenTo(this.model,"change:gameObjects",this.render,this)},events:{"click #record_gameobjects":"recordGameObjects"},recordGameObjects:function(){s.setFullScreenContent(s.router.views.levelbuilderview.getContent("gameobjectrecorder"),this.model)}});return o}),define("text!templates/levelbuilder/panels/metadata.html",[],function(){return'<div class="panel panel-default">\n    <div class="panel-heading">Metadata</div>\n    <div class="panel-body">\n        <form class="form-horizontal" role="form">\n            <div class="form-group">\n                <label for="levelname" class="col-sm-2 control-label">Levelname</label>\n\n                <div class="col-sm-10">\n                    <input type="text" class="form-control" id="levelname" placeholder="Levelname"\n                           value="<%= levelname %>">\n                </div>\n            </div>\n            <div class="form-group">\n                <fieldset>\n                    <label for="username" class="col-sm-2 control-label">Username</label>\n\n                    <div class="col-sm-10">\n                        <p class="form-control-static" id="username"><%= username %></p>\n                    </div>\n                </fieldset>\n            </div>\n        </form>\n\n    </div>\n</div>'}),define("views/levelbuilder/panels/MetaDataPanelView",["jquery","underscore","Framework","app","text!templates/levelbuilder/panels/metadata.html","util/scripts","lib/bootstrap"],function(e,t,i,n,r){var a=i.View.extend({initialize:function(){},render:function(e){this.model=e;var i=t.template(r,{levelname:this.model.get("name"),username:this.model.get("owner").get("username")});this.$el.html(i)},onClose:function(){},events:{"click #btn_recordgameobjects":"recordGameObjects","input #levelname":"saveLevelname"},saveLevelname:function(){console.log("levelname"),this.model.set({name:this.$("#levelname").val()})}});return a}),define("views/levelbuilder/LevelEditorView",["jquery","underscore","Framework","text!templates/levelbuilder/leveleditor.html","views/levelbuilder/TapObjectRowView","views/levelbuilder/ExportModalView","views/levelbuilder/panels/AudioPanelView","views/levelbuilder/panels/GameObjectEditorPanelView","views/levelbuilder/panels/MetaDataPanelView","app","models/Level"],function(e,t,i,n,r,a,s,o,l,c,u){var p=function(e){if(!t.isUndefined(e)&&!t.isNull(e)){console.warn("The current LevelEditor-draft will be overwritten. Trying to log the level-text as backup:");try{console.log(JSON.stringify(e.toJSON()))}catch(i){console.error(i)}}},d=i.View.extend({events:{"click #delete":"delete","click #export":"export","click #play":"play","click #publish":"saveAndPublish"},getModel:function(){return this.model},setModel:function(e){p(this.model),this.model=e},createModel:function(e){return this.setModel(e?u.createFromSoundCloud(e):new u),this.getModel()},"delete":function(){this.setModel(null);var e=c.router.views.levelbuilderview;e.setContent("start")},"export":function(){console.log(this.getModel().toJSON()),this.exportmodalview.render(this.getModel().toJSON())},saveAndPublish:function(){this.getModel().save({},{success:function(e){console.log(e)},error:function(e,t){console.log("error callback"),console.error(t)}})},playLevel:function(){c.startLevel(this.getModel())},render:function(){var e=t.template(n,{levelname:this.getModel().get("name")||"New Level",username:this.getModel().get("owner").get("username")});this.$el.html(e),this.exportmodalview=new a,this.$el.append(this.exportmodalview.el),this.panels={metadatapanel:new l,audiopanel:new s,gameobjecteditorpanel:new o},this.$("#panellist").html("");for(var i in this.panels)this.panels[i].render(this.getModel()),this.$("#panellist").append(this.panels[i].el);this.listenTo(this.getModel(),"change:name",function(){this.$("#levelname").html(this.getModel().escape("name"))}.bind(this))},onClose:function(){this.exportmodalview.close();for(var e in this.panels)this.panels[e].close()}});return d}),define("text!templates/levelbuilder/signincall.html",[],function(){return'<br>\n<div class="text-center well well-lg">\n    <p>Please sign in to use the Level Builder. Once you are signed in you will be able to create a level, publish it\n        and edit or delete it later.</p>\n    <button class="btn btn-primary btn-lg" id="btn_showsigninmodal_call">Sign in</button>\n</div>'}),define("views/levelbuilder/SignInCallView",["jquery","underscore","Framework","text!templates/levelbuilder/signincall.html","app"],function(e,t,i,n,r){var a=i.View.extend({template:t.template(n,{}),route:"levelbuilder/signin",render:function(){this.$el.html(this.template);var e=i.history.fragment;e!=this.route&&(r.router.navigate("levelbuilder/signin",{replace:!0}),this.listenTo(r.session,"change:logged_in",function(t){t.get("logged_in")&&r.router.navigate(e,{trigger:!0,replace:!0})}))},events:{"click #btn_showsigninmodal_call":"clickedSignInButton"},clickedSignInButton:function(){console.log("clicked signinbutton"),r.session.get("logged_in")||r.getMainView().openSignInModal()}});return a}),define("views/levelbuilder/BaseView",["jquery","underscore","Framework","app","text!templates/levelbuilder/base.html","views/levelbuilder/GameObjectRecorderView","views/levelbuilder/StartView","views/levelbuilder/ImportLevelView","views/levelbuilder/LevelEditorView","views/levelbuilder/SignInCallView","framework/ExchangeableContent"],function(e,t,i,n,r,a,s,o,l,c,u){var p=i.View.extend(t.extend(new u,{template:t.template(r,{}),initialize:function(){this.configureExchangableContents({callback_before:this.checkroute.bind(this),className:"content",contentsareinstances:!0}),this.addContents({startview:new s,gameobjectrecorderview:new a,importlevelview:new o,leveleditorview:new l,signincall:new c})},checkroute:function(){return n.session.get("logged_in")?void 0:"signincall"},render:function(e){this.$el.html(this.template),"undefined"!=typeof e?this.setContent(e):this.updateContent(n.session),this.listenTo(n.session,"change:logged_in",this.updateContent.bind(this))},onClose:function(){var e=this.getCurrentContent();e&&e.close()},updateContent:function(e){this.setContent(e.get("logged_in")&&this.getCurrentContent()!==this.getContent("signincall")?"start":t.isUndefined(this.getContent("leveleditor").getModel())?"start":"leveleditor")}}));return p}),define("router",["jquery","underscore","backbone","app","util/analytics","views/MenuView","views/HomeView","views/ChooseLevelView","views/ApplicationWithMenuView","views/PageNotFoundView","views/LegalView","views/PlayView","views/HighScoreView","views/levelbuilder/BaseView","views/SignInView"],function(e,t,i,n,r,a,s,o,l,c,u,p,d,h,f,m){var y=i.Router.extend({routes:{"":"home",chooselevel:"chooselevel",levelbuilder:"buildlevel","levelbuilder/create(/:soundcloudurl)":"createlevel","levelbuilder/import":"importlevel","levelbuilder/signin":"levelbuildersignin",legal:"legal",playlevel:"chooselevel",highscore:"chooselevel",signin:"signin","*notfound":"notfound"},openLevelBuilder:function(){var e=n.router.views.levelbuilderview,t=[].shift.call(arguments);n.setContent(e),"undefined"!=typeof t&&e.setContent(t)},init:function(){this.views={current:null,baseview:new l,homeview:new s,chooselevelview:new o,pagenotfoundview:new c,legalview:new u,playlevelview:new p,highscoreview:new d,levelbuilderview:new h},this.on("route:home",function(){n.setContent(this.views.homeview)}),this.on("route:chooselevel",function(){n.setContent(this.views.chooselevelview)}),this.on("route:buildlevel",function(){this.openLevelBuilder()}),this.on("route:createlevel",function(){this.openLevelBuilder("leveleditor")}),this.on("route:levelbuildersignin",function(){this.openLevelBuilder("signin")}),this.on("route:notfound",function(e){console.log("No route:",e),n.setContent(this.views.homeview),this.views.pagenotfoundview.render()}),this.on("route:legal",function(){n.setContent(this.views.legalview)}),this.on("route:importlevel",function(){this.openLevelBuilder("importlevel")}),this.on("route:signin",function(){var e=new m;n.setContent(e)})},getCurrentAppStatus:function(){var e,n=this,r=i.history.fragment,a=t.pairs(n.routes),s=null,o=null;return e=t.find(a,function(e){return s=t.isRegExp(e[0])?e[0]:n._routeToRegExp(e[0]),s.test(r)}),e&&(o=n._extractParameters(s,r),s=e[1]),{route:s,fragment:r,params:o}}});return y}),require.config({paths:{Framework:"framework/Framework",jquery:"lib/jquery",underscore:"lib/underscore",backbone:"lib/backbone",text:"lib/text",templates:"../templates",snap:"lib/snap.svg","google-analytics":"lib/analytics",tv4:"lib/tv4",schema:"schema",md5:"lib/md5"},shim:{"lib/bootstrap":{deps:["jquery"],exports:"$.fn.popover"},jquery:{exports:"$"},snap:{exports:"Snap"},"google-analytics":{exports:"ga"},sc:{exports:"SC"},md5:{exports:"CryptoJS"},"lib/jasny-bootstrap":["jquery"]},enforceDefine:!0}),define("main",["jquery","underscore","Framework","config","app","models/Session","router"],function(e,t,i,n,r,a,s){if(n.debug)window.app=r;else try{console.log=function(){},console.info=function(){}}catch(o){}console.info("Initializing TouchTheBeat."),r.init({session:new a,router:new s,backend:n.backend}),i.history.start(),console.info("Initializing TouchTheBeat has completed.")});