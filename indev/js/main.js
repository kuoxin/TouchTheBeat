define("util/analytics",["jquery","underscore","backbone","google-analytics"],function(e,t,n,r){var i={};return i.trackPageView=function(e){r("send","pageview",e.fragment==""?"/":e.fragment)},i.trackAction=function(e,t,n,i){r("send","event",e,t,n,i)},r("create","UA-52163376-2","auto"),i}),define("app",["jquery","underscore","backbone","router","util/analytics","bootstrap"],function(e,t,n,r,i){var s={router:null,models:{levelEditorModel:null},baseviewIsRendered:!1,startlevel:function(e){s.setFullScreenContent(s.router.views.playlevelview,e)},setFullScreenContent:function(){s.baseviewIsRendered=!1,s.router.views.current=[].shift.call(arguments),s.router.views.current.setElement("#body").render.apply(s.router.views.current,arguments),i.trackPageView(s.router.getCurrentAppStatus())},setContent:function(){var t=[].shift.call(arguments);if(s.router.views.current==t)return;s.baseviewIsRendered||(s.router.views.baseview.render(),s.baseviewIsRendered=!0),s.router.views.current!=null&&(s.router.views.current.onClose&&s.router.views.current.onClose(),s.router.views.current.dispose()),s.router.views.current=t,s.router.views.current.setElement(e("#content")).render.apply(s.router.views.current,arguments),i.trackPageView(s.router.getCurrentAppStatus())}};return s}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("ï»¿")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!templates/menu.html",[],function(){return'		<div class="container">\r\n			<div class="navbar-header">\r\n				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">\r\n					<span class="icon-bar"></span>\r\n					<span class="icon-bar"></span>\r\n					<span class="icon-bar"></span>\r\n				</button>\r\n				<a class="navbar-brand" href="#/">TouchTheBeat</a>\r\n			</div>\r\n			<div class="navbar-collapse collapse">\r\n				<ul class="nav navbar-nav">\r\n					<li id="home"><a href="#">Home</a>\r\n					</li>\r\n					<li id="chooselevel"><a href="#chooselevel">Play</a>\r\n					</li>\r\n                    <li id="levelbuilder"><a href="#levelbuilder">Level Builder</a>\r\n                    </li>\r\n					<li class="dropdown">\r\n						<a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>\r\n						<ul class="dropdown-menu">\r\n                            <li><a href="//github.com/TouchTheBeat/TouchTheBeat" target="_blank"><span\r\n                                    class="glyphicon glyphicon-share"></span> Project on GitHub</a>\r\n                            </li>\r\n                            <li><a href="//twitter.com/intent/tweet?text=.@TouchTheBeat " target="_blank"><span\r\n                                    class="glyphicon glyphicon-share"></span> Give Feedback</a>\r\n                            </li>\r\n							<li class="divider"></li>\r\n                            <li><a href="#legal">Legal information</a>\r\n                            </li>\r\n						</ul>\r\n					</li>\r\n				</ul>\r\n				<!--<form class="navbar-form navbar-right">\r\n                      <div class="form-group">\r\n                        <input type="text" placeholder="Email" class="form-control">\r\n                      </div>\r\n                      <div class="form-group">\r\n                        <input type="password" placeholder="Password" class="form-control">\r\n                      </div>\r\n                      <button type="submit" class="btn btn-success">Sign in</button>\r\n                    </form>-->\r\n			</div>\r\n			<!--/.navbar-collapse -->\r\n		</div>'}),define("views/components/html/MenuView",["jquery","underscore","backbone","text!templates/menu.html","bootstrap"],function(e,t,n,r){var i=n.View.extend({el:"#menu",render:function(){this.closemenuitem&&this.closemenuitem.unbind();var i=t.template(r,{});this.$el.html(i),this.closemenuitem=e(".navbar-collapse ul li a:not(.dropdown-toggle)"),this.closemenuitem.bind("click",function(){e(".navbar-toggle:visible").click()}),n.history.bind("route",this.updateMenuState.bind(this))},menustates:{createlevel:"levelbuilder",editlevel:"levelbuilder",buildlevel:"levelbuilder"},updateMenuState:function(t,n){var r=e(".active");r!=null&&r.removeClass("active");var i=e("#"+(this.menustates[n]||n));i!=null&&i.addClass("active")}});return i}),define("text!templates/home.html",[],function(){return'<div class="container">\r\n    <!-- Main jumbotron for a primary marketing message or call to action -->\r\n    <div class="jumbotron">\r\n        <div class="container">\r\n            <h1>TouchTheBeat</h1>\r\n\r\n            <p>TouchTheBeat is a HTML5 multi-touch music game currently <strong>in development</strong>. </p>\r\n\r\n            <p><a href="#/chooselevel" class="btn btn-primary btn-lg">Try TouchTheBeat &raquo;</a></p>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Example row of columns -->\r\n    <div class="row">\r\n        <div class="col-lg-4">\r\n            <h2>The Game</h2>\r\n\r\n            <p>TouchTheBeat is <strong>level-based</strong>. Each level consists of a song and a composition of\r\n                interactive objects. The objects can be either tapped,\r\n                <del>hold, dragged or slided</del>\r\n                <i> (soon)</i>. The more <strong>rhythmically accurate</strong> you interact with the objects, the more\r\n                points you get in the end.\r\n            </p>\r\n\r\n        </div>\r\n        <div class="col-lg-4">\r\n            <h2>The Level-Builder</h2>\r\n\r\n            <p>You can easily create your own levels by using any <strong>SoundCloud track</strong> as music for your\r\n                level. When finished, you might share and exchange your levels online in text-format. This way it is\r\n                easy to <strong>play levels created by others</strong>.</p>\r\n\r\n            <p><a class="btn btn-default pull-right" href="#levelbuilder">Build a level &raquo;</a></p>\r\n        </div>\r\n        <div class="col-lg-4">\r\n            <h2>Development</h2>\r\n\r\n            <p>TouchTheBeat is currently in active development and you are testing an <strong>early version</strong>.\r\n                The finished game may be completely different than the current version. I am glad about every <strong>feedback</strong>\r\n                you may give to me. You can give feedback by pressing the button below.</p>\r\n\r\n            <p><a class="btn btn-default pull-right" href="//twitter.com/intent/tweet?text=.@TouchTheBeat "\r\n                  target="_blank">Give Feedback</a></p>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n'}),define("views/HomeView",["jquery","underscore","backbone","text!templates/home.html"],function(e,t,n,r){var i=n.View.extend({el:"#content",render:function(){var e=t.template(r,{});this.$el.html(e)}});return i}),define("text!templates/leveloverview.html",[],function(){return'<div class="container">\r\n    <h1>Level Overview</h1>\r\n    <hr/>\r\n\r\n    <p> To play the game right away, choose one of these packaged demo-levels:</p>\r\n\r\n    <div class="row">\r\n        <div id="levelcontainer_packaged" class="list-group"></div>\r\n    </div>\r\n\r\n\r\n    <hr/>\r\n    <p>\r\n        TouchTheBeat lets you create your own levels, too. To start a level you or someone else has created, copy\r\n        the level-text into the input-field below.\r\n    </p>\r\n\r\n    <div class="alert alert-fatal alert-danger" id="alert_invalidlevel" style="display:none;">\r\n        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\r\n        <div id="alert_tinvalidlevel_text"><strong>Oh snap!</strong> TouchTheBeat could not parse your leveltext.\r\n            You\r\n            might want to <a href="#buildlevel" class="alert-link">create a new level</a>...\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <p id="manualinputcontainer">\r\n    </p>\r\n\r\n</div>\r\n'}),define("text!templates/components/levelpanel.html",[],function(){return'<h4 class="list-group-item-heading"><%- levelname %></h4>\r\n<p class="list-group-item-text">\r\n<dl class="dl-horizontal">\r\n    <dt>Author</dt>\r\n    <dd><%- author %></dd>\r\n    <dt>Track</dt>\r\n    <dd><%- track %> by <%- artist %>\r\n        <!--<a href="<%- trackurl %>"><%- track %></a> by <a href="<%- artisturl %>"><%- artist %></a>--></dd>\r\n    <dt>Duration</dt>\r\n    <dd><%- duration %></dd>\r\n</dl>\r\n</p>'}),define("views/components/html/LevelPanelView",["jquery","underscore","backbone","text!templates/components/levelpanel.html"],function(e,t,n,r){var i=n.View.extend({tagName:"a",initialize:function(e){this.callback=e},attributes:{"class":"list-group-item",href:"#"},render:function(e){var n=e.get("audio"),i=e.get("owner"),s=t.template(r,{levelname:e.get("name"),artist:n.artist||"Unknown",artisturl:"#",track:n.title||"Unknown",trackurl:n.permalinkUrl,duration:"not set",author:i.username||"Unknown"});this.$el.html(s),this.level=e},events:{click:"triggercallback"},triggercallback:function(e){e.preventDefault(),this.callback(this.level)}});return i}),function(e,t){typeof define=="function"&&define.amd?define("tv4",[],t):typeof module!="undefined"&&module.exports?module.exports=t():e.tv4=t()}(this,function(){function t(e,n){if(e===n)return!0;if(typeof e=="object"&&typeof n=="object"){if(Array.isArray(e)!==Array.isArray(n))return!1;if(Array.isArray(e)){if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1}else{var i;for(i in e)if(n[i]===undefined&&e[i]!==undefined)return!1;for(i in n)if(e[i]===undefined&&n[i]!==undefined)return!1;for(i in e)if(!t(e[i],n[i]))return!1}return!0}return!1}function n(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function r(e,t){function r(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){e==="/.."?t.pop():t.push(e)}),t.join("").replace(/^\//,e.charAt(0)==="/"?"/":"")}return t=n(t||""),e=n(e||""),!t||!e?null:(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+r(t.protocol||t.authority||t.pathname.charAt(0)==="/"?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash}function i(e){return e.split("#")[0]}function s(e,t){if(e&&typeof e=="object"){t===undefined?t=e.id:typeof e.id=="string"&&(t=r(t,e.id),e.id=t);if(Array.isArray(e))for(var n=0;n<e.length;n++)s(e[n],t);else{typeof e["$ref"]=="string"&&(e.$ref=r(t,e.$ref));for(var i in e)i!=="enum"&&s(e[i],t)}}}function l(e,t,n,r,i){Error.call(this);if(e===undefined)throw new Error("No code supplied for error: "+t);this.message=t,this.code=e,this.dataPath=n||"",this.schemaPath=r||"",this.subErrors=i||null;var s=new Error(this.message);this.stack=s.stack||s.stacktrace;if(!this.stack)try{throw s}catch(s){this.stack=s.stack||s.stacktrace}}function c(e,t){if(t.substring(0,e.length)===e){var n=t.substring(e.length);if(t.length>0&&t.charAt(e.length-1)==="/"||n.charAt(0)==="#"||n.charAt(0)==="?")return!0}return!1}function p(t){var n=new e,a=t||"en",l={addFormat:function(){n.addFormat.apply(n,arguments)},language:function(e){return e?(h[e]||(e=e.split("-")[0]),h[e]?(a=e,e):!1):a},addLanguage:function(e,t){var n;for(n in o)t[n]&&!t[o[n]]&&(t[o[n]]=t[n]);var r=e.split("-")[0];if(!h[r])h[e]=t,h[r]=t;else{h[e]=Object.create(h[r]);for(n in t)typeof h[r][n]=="undefined"&&(h[r][n]=t[n]),h[e][n]=t[n]}return this},freshApi:function(e){var t=p();return e&&t.language(e),t},validate:function(t,r,i,s){var o=new e(n,!1,h[a],i,s);typeof r=="string"&&(r={$ref:r}),o.addSchema("",r);var u=o.validateAll(t,r,null,null,"");return!u&&s&&(u=o.banUnknownProperties()),this.error=u,this.missing=o.missing,this.valid=u===null,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(t,r,i,s){var o=new e(n,!0,h[a],i,s);typeof r=="string"&&(r={$ref:r}),o.addSchema("",r),o.validateAll(t,r,null,null,""),s&&o.banUnknownProperties();var u={};return u.errors=o.errors,u.missing=o.missing,u.valid=u.errors.length===0,u},addSchema:function(){return n.addSchema.apply(n,arguments)},getSchema:function(){return n.getSchema.apply(n,arguments)},getSchemaMap:function(){return n.getSchemaMap.apply(n,arguments)},getSchemaUris:function(){return n.getSchemaUris.apply(n,arguments)},getMissingUris:function(){return n.getMissingUris.apply(n,arguments)},dropSchemas:function(){n.dropSchemas.apply(n,arguments)},defineKeyword:function(){n.defineKeyword.apply(n,arguments)},defineError:function(e,t,n){if(typeof e!="string"||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if(typeof t!="number"||t%1!==0||t<1e4)throw new Error("Code number must be an integer > 10000");if(typeof o[e]!="undefined")throw new Error("Error already defined: "+e+" as "+o[e]);if(typeof u[t]!="undefined")throw new Error("Error code already used: "+u[t]+" as "+t);o[e]=t,u[t]=e,f[e]=f[t]=n;for(var r in h){var i=h[r];i[e]&&(i[t]=i[t]||i[e])}},reset:function(){n.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:s,resolveUrl:r,getDocumentUri:i,errorCodes:o};return l}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if(typeof i!="object"&&typeof i!="function"||i===null)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)e.call(i,o)&&s.push(o);if(t)for(var u=0;u<r;u++)e.call(i,n[u])&&s.push(n[u]);return s}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(arguments.length!==1)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:r!==0&&r!==Infinity&&r!==-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(e){var t="tv4_test_frozen_key";while(e.hasOwnProperty(t))t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(n){return!0}});var e=function(t,n,r,i,s){this.missing=[],this.missingMap={},this.formatValidators=t?Object.create(t.formatValidators):{},this.schemas=t?Object.create(t.schemas):{},this.collectMultiple=n,this.errors=[],this.handleError=n?this.collectError:this.returnError,i&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),s&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=r,this.definedKeywords={};if(t)for(var o in t.definedKeywords)this.definedKeywords[o]=t.definedKeywords[o].slice(0)};e.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},e.prototype.createError=function(e,t,n,r,i){var s=this.errorMessages[e]||f[e];if(typeof s!="string")return new l(e,"Unknown error code "+e+": "+JSON.stringify(t),n,r,i);var o=s.replace(/\{([^{}]*)\}/g,function(e,n){var r=t[n];return typeof r=="string"||typeof r=="number"?r:e});return new l(e,o,n,r,i)},e.prototype.returnError=function(e){return e},e.prototype.collectError=function(e){return e&&this.errors.push(e),null},e.prototype.prefixErrors=function(e,t,n){for(var r=e;r<this.errors.length;r++)this.errors[r]=this.errors[r].prefixWith(t,n);return this},e.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(o.UNKNOWN_PROPERTY,{path:e},e,""),n=this.handleError(t);if(n)return n}return null},e.prototype.addFormat=function(e,t){if(typeof e=="object"){for(var n in e)this.addFormat(n,e[n]);return this}this.formatValidators[e]=t},e.prototype.resolveRefs=function(e,t){if(e.$ref!==undefined){t=t||{};if(t[e.$ref])return this.createError(o.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},e.prototype.getSchema=function(e,t){var n;if(this.schemas[e]!==undefined)return n=this.schemas[e],this.resolveRefs(n,t);var r=e,i="";e.indexOf("#")!==-1&&(i=e.substring(e.indexOf("#")+1),r=e.substring(0,e.indexOf("#")));if(typeof this.schemas[r]=="object"){n=this.schemas[r];var s=decodeURIComponent(i);if(s==="")return this.resolveRefs(n,t);if(s.charAt(0)!=="/")return undefined;var o=s.split("/").slice(1);for(var u=0;u<o.length;u++){var a=o[u].replace(/~1/g,"/").replace(/~0/g,"~");if(n[a]===undefined){n=undefined;break}n=n[a]}if(n!==undefined)return this.resolveRefs(n,t)}this.missing[r]===undefined&&(this.missing.push(r),this.missing[r]=r,this.missingMap[r]=r)},e.prototype.searchSchemas=function(e,t){if(e&&typeof e=="object"){typeof e.id=="string"&&c(t,e.id)&&this.schemas[e.id]===undefined&&(this.schemas[e.id]=e);for(var n in e)if(n!=="enum")if(typeof e[n]=="object")this.searchSchemas(e[n],t);else if(n==="$ref"){var r=i(e[n]);r&&this.schemas[r]===undefined&&this.missingMap[r]===undefined&&(this.missingMap[r]=r)}}},e.prototype.addSchema=function(e,t){if(typeof e!="string"||typeof t=="undefined"){if(typeof e!="object"||typeof e.id!="string")return;t=e,e=t.id}e===i(e)+"#"&&(e=i(e)),this.schemas[e]=t,delete this.missingMap[e],s(t,e),this.searchSchemas(t,e)},e.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},e.prototype.getSchemaUris=function(e){var t=[];for(var n in this.schemas)(!e||e.test(n))&&t.push(n);return t},e.prototype.getMissingUris=function(e){var t=[];for(var n in this.missingMap)(!e||e.test(n))&&t.push(n);return t},e.prototype.dropSchemas=function(){this.schemas={},this.reset()},e.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},e.prototype.validateAll=function(e,t,n,r,i){var s;t=this.resolveRefs(t);if(!t)return null;if(t instanceof l)return this.errors.push(t),t;var o=this.errors.length,u,a=null,f=null;if(this.checkRecursive&&e&&typeof e=="object"){s=!this.scanned.length;if(e[this.validatedSchemasKey]){var c=e[this.validatedSchemasKey].indexOf(t);if(c!==-1)return this.errors=this.errors.concat(e[this.validationErrorsKey][c]),null}if(Object.isFrozen(e)){u=this.scannedFrozen.indexOf(e);if(u!==-1){var h=this.scannedFrozenSchemas[u].indexOf(t);if(h!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[u][h]),null}}this.scanned.push(e);if(Object.isFrozen(e))u===-1&&(u=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),a=this.scannedFrozenSchemas[u].length,this.scannedFrozenSchemas[u][a]=t,this.scannedFrozenValidationErrors[u][a]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(p){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}f=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][f]=t,e[this.validationErrorsKey][f]=[]}}var d=this.errors.length,v=this.validateBasic(e,t,i)||this.validateNumeric(e,t,i)||this.validateString(e,t,i)||this.validateArray(e,t,i)||this.validateObject(e,t,i)||this.validateCombinations(e,t,i)||this.validateFormat(e,t,i)||this.validateDefinedKeywords(e,t,i)||null;if(s){while(this.scanned.length){var m=this.scanned.pop();delete m[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(v||d!==this.errors.length)while(n&&n.length||r&&r.length){var g=n&&n.length?""+n.pop():null,y=r&&r.length?""+r.pop():null;v&&(v=v.prefixWith(g,y)),this.prefixErrors(d,g,y)}return a!==null?this.scannedFrozenValidationErrors[u][a]=this.errors.slice(o):f!==null&&(e[this.validationErrorsKey][f]=this.errors.slice(o)),this.handleError(v)},e.prototype.validateFormat=function(e,t){if(typeof t.format!="string"||!this.formatValidators[t.format])return null;var n=this.formatValidators[t.format].call(null,e,t);return typeof n=="string"||typeof n=="number"?this.createError(o.FORMAT_CUSTOM,{message:n}).prefixWith(null,"format"):n&&typeof n=="object"?this.createError(o.FORMAT_CUSTOM,{message:n.message||"?"},n.dataPath||null,n.schemaPath||"/format"):null},e.prototype.validateDefinedKeywords=function(e,t){for(var n in this.definedKeywords){if(typeof t[n]=="undefined")continue;var r=this.definedKeywords[n];for(var i=0;i<r.length;i++){var s=r[i],u=s(e,t[n],t);if(typeof u=="string"||typeof u=="number")return this.createError(o.KEYWORD_CUSTOM,{key:n,message:u}).prefixWith(null,"format");if(u&&typeof u=="object"){var a=u.code||o.KEYWORD_CUSTOM;if(typeof a=="string"){if(!o[a])throw new Error("Undefined error code (use defineError): "+a);a=o[a]}var f=typeof u.message=="object"?u.message:{key:n,message:u.message||"?"},l=u.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(a,f,u.dataPath||null,l)}}}return null},e.prototype.validateBasic=function(t,n,r){var i;return(i=this.validateType(t,n,r))?i.prefixWith(null,"type"):(i=this.validateEnum(t,n,r))?i.prefixWith(null,"type"):null},e.prototype.validateType=function(t,n){if(n.type===undefined)return null;var r=typeof t;t===null?r="null":Array.isArray(t)&&(r="array");var i=n.type;typeof i!="object"&&(i=[i]);for(var s=0;s<i.length;s++){var u=i[s];if(u===r||u==="integer"&&r==="number"&&t%1===0)return null}return this.createError(o.INVALID_TYPE,{type:r,expected:i.join("/")})},e.prototype.validateEnum=function(n,r){if(r["enum"]===undefined)return null;for(var i=0;i<r["enum"].length;i++){var s=r["enum"][i];if(t(n,s))return null}return this.createError(o.ENUM_MISMATCH,{value:typeof JSON!="undefined"?JSON.stringify(n):n})},e.prototype.validateNumeric=function(t,n,r){return this.validateMultipleOf(t,n,r)||this.validateMinMax(t,n,r)||null},e.prototype.validateMultipleOf=function(t,n){var r=n.multipleOf||n.divisibleBy;return r===undefined?null:typeof t=="number"&&t%r!==0?this.createError(o.NUMBER_MULTIPLE_OF,{value:t,multipleOf:r}):null},e.prototype.validateMinMax=function(t,n){if(typeof t!="number")return null;if(n.minimum!==undefined){if(t<n.minimum)return this.createError(o.NUMBER_MINIMUM,{value:t,minimum:n.minimum}).prefixWith(null,"minimum");if(n.exclusiveMinimum&&t===n.minimum)return this.createError(o.NUMBER_MINIMUM_EXCLUSIVE,{value:t,minimum:n.minimum}).prefixWith(null,"exclusiveMinimum")}if(n.maximum!==undefined){if(t>n.maximum)return this.createError(o.NUMBER_MAXIMUM,{value:t,maximum:n.maximum}).prefixWith(null,"maximum");if(n.exclusiveMaximum&&t===n.maximum)return this.createError(o.NUMBER_MAXIMUM_EXCLUSIVE,{value:t,maximum:n.maximum}).prefixWith(null,"exclusiveMaximum")}return null},e.prototype.validateString=function(t,n,r){return this.validateStringLength(t,n,r)||this.validateStringPattern(t,n,r)||null},e.prototype.validateStringLength=function(t,n){return typeof t!="string"?null:n.minLength!==undefined&&t.length<n.minLength?this.createError(o.STRING_LENGTH_SHORT,{length:t.length,minimum:n.minLength}).prefixWith(null,"minLength"):n.maxLength!==undefined&&t.length>n.maxLength?this.createError(o.STRING_LENGTH_LONG,{length:t.length,maximum:n.maxLength}).prefixWith(null,"maxLength"):null},e.prototype.validateStringPattern=function(t,n){if(typeof t!="string"||n.pattern===undefined)return null;var r=new RegExp(n.pattern);return r.test(t)?null:this.createError(o.STRING_PATTERN,{pattern:n.pattern}).prefixWith(null,"pattern")},e.prototype.validateArray=function(t,n,r){return Array.isArray(t)?this.validateArrayLength(t,n,r)||this.validateArrayUniqueItems(t,n,r)||this.validateArrayItems(t,n,r)||null:null},e.prototype.validateArrayLength=function(t,n){var r;if(n.minItems!==undefined&&t.length<n.minItems){r=this.createError(o.ARRAY_LENGTH_SHORT,{length:t.length,minimum:n.minItems}).prefixWith(null,"minItems");if(this.handleError(r))return r}if(n.maxItems!==undefined&&t.length>n.maxItems){r=this.createError(o.ARRAY_LENGTH_LONG,{length:t.length,maximum:n.maxItems}).prefixWith(null,"maxItems");if(this.handleError(r))return r}return null},e.prototype.validateArrayUniqueItems=function(n,r){if(r.uniqueItems)for(var i=0;i<n.length;i++)for(var s=i+1;s<n.length;s++)if(t(n[i],n[s])){var u=this.createError(o.ARRAY_UNIQUE,{match1:i,match2:s}).prefixWith(null,"uniqueItems");if(this.handleError(u))return u}return null},e.prototype.validateArrayItems=function(t,n,r){if(n.items===undefined)return null;var i,s;if(Array.isArray(n.items)){for(s=0;s<t.length;s++)if(s<n.items.length){if(i=this.validateAll(t[s],n.items[s],[s],["items",s],r+"/"+s))return i}else if(n.additionalItems!==undefined)if(typeof n.additionalItems=="boolean"){if(!n.additionalItems){i=this.createError(o.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+s,"additionalItems");if(this.handleError(i))return i}}else if(i=this.validateAll(t[s],n.additionalItems,[s],["additionalItems"],r+"/"+s))return i}else for(s=0;s<t.length;s++)if(i=this.validateAll(t[s],n.items,[s],["items"],r+"/"+s))return i;return null},e.prototype.validateObject=function(t,n,r){return typeof t!="object"||t===null||Array.isArray(t)?null:this.validateObjectMinMaxProperties(t,n,r)||this.validateObjectRequiredProperties(t,n,r)||this.validateObjectProperties(t,n,r)||this.validateObjectDependencies(t,n,r)||null},e.prototype.validateObjectMinMaxProperties=function(t,n){var r=Object.keys(t),i;if(n.minProperties!==undefined&&r.length<n.minProperties){i=this.createError(o.OBJECT_PROPERTIES_MINIMUM,{propertyCount:r.length,minimum:n.minProperties}).prefixWith(null,"minProperties");if(this.handleError(i))return i}if(n.maxProperties!==undefined&&r.length>n.maxProperties){i=this.createError(o.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:r.length,maximum:n.maxProperties}).prefixWith(null,"maxProperties");if(this.handleError(i))return i}return null},e.prototype.validateObjectRequiredProperties=function(t,n){if(n.required!==undefined)for(var r=0;r<n.required.length;r++){var i=n.required[r];if(t[i]===undefined){var s=this.createError(o.OBJECT_REQUIRED,{key:i}).prefixWith(null,""+r).prefixWith(null,"required");if(this.handleError(s))return s}}return null},e.prototype.validateObjectProperties=function(t,n,r){var i;for(var s in t){var u=r+"/"+s.replace(/~/g,"~0").replace(/\//g,"~1"),a=!1;if(n.properties!==undefined&&n.properties[s]!==undefined){a=!0;if(i=this.validateAll(t[s],n.properties[s],[s],["properties",s],u))return i}if(n.patternProperties!==undefined)for(var f in n.patternProperties){var l=new RegExp(f);if(l.test(s)){a=!0;if(i=this.validateAll(t[s],n.patternProperties[f],[s],["patternProperties",f],u))return i}}if(!a)if(n.additionalProperties!==undefined){this.trackUnknownProperties&&(this.knownPropertyPaths[u]=!0,delete this.unknownPropertyPaths[u]);if(typeof n.additionalProperties=="boolean"){if(!n.additionalProperties){i=this.createError(o.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(s,"additionalProperties");if(this.handleError(i))return i}}else if(i=this.validateAll(t[s],n.additionalProperties,[s],["additionalProperties"],u))return i}else this.trackUnknownProperties&&!this.knownPropertyPaths[u]&&(this.unknownPropertyPaths[u]=!0);else this.trackUnknownProperties&&(this.knownPropertyPaths[u]=!0,delete this.unknownPropertyPaths[u])}return null},e.prototype.validateObjectDependencies=function(t,n,r){var i;if(n.dependencies!==undefined)for(var s in n.dependencies)if(t[s]!==undefined){var u=n.dependencies[s];if(typeof u=="string"){if(t[u]===undefined){i=this.createError(o.OBJECT_DEPENDENCY_KEY,{key:s,missing:u}).prefixWith(null,s).prefixWith(null,"dependencies");if(this.handleError(i))return i}}else if(Array.isArray(u))for(var a=0;a<u.length;a++){var f=u[a];if(t[f]===undefined){i=this.createError(o.OBJECT_DEPENDENCY_KEY,{key:s,missing:f}).prefixWith(null,""+a).prefixWith(null,s).prefixWith(null,"dependencies");if(this.handleError(i))return i}}else if(i=this.validateAll(t,u,[],["dependencies",s],r))return i}return null},e.prototype.validateCombinations=function(t,n,r){return this.validateAllOf(t,n,r)||this.validateAnyOf(t,n,r)||this.validateOneOf(t,n,r)||this.validateNot(t,n,r)||null},e.prototype.validateAllOf=function(t,n,r){if(n.allOf===undefined)return null;var i;for(var s=0;s<n.allOf.length;s++){var o=n.allOf[s];if(i=this.validateAll(t,o,[],["allOf",s],r))return i}return null},e.prototype.validateAnyOf=function(t,n,r){if(n.anyOf===undefined)return null;var i=[],s=this.errors.length,u,a;this.trackUnknownProperties&&(u=this.unknownPropertyPaths,a=this.knownPropertyPaths);var f=!0;for(var l=0;l<n.anyOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=n.anyOf[l],h=this.errors.length,p=this.validateAll(t,c,[],["anyOf",l],r);if(p===null&&h===this.errors.length){this.errors=this.errors.slice(0,s);if(this.trackUnknownProperties){for(var d in this.knownPropertyPaths)a[d]=!0,delete u[d];for(var v in this.unknownPropertyPaths)a[v]||(u[v]=!0);f=!1;continue}return null}p&&i.push(p.prefixWith(null,""+l).prefixWith(null,"anyOf"))}this.trackUnknownProperties&&(this.unknownPropertyPaths=u,this.knownPropertyPaths=a);if(f)return i=i.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(o.ANY_OF_MISSING,{},"","/anyOf",i)},e.prototype.validateOneOf=function(t,n,r){if(n.oneOf===undefined)return null;var i=null,s=[],u=this.errors.length,a,f;this.trackUnknownProperties&&(a=this.unknownPropertyPaths,f=this.knownPropertyPaths);for(var l=0;l<n.oneOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=n.oneOf[l],h=this.errors.length,p=this.validateAll(t,c,[],["oneOf",l],r);if(p===null&&h===this.errors.length){if(i!==null)return this.errors=this.errors.slice(0,u),this.createError(o.ONE_OF_MULTIPLE,{index1:i,index2:l},"","/oneOf");i=l;if(this.trackUnknownProperties){for(var d in this.knownPropertyPaths)f[d]=!0,delete a[d];for(var v in this.unknownPropertyPaths)f[v]||(a[v]=!0)}}else p&&s.push(p.prefixWith(null,""+l).prefixWith(null,"oneOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=a,this.knownPropertyPaths=f),i===null?(s=s.concat(this.errors.slice(u)),this.errors=this.errors.slice(0,u),this.createError(o.ONE_OF_MISSING,{},"","/oneOf",s)):(this.errors=this.errors.slice(0,u),null)},e.prototype.validateNot=function(t,n,r){if(n.not===undefined)return null;var i=this.errors.length,s,u;this.trackUnknownProperties&&(s=this.unknownPropertyPaths,u=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(t,n.not,null,null,r),f=this.errors.slice(i);return this.errors=this.errors.slice(0,i),this.trackUnknownProperties&&(this.unknownPropertyPaths=s,this.knownPropertyPaths=u),a===null&&f.length===0?this.createError(o.NOT_PASSED,{},"","/not"):null};var o={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},u={};for(var a in o)u[o[a]]=a;var f={INVALID_TYPE:"invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="ValidationError",l.prototype.prefixWith=function(e,t){e!==null&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),t!==null&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath);if(this.subErrors!==null)for(var n=0;n<this.subErrors.length;n++)this.subErrors[n].prefixWith(e,t);return this};var h={},d=p();return d.addLanguage("en-gb",f),d.tv4=d,d}),define("schema",[],function(){var e={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{id:{type:"string"},name:{type:"string"},tags:{type:"array",items:{type:"string"}},audio:{type:"object",properties:{artist:{type:"string"},title:{type:"string"},duration:{type:"number"},streamUrl:{type:"string"},permalinkUrl:{type:"string"}},required:["artist","title","duration","streamUrl","permalinkUrl"]},visuals:{type:"object"},gameObjects:{type:"array",items:[{type:"object",properties:{type:{type:"string","enum":["Tap"]},tapTime:{type:"number"},x:{type:"number"},y:{type:"number"},shape:{type:"object",properties:{type:{type:"string","enum":["circle","square_sidedown","square_edgedown","triangle_sidedown","triangle_edgedown"]},size:{type:"string","enum":["small","medium","large"]}},required:["type","size"]}},required:["type","tapTime","x","y","shape"]}],minItems:1,uniqueItems:!0},owner:{type:"object",properties:{id:{type:"string"},username:{type:"string"},homepage:{type:"string"}},required:["id","username"]}},required:["id","name","audio","gameObjects","owner"]};return e}),define("util/levelvalidator",["jquery","underscore","backbone","tv4","schema"],function(e,t,n,r,i){var s={};return s.validate=function(e){try{if(r.validate(JSON.parse(e),i))return!0;console.info("Level validation: "+r.error.message)}catch(t){console.info("Level validation: "+t.message)}return!1},s}),define("models/GameObject",["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({defaults:{shape:{type:"circle",size:"medium"}},parse:function(e){var t={};for(var n in e)switch(n){case"taptime":t.tapTime=e[n];break;default:t[n]=e[n]}return t}});return r}),define("collections/GameObjectCollection",["jquery","underscore","backbone","models/GameObject"],function(e,t,n,r){var i=n.Collection.extend({model:r});return i}),define("models/Level",["jquery","underscore","backbone","util/levelvalidator","collections/GameObjectCollection"],function(e,t,n,r,i){var s=n.Model.extend({defaults:{},initialize:function(){},parse:function(e){var t={};for(var n in e)switch(n){case"gameObjects":t.gameObjects=new i(e[n],{parse:!0});break;default:t[n]=e[n]}return t},toJSON:function(){return this.deepcopy(this.attributes)},deepcopy:function(e){var t={};for(var n in e)typeof e[n]=="object"&&e[n]!==null?typeof e[n].toJSON=="function"?(console.info(".toJSON() method used for nested model/collection "+n),t[n]=e[n].toJSON()):t[n]=this.deepcopy(e[n]):t[n]=e[n];return t},validate:function(e){}});return s}),define("collections/LevelCollection",["jquery","underscore","backbone","models/Level"],function(e,t,n,r){var i=n.Collection.extend({model:r});return i}),define("levelcontainer",["jquery","underscore","backbone","collections/LevelCollection"],function(e,t,n,r){levelcontainer=[{audio:{title:"Great White Bear",artist:"Dear Reader",streamUrl:"http://api.soundcloud.com/tracks/57984848/stream",permalinkUrl:"http://soundcloud.com/dearreadermusic/03-great-white-bear",duration:0},gameObjects:[{type:"Tap",x:130,y:650,tapTime:7.9786666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:9.8986666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:10.837333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:11.861333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:13.269333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:13.525333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:130,y:650,tapTime:15.658666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:17.621333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:18.602666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:19.541333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:20.949333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:21.248,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:150,tapTime:23.338666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:150,tapTime:23.850666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:450,tapTime:24.413333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:450,tapTime:24.874666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:750,tapTime:25.344,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:750,tapTime:25.856,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:1050,tapTime:26.368,shape:{type:"circle",size:"medium"}},{type:"Tap",x:330,y:1050,tapTime:26.88,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:1050,tapTime:27.093333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:750,tapTime:27.306666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:450,tapTime:27.776,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:150,tapTime:28.245333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:150,tapTime:28.8,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:150,tapTime:29.013333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:450,tapTime:29.269333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:730,tapTime:29.696,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:1050,tapTime:30.165333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:150,tapTime:31.146666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:150,tapTime:31.573333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:450,tapTime:32.085333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:450,tapTime:32.554666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:750,tapTime:33.024,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:750,tapTime:33.493333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:1050,tapTime:34.005333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:330,y:1050,tapTime:34.517333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:1050,tapTime:34.730666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:750,tapTime:34.986666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:450,tapTime:35.456,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:150,tapTime:35.925333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:150,tapTime:36.394666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:150,tapTime:36.650666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:450,tapTime:36.906666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:750,tapTime:37.376,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:1050,tapTime:37.845333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:150,tapTime:38.826666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:150,tapTime:39.253333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:450,tapTime:39.765333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:450,tapTime:40.277333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:750,tapTime:40.789333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1500,y:750,tapTime:41.258666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:50,y:1050,tapTime:41.770666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:330,y:1050,tapTime:42.24,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:1050,tapTime:42.453333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:750,tapTime:42.752,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:450,tapTime:43.221333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:550,y:150,tapTime:43.690666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:150,tapTime:44.16,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:150,tapTime:44.373333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:450,tapTime:44.629333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:750,tapTime:45.098666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:970,y:1050,tapTime:45.568,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:550,tapTime:46.592,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:48.554666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:800,tapTime:50.432,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:550,tapTime:52.352,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:550,tapTime:54.314666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:56.234666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:1050,tapTime:57.216,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:57.685333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:800,tapTime:58.197333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:550,tapTime:60.117333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:130,y:650,tapTime:62.037333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:64,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:64.896,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:65.877333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:67.285333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:67.541333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:130,y:650,tapTime:69.674666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:71.637333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:72.533333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:73.557333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:75.008,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:75.221333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:77.482666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:78.890666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:80.384,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:81.365333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:82.816,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:84.224,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:85.162666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:86.613333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:88.064,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:89.045333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:90.496,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:91.946666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:92.928,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:850,tapTime:93.653333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:94.378666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:975,y:600,tapTime:95.146666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:95.829333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:300,y:850,tapTime:96.768,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:850,tapTime:97.493333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:850,tapTime:98.218666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:975,y:600,tapTime:98.944,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:350,tapTime:99.669333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:500,y:600,tapTime:100.65066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:600,tapTime:101.54666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:500,tapTime:102.528,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:200,tapTime:103.50933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:700,tapTime:104.40533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1e3,tapTime:105.38666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1100,y:600,tapTime:106.28266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:600,tapTime:107.30666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:500,y:600,tapTime:108.24533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:600,tapTime:109.184,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:500,tapTime:110.208,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:200,tapTime:111.232,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:700,tapTime:112.128,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1e3,tapTime:113.10933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:114.09066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:114.09066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:115.072,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:115.072,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:116.096,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:116.096,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:117.034,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:117.034,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:118.05866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:118.05866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:118.99733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:118.99733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:119.936,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:119.936,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:120.87466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:120.87466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:121.856,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:121.856,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:122.83733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:122.83733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:123.776,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:123.776,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:124.75,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:124.75,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:125.73866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:125.73866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:126.67733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:126.67733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:127.65866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:127.65866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:128.64,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:128.64,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:500,tapTime:129.62133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:150,tapTime:133.41866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:150,tapTime:133.41866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:150,tapTime:134.4,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:150,tapTime:134.4,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:450,tapTime:135.424,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:450,tapTime:135.424,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:450,tapTime:136.36266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:450,tapTime:136.36266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:750,tapTime:137.30133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:750,tapTime:137.30133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:750,tapTime:138.28266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:750,tapTime:138.28266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:1050,tapTime:139.17,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:1050,tapTime:139.17,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:1050,tapTime:140.20266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:1050,tapTime:140.20266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:150,tapTime:141.14133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:150,tapTime:141.14133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:150,tapTime:142.16533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:150,tapTime:142.16533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:450,tapTime:143.104,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:450,tapTime:143.104,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:450,tapTime:144.04266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:450,tapTime:144.04266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:750,tapTime:144.98133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:750,tapTime:144.98133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:750,tapTime:145.92,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:750,tapTime:145.92,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:1050,tapTime:146.816,shape:{type:"circle",size:"medium"}},{type:"Tap",x:900,y:1050,tapTime:146.816,shape:{type:"circle",size:"medium"}},{type:"Tap",x:350,y:1050,tapTime:147.75466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:1050,tapTime:147.75466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:150.86933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:151.76533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:151.89333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:152.27733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:152.74666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:153.68533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:153.81333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:154.19733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:154.70933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:155.60533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:155.73333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:156.11733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:156.672,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:157.52533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:157.696,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:158.08,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:158.54933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:159.44533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:159.57333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:159.95733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:160.46933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:650,y:700,tapTime:161.408,shape:{type:"circle",size:"medium"}},{type:"Tap",x:920,y:700,tapTime:161.536,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:161.92,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:700,tapTime:162.38933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:500,y:700,tapTime:163.2,shape:{type:"circle",size:"medium"}},{type:"Tap",x:770,y:700,tapTime:163.328,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1040,y:700,tapTime:163.584,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:700,tapTime:163.79733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:164.26666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:166.22933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:167.168,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:168.14933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:169.13066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1300,y:900,tapTime:170.112,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1600,y:900,tapTime:171.09333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:171.98933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:172.50133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:173.952,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:174.93333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:175.872,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:176.85333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1300,y:900,tapTime:177.792,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1600,y:900,tapTime:178.77333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:179.712,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:180.13866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:300,tapTime:180.69333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:181.71733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:182.69866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:183.59466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:184.53333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1300,y:900,tapTime:185.51466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1600,y:900,tapTime:186.5,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:187.43466666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:187.904,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:300,tapTime:188.45866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:189.44,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:190.37866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:191.36,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:192.256,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1300,y:900,tapTime:193.23733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1600,y:900,tapTime:194.21866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:195.15733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:195.584,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:300,tapTime:196.13866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:197.12,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:198.10133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:199.04,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:199.97866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1300,y:900,tapTime:201.00266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1600,y:900,tapTime:201.984,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:300,tapTime:202.88,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:300,tapTime:203.34933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:300,tapTime:203.81866666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:100,y:900,tapTime:204.84266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:900,tapTime:205.824,shape:{type:"circle",size:"medium"}},{type:"Tap",x:700,y:900,tapTime:206.76266666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:207.70133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:208.72533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:208.72533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:209.70666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:209.70666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:210.688,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:210.688,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:211.62,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:211.62,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:212.56533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:212.56533333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:213.55,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:213.55,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:214.528,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:214.528,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:215.55,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:215.55,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:216.448,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:216.448,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:217.38666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:217.38666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:218.368,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:218.368,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:219.30666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:219.30666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:220.288,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:220.288,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:221.269,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:221.269,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:222.208,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:222.208,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:223.189,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:223.189,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:1050,tapTime:224.128,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1050,tapTime:224.128,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:750,tapTime:225.10933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:750,tapTime:225.10933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:450,tapTime:226.048,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:450,tapTime:226.048,shape:{type:"circle",size:"medium"}},{type:"Tap",x:150,y:150,tapTime:227.02933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:150,tapTime:227.02933333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:130,y:650,tapTime:228.05333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:229.97333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:230.912,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:231.85066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:233.30133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:233.55733333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:130,y:650,tapTime:235.73333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:450,y:350,tapTime:237.65333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:750,y:950,tapTime:238.592,shape:{type:"circle",size:"medium"}},{type:"Tap",x:930,y:650,tapTime:239.53066666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1150,y:650,tapTime:240.98133333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1420,y:650,tapTime:241.28,shape:{type:"circle",size:"medium"}}],name:"Demolevel 1",owner:{username:"LiaLinnÃ©a",id:"undefined"},id:"undefined_1"},{audio:{title:"Don't Wanna Dance (Clip)",artist:"_MÃ_",streamUrl:"http://api.soundcloud.com/tracks/129873688/stream",permalinkUrl:"http://soundcloud.com/momomoyouth/dont-wanna-dance-90clip",duration:0},gameObjects:[{type:"Tap",x:400,y:600,tapTime:7.637333333333332,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:7.978666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:8.319999999999999,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:9.045333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:9.557333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:9.898666666666665,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:10.24,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:10.922666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:11.392000000000001,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:11.690666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:12.031999999999998,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:12.714666666666668,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:13.226666666666665,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:13.568,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:13.909333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:14.634666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:15.061333333333332,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:15.402666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:15.786666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:16.384,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:16.896,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:17.237333333333332,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:17.578666666666663,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:18.261333333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:18.730666666666664,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:19.072000000000003,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:19.370666666666665,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:20.138666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:20.693333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:20.991999999999997,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:21.290666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:22.442666666666668,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:22.784,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:23.125333333333337,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:23.381333333333338,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:23.85066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:24.27733333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:24.576,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:24.96,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:25.216,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:25.685333333333332,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:26.15466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:26.453333333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:26.837333333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:27.093333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:27.562666666666665,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:27.989333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:28.288000000000004,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:28.672000000000004,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:28.928000000000004,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:29.354666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:29.866666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:30.165333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:30.506666666666668,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:30.762666666666668,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:31.40266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:31.701333333333338,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:32,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:32.384,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:32.59733333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:33.024,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:33.536,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:33.83466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:34.21866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:34.47466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:34.944,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:37.205333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:37.54666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:37.93066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:38.144,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:38.61333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:39.08266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:39.38133333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:39.72266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:39.97866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:40.448,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:40.91733333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:41.25866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:41.64266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:41.89866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:42.368,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:44.629333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:44.928000000000004,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:45.312000000000005,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:45.525333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:45.952,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:46.42133333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:46.76266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1195,y:600,tapTime:47.14666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:47.36,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:47.82933333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:48.34133333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:48.64,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1247,y:600,tapTime:49.024,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:49.23733333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:49.70666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:52.010666666666665,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:52.053333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:52.522666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:52.522666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:52.949333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:52.992000000000004,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:53.376000000000005,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:53.41866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:53.845333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:53.888,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:54.31466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:54.31466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:54.784,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:54.784,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:55.21066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:55.21066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:55.68000000000001,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:55.68000000000001,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:56.14933333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:56.14933333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:56.61866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:56.61866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:57.04533333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:57.04533333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:57.51466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:57.51466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:57.983999999999995,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:57.983999999999995,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:58.495999999999995,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:58.53866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:58.92266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:58.92266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:59.349333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:59.391999999999996,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:59.81866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:59.81866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:60.33066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:60.33066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:60.757333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:60.757333333333335,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:61.184,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:61.226666666666674,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:61.653333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:61.696,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:62.122666666666674,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:62.165333333333336,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:62.592,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:62.592,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:63.01866666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:63.01866666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:63.53066666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:63.53066666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:64.04266666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:64.04266666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:64.42666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:64.46933333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:180,tapTime:64.896,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:180,tapTime:64.896,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1400,y:1020,tapTime:65.36533333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:200,y:1020,tapTime:65.408,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:300,tapTime:65.87733333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:300,tapTime:65.87733333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1e3,y:900,tapTime:66.304,shape:{type:"circle",size:"medium"}},{type:"Tap",x:600,y:900,tapTime:66.34666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:70.48533333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:70.784,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:71.12533333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:72.32000000000001,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:72.66133333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:73.00266666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:74.112,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:74.496,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:74.83733333333333,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:75.52,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:76.032,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:76.33066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:76.672,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:77.35466666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:77.86666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:78.16533333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:78.50666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:78.76266666666668,shape:{type:"circle",size:"medium"}},{type:"Tap",x:771,y:180,tapTime:79.18933333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:79.70133333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:80,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:80.384,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:80.59733333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:81.06666666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:81.536,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:81.87733333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:82.21866666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:82.47466666666666,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:82.90133333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:83.41333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:83.712,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:84.05333333333334,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:84.352,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:84.77866666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:400,y:600,tapTime:85.248,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:600,tapTime:85.54666666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:1200,y:600,tapTime:85.93066666666667,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:1020,tapTime:86.144,shape:{type:"circle",size:"medium"}},{type:"Tap",x:800,y:180,tapTime:86.61333333333333,shape:{type:"circle",size:"medium"}}],name:"Demolevel 2",owner:{username:"coloreddrums",id:"undefined"},id:"undefined_2"}];var i=new r(levelcontainer,{parse:!0});return console.log(i.toJSON()),i}),define("text!templates/components/leveltext-input.html",[],function(){return'<div class="row">\r\n    <div class="form-group inputstatediv">\r\n        <label class="control-label">The level-text</label>\r\n        <input type="text" class="form-control input-lg leveljsoninput" placeholder="Copy you level-text here...">\r\n\r\n    </div>\r\n</div>\r\n<div class="row">\r\n    <div class="list-group levelcontainer_custom"></div>\r\n</div>'}),define("views/components/html/LevelTextInputView",["jquery","underscore","backbone","util/levelvalidator","text!templates/components/leveltext-input.html","views/components/html/LevelPanelView","models/Level"],function(e,t,n,r,i,s,o){var u=n.View.extend({template:t.template(i,{}),initialize:function(e){this.callback=e},render:function(){return this.$el.html(this.template),this.containerelement_custom=this.$(".levelcontainer_custom"),this.inputstatediv=this.$(".inputstatediv"),this},events:{"input .leveljsoninput":"inputchanged"},inputchanged:function(){var e=this.$(".leveljsoninput").val();if(e=="")this.inputstatediv.removeClass("has-success has-error"),this.containerelement_custom.slideUp(),this.$(".alert_invalidlevel").is(":visible")&&this.$(".alert_invalidlevel").slideUp(),this.containerelement_custom.is(":visible")&&this.containerelement_custom.slideUp();else if(r.validate(e)){this.inputstatediv.removeClass("has-error").addClass("has-success"),this.$(".alert_invalidlevel").is(":visible")&&this.$(".alert_invalidlevel").slideUp();var t=new s(this.callback);t.render(new o(JSON.parse(e),{parse:!0})),this.containerelement_custom.html(t.el),this.containerelement_custom.is(":visible")||this.containerelement_custom.slideDown()}else this.inputstatediv.removeClass("has-success").addClass("has-error"),this.containerelement_custom.is(":visible")&&this.containerelement_custom.slideUp(),this.$(".alert_invalidlevel").slideDown(),this.containerelement_custom.is(":visible")&&this.containerelement_custom.slideUp()}});return u}),define("views/ChooseLevelView",["jquery","underscore","backbone","text!templates/leveloverview.html","views/components/html/LevelPanelView","levelcontainer","app","views/components/html/LevelTextInputView"],function(e,t,n,r,i,s,o,u){var a=n.View.extend({render:function(){n.history.navigate("chooselevel",{trigger:!1,replace:!0});var a=t.template(r,{});this.$el.html(a),this.levelpanelviews=[],this.containerelement_packaged=e("#levelcontainer_packaged"),this.containerelement_custom=e("#levelcontainer_custom"),this.inputstatediv=e("#inputstatediv"),this.containerelement_packaged.html("");var f=o.startlevel.bind(o);s.forEach(function(e){var t=new i(f);t.render(e),this.containerelement_packaged.append(t.el),this.levelpanelviews.push(t)}.bind(this));var l=new u(f);l.render(),e("#manualinputcontainer").html(l.el)}});return a}),define("text!templates/applicationwithmenu.html",[],function(){return'<div class="navbar navbar-inverse" id="menu">\r\n</div>\r\n<div id="abovecontent"></div>\r\n<div id="content"></div>\r\n<hr>\r\n<div class="container">\r\n    <footer>\r\n        Version: <strong>indev</strong>\r\n        <a class="pull-right" href="http://soundcloud.com" target="_blank">\r\n            <img src="img/powered_by_black.png"/>\r\n        </a>\r\n        </p>\r\n    </footer>\r\n</div>'}),define("views/components/html/ApplicationWithMenuView",["jquery","underscore","backbone","text!templates/applicationwithmenu.html","views/components/html/MenuView"],function(e,t,n,r,i){var s=n.View.extend({el:"body",render:function(){var e=t.template(r,{});this.$el.html(e),this.menu=new i,this.menu.render()},getMenu:function(){return this.menu}});return s}),define("text!templates/404.html",[],function(){return'<div class="container">\r\n    <div class="alert alert-warning alert-dismissable" id="alert404" style="display:none">\r\n        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\r\n        <strong>Sorry!</strong> The page you requested could not be found. You\'ve been redirected to the home page.\r\n    </div>\r\n</div>'}),define("views/PageNotFoundView",["jquery","underscore","backbone","text!templates/404.html"],function(e,t,n,r){var i=n.View.extend({el:"#abovecontent",render:function(){var i=t.template(r,{});this.$el.html(i),e("#alert404").slideDown(),n.history.bind("route",this.updateState)},updateState:function(t,n){if(n!="notfound"){console.log(n);var r=e("#alert404");r!=null&&r.slideUp()}}});return i}),define("text!templates/legal.html",[],function(){return'\r\n<div class="container">\r\n<h2>Person responsible for content in accordance with 55 Abs. 2 RStV</h2>\r\n    <br>\r\n    Hermann Stolte\r\n    <br><br>\r\n\r\n\r\n<h2>Disclaimer</h2>\r\nAccountability for content\r\nThe contents of our pages have been created with the utmost care. However, we cannot guarantee the contents\' accuracy, completeness or topicality. According to statutory provisions, we are furthermore responsible for our own content on these web pages. In this context, please note that we are accordingly not obliged to monitor merely the transmitted or saved information of third parties, or investigate circumstances pointing to illegal activity. Our obligations to remove or block the use of information under generally applicable laws remain unaffected by this as per Â§Â§ 8 to 10 of the Telemedia Act (TMG).\r\n\r\nAccountability for links\r\nResponsibility for the content of external links (to web pages of third parties) lies solely with the operators of the linked pages. No violations were evident to us at the time of linking. Should any legal infringement become known to us, we will remove the respective link immediately.\r\n\r\nCopyright\r\nOur web pages and their contents are subject to German copyright law. Unless expressly permitted by law (Â§ 44a et seq. of the copyright law), every form of utilizing, reproducing or processing works subject to copyright protection on our web pages requires the prior consent of the respective owner of the rights. Individual reproductions of a work are allowed only for private use, so must not serve either directly or indirectly for earnings. Unauthorized utilization of copyrighted works is punishable (Â§ 106 of the copyright law).\r\n\r\n<i>Source: </i><a href="http://www.twigg.de" target="_blank">twiggs translations</a>\r\n\r\n<h3 id="dependencies">Third-party involvement</h3>\r\n<p>TouchTheBeat uses the following <strong>third party services</strong>:</p>\r\n<ul>\r\n    <li><strong>\'audio streaming service\' offered by SoundCloud Limited</strong>, a company incorporated under the laws of England &amp; Wales and with its main place of business at Rheinsberger Str. 76/77, 10115 Berlin, Germany. More information about SoundCloud is available here: https://soundcloud.com/imprint </li>\r\n</ul>\r\n<p>I may not be associated with any of these third party services or content provided by them.</p>\r\n<p>TouchTheBeat uses and contains the following <strong>software components</strong> under their respective licenses:</p>\r\n<ul>\r\n    <li><strong>jQuery</strong> JavaScript Library v1.10.1, http://jquery.com/, Includes Sizzle.js http://sizzlejs.com/ Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors Released under the MIT license</li>\r\n    <li><strong>Underscore.js</strong> 1.6.0 http://underscorejs.org (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters &amp; Editors MIT license.</li>\r\n    <li><strong>Backbone.js</strong> 1.1.2 http://backbonejs.org (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters &amp; Editors MIT license</li>\r\n    <li><strong>RequireJS</strong> 2.1.13 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved. Available via the MIT or new BSD license. see: http://github.com/jrburke/requirejs for details</li>\r\n    <li><strong>RequireJS text</strong> 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved. Available via the MIT or new BSD license. see: http://github.com/requirejs/text for details</li>\r\n    <li><strong>Bootstrap</strong> v3.2.0 (http://getbootstrap.com) Copyright 2011-2014 Twitter, Inc. Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)</li>\r\n    <li><strong>Snap.svg</strong> 0.3.0 Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved. Licensed under the Apache License, Version 2.0 ; http://www.apache.org/licenses/LICENSE-2.0</li>\r\n    <li><strong>TV4.js</strong> Author: Geraint Luff and others Year: 2013 This code is released into the "public domain" by its auth</li>\r\n\r\n</ul>\r\n\r\n<h2>Privacy Policy</h2>\r\n    Google Analytics is a web analysis service provided by Google. Google utilizes the data collected to track and examine the use of dev.coloreddrums.com/ttb, to prepare reports on its activities and share them with other Google services.\r\n    Google may use the data collected to contextualize and personalize the ads of its own advertising network.\r\n\r\n    Personal data collected: Cookie and Usage Data. Place of processing: USA. Find Google\'s <a href="http://www.google.com/intl/en/policies/privacy/" target="_blank">privacy policy here</a>.\r\n    Find information on an opt-out option provided by Google <a href="//tools.google.com/dlpage/gaoptout" target="_blank">here</a>.\r\n</div>'}),define("gameclasses/ShapeFactory",["jquery","underscore","backbone","snap"],function(e,t,n,r){var i={sizes:{small:90,medium:120,large:150}},s=function(e,t,n,i,s){var o=new r.Matrix;return o.rotate(s,n,i),t.attr({transform:o}),t},o=function(e,t,n,i,s){var o=new r.Matrix;return o.scale(s,s,n,i),t.attr({transform:o}),t};return i.shapes={circle:function(e,t){return e.circle(t.x,t.y,i.sizes[t.size])},square_sidedown:function(e,t){var n=.85,r=n*i.sizes[t.size];return e.rect(t.x-r,t.y-r,2*r,2*r)},square_edgedown:function(e,t){var n=t.x,r=t.y,s=i.sizes[t.size];return e.polygon(n,r+s,n-s,r,n,r-s,n+s,r)},triangle_sidedown:function(e,t){var n=t.x,r=t.y,s=i.sizes[t.size];return e.polygon(n-s,r+s,n,r-s,n+s,r+s)},triangle_edgedown:function(e,t){var n=t.x,r=t.y,s=i.sizes[t.size];return e.polygon(n,r+s,n-s,r-s,n+s,r-s)}},i.createShape=function(e,t,n){return i.shapes[t]?i.shapes[t](e,n):(console.error("unknown shape type: "+t),i.shapes.circle(e,n))},i.setCSSRules=function(){var e="medium",n=.85,s=" .shape_<%= classname %>{ background-image: url('data:image/svg+xml;utf8,<%= svgstring %>') !important}\n",o=i.sizes[e]*2,u="";for(var a in i.shapes){var f=new r(o/n,o/n),l=i.createShape(f,a,{x:o/(2*n),y:o/(2*n),size:e}).attr({fill:"#000000",opacity:.75});u+=t.template(s,{classname:a,svgstring:f.toString()})}console.log(u)},i.randomizeShapes=function(e){var t,n=e.gameobjects;for(t=0;t<n.length;++t)console.log(n[t]);return e},i}),define("views/LegalView",["jquery","underscore","backbone","text!templates/legal.html","app","gameclasses/ShapeFactory"],function(e,t,n,r,i,s){var o=n.View.extend({el:"#content",render:function(){var e=t.template(r,{});this.$el.html(e),s.setCSSRules()}});return o}),define("text!templates/play.html",[],function(){return'<div id="playdiv" class="svgcontainer">\r\n    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1600 1200" id="svg">\r\n    </svg>\r\n</div>\r\n\r\n'}),define("util/SoundcloudLoader",["jquery"],function(e){var t={loadStream:function(t,n,r){console.log("resolving: "+t),e.get("//dev.coloreddrums.de/ttb/server/gettrack.php",{p:t}).done(function(t){try{t.errors&&r("There was an error loading the track from SoundCloud. Please try again later or contact me if the error still occurs."),t.streamable?(console.log("resolved: "+t.stream_url),n(t)):r("Sorry. The track you entered is not streamable. Please select a different one.")}catch(i){console.error(i),r("Make sure the URL has the correct format: https://soundcloud.com/user/title-of-the-track")}})},getStreamUrl:function(e){return e+"?client_id="+"1dfc22b8b6e9ae1fd500cf90f9065607"}};return t}),define("gameclasses/Surface",["jquery","underscore","backbone","snap"],function(e,t,n,r){var i=function(e){this.options=e,this.snap=new r("#svg"),this.r=this.snap.rect(0,0,"100%","100%",0),this.r.attr({fill:this.options.bgcolor?this.options.bgcolor:"#000000"})};return i.prototype={width:1600,height:1200,setProgress:function(e){this.loadingindicator.attr({width:this.loadingindicatorwidth*e})},getSnap:function(){return this.snap},getRootRect:function(){return this.r},requestStartFromUser:function(e){var t=this.snap.text(this.width/2,this.height/2,"Tap here to start!");t.attr({fill:"#FFFFFF","font-size":"5em",textAnchor:"middle",filter:this.snap.filter(r.filter.shadow(0,2,3)),id:"startactionbutton"}),this.startaction=t;var n=function(){this.getRootRect().unclick(),this.startaction.unclick(),t.remove(),e()}.bind(this);this.getRootRect().click(n),this.startaction.click(n)}},i}),define("util/scripts",["jquery"],function(e){(function(){var e=0,t=["ms","moz","webkit","o"],n=!!window.performance&&!!window.performance.now;for(var r=0,i=t.length;r<i&&!window.requestAnimationFrame;r+=1)window.requestAnimationFrame=window[t[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);return e=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)});if(!n){var s=window.requestAnimationFrame,o=+(new Date);window.requestAnimationFrame=function(e,t){var n=function(t){var n=t<1e12?t:t-o;return e(n)};s(n,t)}}})(),e(document).unbind("keydown").bind("keydown",function(e){var t=!1;if(e.keyCode===8){var n=e.srcElement||e.target;n.tagName.toUpperCase()==="INPUT"&&(n.type.toUpperCase()==="TEXT"||n.type.toUpperCase()==="PASSWORD"||n.type.toUpperCase()==="FILE"||n.type.toUpperCase()==="EMAIL")||n.tagName.toUpperCase()==="TEXTAREA"?t=n.readOnly||n.disabled:t=!0}t&&e.preventDefault()}),function(){if(window.performance&&window.performance.now)return;window.performance||(window.performance={});var e=["webkitNow","msNow","mozNow"];for(var t=0;t<e.length;t++)if(window.performance[e[t]]){window.performance.now=window.performance[e[t]];return}if(Date.now){window.performance.now=function(){return Date.now()};return}window.performance.now=function(){return+(new Date)}}();var t={};return t.pickRandomObject=function(e){var t,n=0;for(var r in e)Math.random()<1/++n&&(t=r);return t},t}),define("gameclasses/TapObject",["jquery","underscore","backbone","snap","util/analytics","gameclasses/ShapeFactory","util/scripts"],function(e,t,n,r,i,s,o){var u=function(e,t,n,r,i){this.game=e,this.x=n,this.y=r,this.timestamp=t,this.shape=i};return u.prototype={startborder:-0.5,endborder:0,borderradius:20,removeuntil:.5,removefrom:.4,startshow:-0.8,endshow:0,visual_type:"circle",color_plain_fill:"#FFFFFF",color_plain_border:"#EEEEEE",color_tapped_fill:"#33CC33",color_tapped_border:"#FFFF66",color_missed_fill:"#CC0000",color_missed_border:"#CC0000",tapdelta:NaN,snapobject:null,renderloop_enabled:!0,logic_enabled:!0,time_render:NaN,time_logic:NaN,tapped:!1,tapdiff:NaN,max_tapdiff:.2,debugtime:NaN,setSnapAttr:function(e){this.snapobject==null&&this.createVisualElement(),this.snapobject!=null&&this.snapobject.attr(e)},createVisualElement:function(){this.snapobject=s.createShape(this.game.surface.getSnap(),this.shape.type,{x:this.x,y:this.y,size:this.shape.size}),this.snapobject.attr({fill:this.color_plain_fill,stroke:this.color_plain_border,strokeWidth:this.borderradius,opacity:0}),this.snapobject.touchend(this.handleTap.bind(this)),this.snapobject.click(this.handleTap.bind(this))},markMissed:function(){this.setSnapAttr({fill:this.color_missed_fill}),this.logic_enabled=!1,this.time_logic<this.max_tapdiff&&(console.log("TapObject was missed (too early) at "+Math.abs(Math.floor(this.time_logic*100))),i.trackAction("game","TapObject","missed (too early)",Math.abs(Math.abs(Math.floor(this.time_logic*100)))))},markHit:function(){this.timestamp==this.debugtime&&console.log("hit"),this.setSnapAttr({fill:this.color_tapped_fill}),this.tapdiff=this.time_logic,this.logic_enabled=!1,i.trackAction("game","TapObject","hit (too "+(this.tapdiff<0?"early":"late")+")",Math.abs(Math.floor(this.tapdiff*100))),console.log("TapObject was hit too "+(this.tapdiff<0?"early":"late")+" at "+Math.abs(Math.floor(this.tapdiff*100)))},handleTap:function(){this.timestamp==this.debugtime&&console.info("allowed tap: "+this.logic_enabled),this.tapped||(this.tapped=!0,this.logic_enabled?Math.abs(this.getTimeDiff())<=this.max_tapdiff?this.markHit():this.markMissed():(console.log("TapObject was missed (too late) at "+Math.abs(Math.floor(this.time_logic*100))),i.trackAction("game","TapObject","missed (too late)",Math.abs(Math.floor(this.time_logic*100)))))},markUpcoming:function(e){this.timestamp==this.debugtime&&console.log("mark upcoming at "+this.time_render+" with "+e+"%"),this.setSnapAttr({strokeWidth:this.borderradius*e})},setOpacity:function(e){this.setSnapAttr({opacity:e})},update:function(){this.logic_enabled&&(this.time_logic=this.getTimeDiff(),this.timestamp==this.debugtime&&console.log("logic update at "+this.time_logic),this.time_logic>=this.max_tapdiff&&this.markMissed())},render:function(){this.renderloop_enabled&&(this.time_render=this.getTimeDiff(),this.time_render>=this.startborder&&this.time_render<this.endborder&&(this.timestamp==this.debugtime&&console.log("upcoming: "+this.getPercentage(this.startborder,this.endborder)),this.markUpcoming(this.getPercentage(this.startborder,this.endborder))),this.time_render>=this.startshow&&this.time_render<this.endshow&&(this.snapobject==null&&this.createVisualElement(),this.timestamp==this.debugtime&&console.log("fading in: 1"-this.getPercentage(this.startshow,this.endshow)),this.setOpacity(1-this.getPercentage(this.startshow,this.endshow))),this.time_render>=this.removefrom&&this.time_render<this.removeuntil&&this.setOpacity(1-this.getPercentage(this.removefrom,this.removeuntil)),this.time_render>=this.removeuntil&&(this.renderloop_enabled=!1,this.snapobject!=null&&this.snapobject.remove(),this.tapped||i.trackAction("game","TapObject","was not tapped"),this.timestamp==this.debugtime&&console.log("removed from dom: "+this.timestamp+" at "+this.time_render+" ("+(this.time_render-this.removeuntil)+")")))},getTimeDiff:function(){return this.game.getTime()-this.timestamp},getPercentage:function(e,t){var n=this.time_render/(t-e);return Math.abs(n)},getHighScore:function(){if(isNaN(this.tapdiff))return 0;var e=Math.abs(this.tapdiff)-.05;return e<=0?1:1-e/this.max_tapdiff}},u}),define("gameclasses/Game",["jquery","underscore","backbone","gameclasses/Surface","gameclasses/TapObject"],function(e,t,n,r,s){var o=function(e,t){this.audiocontroller=t,console.log(e),this.level=e.toJSON(),this.gameObjects=[],this.setup(),this.surface=new r({bgcolor:"#000000"}),this.surface.requestStartFromUser(this.audiocontroller.start.bind(this.audiocontroller))};return o.prototype={width:1600,height:1200,taptimeframe:10,playview:null,setup:function(){console.log("setting up game"),console.log(this.level);for(i=0;i<this.level.gameObjects.length;i++){var e=this.level.gameObjects[i];switch(e.type){case"Tap":this.gameObjects.push(new s(this,e.tapTime,e.x,e.y,e.shape));break;default:console.error("undefined gameObject detected")}}},getRandomInteger:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},getTime:function(){return this.audiocontroller.getCurrentTime()},update:function(){if(!this.stopped)for(var e=0;e<this.gameObjects.length;e++)this.gameObjects[e].update(this.getTime())},updateView:function(e){if(!this.stopped){for(var t=0;t<this.gameObjects.length;t++)this.gameObjects[t].render(e);requestAnimationFrame(this.updateView.bind(this))}},start:function(){this.updateinterval=setInterval(this.update.bind(this),1e3/60),this.updateView(this.getTime())},stop:function(){clearInterval(this.updateinterval),this.stopped=!0,console.log("stopped game")},calculateHighScore:function(){var e=0;for(var t=0;t<this.gameObjects.length;t++)e+=this.gameObjects[t].getHighScore();var n=e/this.gameObjects.length;return(n*100).toFixed(1)+"%"}},o}),define("util/AudioController",["jquery","underscore","backbone"],function(e,t,n){var r=n.View.extend({el:"#player",cache:[],onClose:function(){this.active=!1,console.log("closing audio"),this.request&&(this.request.abort(),this.request=null);try{this.source&&(this.source.disconnect(),this.source.stop(),this.source=null)}catch(e){}},onended:function(){console.info("The audio has stopped"),this.notified_ended||(this.callback_ended(),this.notified_ended=!0)},render:function(e,t){this.notified_ended=!1,this.active=!0,this.inittime=null,this.playasap=t,this.stream_url=e;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext;if(this.cache[e]!=undefined){console.info("Reading audio-buffer from cache."),this.initsound(this.cache[e]);return}var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.addEventListener("progress",this.passloadingpercentage.bind(this),!1);var r=function(e){this.audioloaderview&&(this.audioloaderview.hideLoadingIndicator(),this.audioloaderview.showProcessingInformation()),this.active&&this.context.decodeAudioData(n.response,this.initsound.bind(this),this.callback_error)}.bind(this);n.onload=r,console.log("loading audio"),this.request=n,this.request.send()}catch(i){console.error(i),this.callback_error("Web Audio API is not supported in this browser");return}},passloadingpercentage:function(e){if(e.lengthComputable){var t=e.loaded/e.total;this.audioloaderview&&this.audioloaderview.setProgress(t)}},initsound:function(e){console.log("init sound");if(!this.active)return;this.cache[this.stream_url]==undefined&&(this.cache[this.stream_url]=e);var t=this.context.createBufferSource();t.buffer=e,t.connect(this.context.destination),t.onended=this.onended.bind(this),this.source=t,this.audioloaderview&&this.audioloaderview.hideProcessingInformaion(),this.callback_readytoplay()},start:function(){this.source.start(0),this.inittime=this.context.currentTime,this.callback_started()},setCallbacks:function(e,t,n,r){this.callback_ended=t,this.callback_started=e,this.callback_readytoplay=n,this.callback_error=r},getCurrentTime:function(){return this.context.currentTime-this.inittime},getPercentage:function(){return this.getCurrentTime()/this.getDuration()},getDuration:function(){return this.source.buffer.duration},attachAudioLoadingView:function(e){this.audioloaderview=e}});return r}),define("views/PlayView",["jquery","underscore","backbone","text!templates/play.html","app","util/SoundcloudLoader","gameclasses/Game","util/analytics","util/AudioController","util/scripts"],function(e,t,n,r,i,s,o,u,a){var f=n.View.extend({el:"#body",onClose:function(){console.log("onclose event fired"),u.trackAction("game","closing game"),this.game!=null&&this.game.stop(),this.result=null,this.audiocontroller&&(this.audiocontroller.onClose(),this.audiocontroller.dispose()),this.game=null},stopGame:function(){u.trackAction("game","ending game"),console.info("Now ending game."),this.game.stop(),e("#svg").fadeTo(1500,0,this.exitview.bind(this)),this.result={},this.result.highscore=this.game.calculateHighScore(),this.result.level=this.level,this.audiocontroller.dispose()},render:function(e){n.history.navigate("playlevel",!1),this.onClose(),this.level=e;var o=t.template(r,{});this.$el.html(o),this.audioloaderview=i.router.views.audioloaderview,this.audioloaderview.render(),this.audiocontroller=new a,this.audiocontroller.attachAudioLoadingView(this.audioloaderview),this.audiocontroller.setCallbacks(this.onAudioStarted.bind(this),this.stopGame.bind(this),this.onAudioReady.bind(this),this.onAudioError.bind(this)),this.audiocontroller.render(s.getStreamUrl(this.level.get("audio").streamUrl),!0)},onAudioReady:function(){this.game=new o(this.level,this.audiocontroller)},onAudioStarted:function(){this.game.start()},onAudioError:function(e){console.error(e),alert(e),this.audiocontroller.onClose(),this.audiocontroller.dispose()},exitview:function(){u.trackAction("game","ending regularly","highscore:"+this.result.highscore),i.setContent(i.router.views.highscoreview,this.result)}});return f}),define("text!templates/highscore.html",[],function(){return'<div class="container">\r\n    <!-- Main jumbotron for a primary marketing message or call to action -->\r\n    <div class="jumbotron">\r\n        <div class="container">\r\n            <h1>Level Finished!</h1>\r\n\r\n            <p>Congratulations! You finished <%- levelname %> with <strong><%- highscore %></strong>.</p>\r\n\r\n            <p>\r\n                <button class="btn btn-primary btn" type="button" id="btn_playagain">Play again!</button>\r\n                <button class="btn btn-default" id="btn_gotoChooseLevelView">Return to Level-Overview</button>\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("views/HighScoreView",["jquery","underscore","backbone","text!templates/highscore.html","app","util/analytics","bootstrap"],function(e,t,n,r,i,s){var o=n.View.extend({el:"#content",events:{"click #btn_gotoChooseLevelView":"gotoChooseLevelView","click #btn_playagain":"playagain"},render:function(e){n.history.navigate("highscore",!1),this.game=e;var i=t.template(r,{highscore:this.game.highscore,levelname:this.game.level.levelname});this.$el.html(i)},gotoChooseLevelView:function(){s.trackAction("highscoreview","click button","gotoChooseLevelview"),n.history.navigate("chooselevel",!0)},playagain:function(){s.trackAction("highscoreview","click button","playagain"),console.log(this.game),i.startlevel(this.game.level)}});return o}),define("text!templates/levelbuilder/base.html",[],function(){return'<div class="container">\r\n    <h1>Level Builder</h1>\r\n    <hr/>\r\n    <div class="content"></div>\r\n</div>'}),define("text!templates/levelbuilder/audioselector.html",[],function(){return'<div class="alert alert-info alert-dismissable" id="alert_tracknotfound" style="display:none;">\r\n    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\r\n    <div id="alert_tracknotfound_text">\r\n        <strong>Track not found!</strong>\r\n        Use a Soundcloud URL in this format: https://soundcloud.com/artist/track.\r\n    </div>\r\n</div>\r\n\r\n<div id="trackselection">\r\n    <p>Here you can create your own levels. Choose a song from <a href="http://soundcloud.com/" target="_blank">Soundcloud</a>\r\n        and enter the track-url below.<br>\r\n        To start immediately, you can also use one of the preselected songs by pressing the small white button.</p>\r\n    <br>\r\n\r\n    <div class="input-group input-group-lg">\r\n        <input type="text" class="form-control input-lg" id="input_entertrack"\r\n               placeholder="Paste Soundcloud URL here (https://soundcloud.com/artist/track)"/>\r\n            <span class="input-group-btn">\r\n                <button class="btn btn-default" type="button" id="btn_recommendedtrack">\r\n                    <span class=\'glyphicon glyphicon-random\'></span>\r\n                </button>\r\n                <button class="btn btn-primary" type="button" id="btn_entertrack">Select this track!</button>\r\n            </span>\r\n    </div>\r\n\r\n</div>\r\n\r\n<div class="row" id="trackinfo" style="display: none">\r\n    <div class="col-sm-4" id="trackcontainer">\r\n    </div>\r\n    <div class="col-sm-8" id="instructions">\r\n        <h3>Great!</h3>\r\n\r\n        <p>You selected a track from Soundcloud. After pressing the button below, the track will be played and you\r\n            can add TapObjects by tapping at your desired positions in time.</p>\r\n\r\n        <button class="btn btn-primary pull-right" type="button" id="btn_gameobjectrecorder">Next step\r\n        </button>\r\n    </div>\r\n</div>'}),define("text!templates/components/trackpanel.html",[],function(){return'<div class="panel panel-default">\r\n    <div class="panel-content media">\r\n        <a class="pull-left" href="<%- trackurl %>" alt="<%- track %>">\r\n            <img class="media-object" src="<%- imageurl %>" alt="<%- track %>"></a>\r\n\r\n        <div class="media-body">\r\n            <div class="vcenter">\r\n                <h4 class="media-heading"><a href="<%- trackurl %>"><%- track %></a></h4>\r\n\r\n                <div id="infoArtist"><a href="<%- artisturl %>"><%- artist %></a></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("views/levelbuilder/AudioSelectorView",["jquery","underscore","backbone","app","text!templates/levelbuilder/audioselector.html","text!templates/components/trackpanel.html","util/SoundcloudLoader","util/scripts","bootstrap"],function(e,t,n,r,i,s,o){var u=n.View.extend({initialize:function(){this.randomtracks=["https://soundcloud.com/maxfrostmusic/white-lies","https://soundcloud.com/greco-roman/roosevelt-sea-1","https://soundcloud.com/homoheadphonico/phantogram-don-t-move","https://soundcloud.com/fosterthepeoplemusic/pumpedupkicks","https://soundcloud.com/benkhan/savage"]},render:function(e){var n=t.template(i,{});this.$el.html(n),e!=null&&(console.log(e),this.$("#input_entertrack").val(e),this.enteredTrack())},onClose:function(){},events:{"click #btn_entertrack":"enteredTrack","click #btn_recommendedtrack":"selectedRandomTrack","click #btn_gameobjectrecorder":"openGameObjectRecorder"},enteredTrack:function(){if(this.$("#input_entertrack").val()==""){this.loading_error();return}o.loadStream(this.$("#input_entertrack").val(),this.loading_success.bind(this),this.loading_error.bind(this))},selectedRandomTrack:function(){var t=this.randomtracks[Math.floor(Math.random()*this.randomtracks.length)];console.log("random: "+t),e("#input_entertrack").val(t),this.enteredTrack()},openGameObjectRecorder:function(){r.setFullScreenContent(r.router.views.levelbuilderview.contents.gameobjectrecorderview,this.sound)},loading_success:function(e){this.sound=e,this.$("#alert_tracknotfound").slideUp(),n.history.navigate("/levelbuilder/create/"+encodeURIComponent(this.$("#input_entertrack").val())),this.updateTrackPanel({imageurl:this.sound.artwork_url?this.sound.artwork_url:this.sound.user.avatar_url,artisturl:this.sound.user.permalink_url,trackurl:this.sound.permalink_url,artist:this.sound.user.username,track:this.sound.title}),this.$("#trackinfo").fadeIn(),this.$("#trackselection").slideUp()},loading_error:function(e){console.log("error"),this.$("#alert_tracknotfound_text").html(e),this.$("#alert_tracknotfound").slideDown()},updateTrackPanel:function(n){var r=t.template(s,n);this.$("#trackcontainer").html(r),this.$("#trackinfo").fadeIn()}});return u}),define("text!templates/levelbuilder/gameobjectrecorder.html",[],function(){return'<div id="gamerecorder" class="svgcontainer">\r\n    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1600 1200" id="svg">\r\n    </svg>\r\n</div>\r\n\r\n'}),define("views/levelbuilder/GameObjectRecorderView",["jquery","underscore","backbone","snap","gameclasses/TapObject","gameclasses/Surface","util/AudioController","util/SoundcloudLoader","text!templates/levelbuilder/gameobjectrecorder.html","app"],function(e,t,n,r,i,s,o,u,a,f){var l=n.View.extend({el:"#body",onClose:function(){this.audiocontroller&&(this.audiocontroller.onClose(),this.audiocontroller.dispose())},render:function(e){this.sound=e,this.gameobjects=[],this.audiocontroller&&this.audiocontroller.dispose();var n=t.template(a,{});this.$el.html(n),this.audioloaderview=f.router.views.audioloaderview,this.audioloaderview.render({bgcolor:"#222222"}),this.audiocontroller=new o,this.audiocontroller.attachAudioLoadingView(this.audioloaderview),this.audiocontroller.setCallbacks(this.onAudioStarted.bind(this),this.recordingfinished.bind(this),this.onAudioReady.bind(this),this.onAudioError.bind(this)),this.audiocontroller.render(u.getStreamUrl(this.sound.stream_url),!0)},addTapObject:function(e,t,n){this.gameobjects.push({type:"Tap",x:t,y:n,taptime:e})},onAudioReady:function(){this.surface=new s({bgcolor:"#222222"}),this.svgelem=document.getElementById("svg"),this.surface.requestStartFromUser(this.audiocontroller.start.bind(this.audiocontroller))},onAudioStarted:function(){this.isrecording=!0,this.surface.getRootRect().touchstart(function(e){if(this.isrecording){console.log("touch on surface");var t=e.changedTouches[0],n=this.svgelem.createSVGPoint();n.x=t.pageX,n.y=t.pageY;var r=e.target.getScreenCTM();(r=r.inverse())?(n=n.matrixTransform(r),console.log(JSON.stringify(n)),this.addTapObject(this.audiocontroller.getCurrentTime(),Math.floor(n.x),Math.floor(n.y)),console.log(this.gameobjects[this.gameobjects.length-1])):console.error("error retrieving position")}}.bind(this))},onAudioError:function(){this.isrecording=!1,console.error("Audio error!!!!!"),this.audiocontroller.dispose(),alert("There was an error loading the audio file.")},recordingfinished:function(){this.isrecording=!1,console.log("finished");var e=f.router.views.levelbuilderview,t=[this.sound,this.gameobjects];f.setContent(e),e.setContent(e.contents.metadataview,t)}});return l}),define("text!templates/levelbuilder/gameobjecteditor.html",[],function(){return'<div class="container">\r\n    <div class="btn-group  pull-right">\r\n        <button type="button" id="delete" class="btn btn-danger">Delete Draft</button>\r\n        <button type="button" id="export" class="btn btn-default">Export</button>\r\n        <button type="button" id="save" class="btn btn-default" disabled>Save</button>\r\n    </div>\r\n    <h3>Levelname</h3>\r\n\r\n    <div class="panel panel-default">\r\n        <div class="panel-heading">GameObjects</div>\r\n        <div class="panel-body">\r\n            <p>In this view you can edit all GameObjects of your level.</p>\r\n        </div>\r\n\r\n        <table class="table">\r\n            <thead>\r\n            <tr>\r\n                <th>#</th>\r\n                <th>Time</th>\r\n                <th>Type</th>\r\n                <th>x</th>\r\n                <th>y</th>\r\n                <th>Shape</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody id="tbody_gameobjects">\r\n\r\n            </tbody>\r\n        </table>\r\n\r\n\r\n    </div>\r\n</div>'}),define("text!templates/levelbuilder/gameobjecteditor/tapobjectrow.html",[],function(){return'<td><%- index %></td>\r\n<td><%- time %></td>\r\n<td>Tap</td>\r\n<td><%- x %></td>\r\n<td><%- y %></td>\r\n<td>\r\n    <div class="btn-group">\r\n        <% _.each(shapes, function(shape) { %>\r\n        <button type="button" class="btn btn-default shape shape_<%= shape %>" alt="<%= shape %>"\r\n                title="<%= shape %>"></button>\r\n        <% }); %>\r\n    </div>\r\n</td>'}),define("views/components/html/gameobjecteditor/TapObjectRowView",["jquery","underscore","backbone","text!templates/levelbuilder/gameobjecteditor/tapobjectrow.html","gameclasses/ShapeFactory"],function(e,t,n,r,i){var s=n.View.extend({tagName:"tr",css_classname_active:"shape_selected",initialize:function(e){this.tapobject=e,this.tapobject.on("change:shape",this.changeShape,this)},events:{"click .shape":"clickedShapeButton"},render:function(e){var n=t.template(r,{index:e,time:(Math.round(this.tapobject.taptime*100)/100).toFixed(2),x:this.tapobject.get("x"),y:this.tapobject.get("y"),shapes:Object.keys(i.shapes),currentShape:this.currentShape()});this.$el.html(n),this.getShapeElem(this.currentShape()).addClass(this.css_classname_active)},currentShape:function(){return this.tapobject.get("shape").type},previousShape:function(){return this.tapobject.previous("shape").type},clickedShapeButton:function(e){var t=e.target.getAttribute("alt");this.tapobject.set({shape:{type:t,size:"medium"}})},changeShape:function(){this.getShapeElem(this.previousShape()).removeClass(this.css_classname_active),this.getShapeElem(this.currentShape()).addClass(this.css_classname_active)},getShapeElem:function(e){return this.$(".shape_"+e)}});return s}),define("text!templates/components/levelexportmodal.html",[],function(){return'<div class="modal fade" id="exportmodal" tabindex="-1" role="dialog" aria-labelledby="exportmodallabel"\r\n     aria-hidden="true">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span\r\n                        class="sr-only">Close</span></button>\r\n                <h4 class="modal-title" id="exportmodallabel">Export</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <textarea id="exportmodalcontent" style="width: 100%; max-width: 100%"></textarea>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("views/components/html/ExportModalView",["jquery","underscore","backbone","text!templates/components/levelexportmodal.html","app"],function(e,t,n,r,i){var s=n.View.extend({tagName:"div",template:t.template(r,{}),initialize:function(){},events:{},render:function(e){console.log(e),this.$el.html(this.template),this.$("#exportmodalcontent").html(JSON.stringify(e)),this.$("#exportmodal").modal("show")}});return s}),define("views/levelbuilder/GameObjectEditorView",["jquery","underscore","backbone","text!templates/levelbuilder/gameobjecteditor.html","views/components/html/gameobjecteditor/TapObjectRowView","views/components/html/ExportModalView","app"],function(e,t,n,r,i,s,o){var u=n.View.extend({template:t.template(r,{}),initialize:function(){},events:{"click #delete":"deleteDraft","click #export":"exportDraft","click #save":"saveDraft"},deleteDraft:function(){console.log("triggered"),o.models.levelEditorModel=null;var e=o.router.views.levelbuilderview;e.setContent(e.contents.startview)},exportDraft:function(){console.log(o.models.levelEditorModel.toJSON()),this.exportmodalview.render(o.models.levelEditorModel.toJSON())},saveDraft:function(){},render:function(){this.$el.html(this.template),this.exportmodalview=new s,this.$el.append(this.exportmodalview.el),this.table=this.$("#tbody_gameobjects"),this.table.html("");var e=1;o.models.levelEditorModel.get("gameObjects").forEach(function(t){if(t.get("type")=="Tap"){var n=new i(t);n.render(e++),this.table.append(n.el)}}.bind(this))}});return u}),define("text!templates/levelbuilder/metadata.html",[],function(){return'Hallo\r\n<div class="col-sm-9" id="publish" style="display: none">\r\n    <h3>Allright!\r\n        <small>Let\'s finish this.</small>\r\n    </h3>\r\n    <p>All your level-content has been recorded correctly. You can now give a name to your level and play it.</p>\r\n\r\n    <div class="input-group">\r\n        <input type="text" class="form-control" id="levelname"/>\r\n            <span class="input-group-btn">\r\n                <button class="btn btn-primary" type="button" id="btn_publish">Publish!</button>\r\n            </span>\r\n    </div>\r\n</div>\r\n\r\n<div class="col-sm-9" id="finished" style="display: none">\r\n    <h3>Congratulations!\r\n        <small>Your level is ready now.</small>\r\n    </h3>\r\n    <p>You can save your level by copying the data below to the destination of your choice. It is recommended to do\r\n        this first. Then, you can start playing your\r\n        level by pressing the button below or by copying the level-text into the input-field at the Level\r\n        Overview.</p>\r\n\r\n    <p><textarea id="leveljsoncontainer" style="width:100%; resize:none" readonly rows="4"\r\n                 onclick="this.focus();this.select()"></textarea></p>\r\n\r\n    <p>\r\n        <button class="btn btn-primary pull-right" type="button" id="btn_playnow">Play now!</button>\r\n    </p>\r\n</div>'}),define("views/levelbuilder/MetaDataView",["jquery","underscore","backbone","app","text!templates/levelbuilder/metadata.html","util/scripts","bootstrap"],function(e,t,n,r,i){var s=n.View.extend({initialize:function(){},render:function(e,n){console.log(n),console.log(e),this.sound=e,this.gameobjects=n;var r=t.template(i,{});this.$el.html(r),this.$("#publish").fadeIn()},onClose:function(){},events:{"click #btn_publish":"openPublish","click #btn_playnow":"playLevelNow"},openPublish:function(){this.createLevel(),this.$("#leveljsoncontainer").html(JSON.stringify(this.level)),this.$("#publish").slideUp(),this.$("#finished").slideDown()},playLevelNow:function(){r.startlevel(this.level)},createLevel:function(){var e={};e.audio={},e.audio.stream_url=this.sound.stream_url,e.audio.permalink_url=this.sound.permalink_url,e.gameobjects=this.gameobjects,e.name=this.$("#levelname").val(),e.track={},e.track.title=this.sound.title,e.track.artist=this.sound.user.username,this.level=e}});return s}),define("text!templates/levelbuilder/start.html",[],function(){return'<p>Here you can create and edit your own levels. You can either start from scratch or edit an existing level. Choose\r\n    your way below:</p>\r\n<br>\r\n\r\n<div class="list-group">\r\n    <a class="list-group-item" href="#levelbuilder/create">\r\n\r\n        <h4 class="list-group-item-heading"><span class="glyphicon glyphicon-plus"></span> Create a new level!</h4>\r\n\r\n        <p class="list-group-item-text">\r\n            You will select a track from SoundCloud and record your gameobjects.\r\n        </p>\r\n    </a>\r\n    <a class="list-group-item" href="#levelbuilder/edit" id="edit">\r\n    <h4 class="list-group-item-heading"><span class="glyphicon glyphicon-pencil"></span> Edit an existing level!\r\n        </h4>\r\n\r\n        <p class="list-group-item-text">\r\n            You will open a level by entering its level-text and customize/refine it.\r\n        </p>\r\n    </a>\r\n</div>'}),define("views/levelbuilder/StartView",["jquery","underscore","backbone","text!templates/levelbuilder/start.html","app"],function(e,t,n,r,i){var s=n.View.extend({template:t.template(r,{}),initialize:function(){},events:{"click #edit":"edit"},edit:function(){var e=i.router.views.levelbuilderview;return i.models.levelEditorModel!=null?e.setContent(e.contents.gameobjecteditorview):e.setContent(e.contents.openlevelview),!1},render:function(){this.$el.html(this.template)}});return s}),define("text!templates/levelbuilder/openlevel.html",[],function(){return'<p>To open a level, copy the level-text into the input-field below.</p>\r\n<div class="leveltextinput"></div>'}),define("views/levelbuilder/OpenLevelView",["jquery","underscore","backbone","text!templates/levelbuilder/openlevel.html","views/components/html/LevelTextInputView","app"],function(e,t,n,r,i,s){var o=n.View.extend({template:t.template(r,{}),initialize:function(){this.leveltextinputview=new i(this.levelselected.bind(this))},render:function(){this.$el.html(this.template),this.leveltextinputview.setElement(this.$(".leveltextinput")),this.leveltextinputview.render()},levelselected:function(e){s.models.levelEditorModel=e;var t=s.router.views.levelbuilderview;t.setContent(t.contents.gameobjecteditorview)}});return o}),define("views/levelbuilder/BaseView",["jquery","underscore","backbone","text!templates/levelbuilder/base.html","views/levelbuilder/AudioSelectorView","views/levelbuilder/GameObjectRecorderView","views/levelbuilder/GameObjectEditorView","views/levelbuilder/MetaDataView","views/levelbuilder/StartView","views/levelbuilder/OpenLevelView"],function(e,t,n,r,i,s,o,u,a,f){var l=n.View.extend({template:t.template(r,{}),currentContent:null,contents:{startview:new a,audioselectorview:new i,gameobjectrecorderview:new s,metadataview:new u,openlevelview:new f,gameobjecteditorview:new o},initialize:function(){},render:function(){this.$el.html(this.template)},setContent:function(t,n){this.currentContent!=null&&(this.currentContent.onClose&&this.currentContent.onClose(),this.currentContent.dispose()),this.currentContent=t,this.$(".content").html(""),this.currentContent.setElement(e(".content")),this.currentContent.render.apply(this.currentContent,n)}});return l}),define("views/components/svg/AudioLoaderView",["jquery","underscore","backbone","snap"],function(e,t,n,r){var i=n.View.extend({el:"#svg",width:1600,height:1200,loadingindicatorwidth:1e3,loadingindicatorheight:100,textattributes:function(){return{fill:"#FFFFFF","font-size":"5em",textAnchor:"middle",filter:this.snap.filter(r.filter.shadow(0,2,3))}},render:function(e){this.options=e?e:{},this.snap=new r("#svg"),this.r=this.snap.rect(0,0,"100%","100%",0),this.r.attr({fill:this.options.bgcolor?this.options.bgcolor:"#000000"}),this.loadingindicatorbackground=this.snap.rect(this.width/2-this.loadingindicatorwidth/2,.6*this.height-this.loadingindicatorheight/2,this.loadingindicatorwidth,this.loadingindicatorheight),this.loadingindicatorbackground.attr({fill:"#000000",stroke:"#FFFFFF",strokeWidth:2}),this.loadingindicator=this.snap.rect(this.width/2-this.loadingindicatorwidth/2,.6*this.height-this.loadingindicatorheight/2,0,this.loadingindicatorheight),this.loadingindicator.attr({fill:"#FFFFFF"}),this.loadingtext=this.snap.text(this.width/2,.4*this.height,"Loading audio"),this.loadingtext.attr(this.textattributes())},createStatusText:function(e){var e=this.snap.text(this.width/2,.4*this.height,e);return e.attr(this.textattributes()),e},setProgress:function(e){this.loadingindicator.attr({width:this.loadingindicatorwidth*e})},hideLoadingIndicator:function(){this.loadingtext&&this.loadingtext.remove(),this.loadingindicator&&this.loadingindicator.remove(),this.loadingindicatorbackground&&this.loadingindicatorbackground.remove()},showProcessingInformation:function(){this.processingText=this.snap.text(this.width/2,this.height/2,"Processing audio"),this.processingText.attr(this.textattributes())},hideProcessingInformaion:function(){this.processingText&&this.processingText.remove()}});return i}),define("text!templates/signin.html",[],function(){return'<span id="signinbutton">\r\n</span>'}),define("views/SignInView",["jquery","underscore","backbone","text!templates/signin.html"],function(e,t,n,r,i){var s=n.View.extend({el:"#content",render:function(){this.$el.html(t.template(i,{}))}});return s}),220,define("router",["jquery","underscore","backbone","app","util/analytics","views/components/html/MenuView","views/HomeView","views/ChooseLevelView","views/components/html/ApplicationWithMenuView","views/PageNotFoundView","views/LegalView","views/PlayView","views/HighScoreView","views/levelbuilder/BaseView","views/components/svg/AudioLoaderView","views/SignInView"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=n.Router.extend({routes:{"":"home",chooselevel:"chooselevel",levelbuilder:"buildlevel","levelbuilder/create(/:soundcloudurl)":"createlevel",legal:"legal",playlevel:"chooselevel",highscore:"chooselevel","levelbuilder/edit":"editlevel",signin:"signin","*notfound":"notfound"},views:{current:null,baseview:new a,homeview:new o,chooselevelview:new u,pagenotfoundview:new f,legalview:new l,playlevelview:new c,highscoreview:new h,levelbuilderview:new p,audioloaderview:new d},openLevelEditor:function(){var e=r.router.views.levelbuilderview,t=[].shift.call(arguments);t||(t=e.contents.startview),r.setContent(e),e.setContent(t,arguments)},init:function(){this.on("route:home",function(){r.setContent(this.views.homeview)}),this.on("route:chooselevel",function(){r.setContent(this.views.chooselevelview)}),this.on("route:buildlevel",function(){this.openLevelEditor()}),this.on("route:createlevel",function(e){this.openLevelEditor(this.views.levelbuilderview.contents.audioselectorview,e)}),this.on("route:notfound",function(e){console.log("No route:",e),r.setContent(this.views.homeview),this.views.pagenotfoundview.render()}),this.on("route:legal",function(){r.setContent(this.views.legalview)}),this.on("route:editlevel",function(){this.openLevelEditor(this.views.levelbuilderview.contents.openlevelview)}),this.on("route:signin",function(){var e=new v;r.setContent(e)})},getCurrentAppStatus:function(){var e=this,r=n.history.fragment,i=t.pairs(e.routes),s=null,o=null,u;return u=t.find(i,function(n){return s=t.isRegExp(n[0])?n[0]:e._routeToRegExp(n[0]),s.test(r)}),u&&(o=e._extractParameters(s,r),s=u[1]),{route:s,fragment:r,params:o}}}),g=function(){var e=new m;return e};return{initialize:g}}),require.config({paths:{jquery:["//code.jquery.com/jquery-2.1.1.min","lib/jquery"],underscore:["//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min","lib/underscore"],backbone:["//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min","lib/backbone"],text:"lib/text",templates:"../templates",bootstrap:["//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min","lib/bootstrap"],snap:["//cdn.jsdelivr.net/snap.svg/0.3.0/snap.svg-min","lib/snap.svg"],"google-analytics":["//www.google-analytics.com/analytics","lib/analytics"],tv4:"lib/tv4",schema:"schema"},shim:{bootstrap:["jquery"],snap:{exports:"Snap"},"google-analytics":{exports:"ga"}}}),require(["jquery","underscore","backbone","router","app","bootstrap"],function(e,t,n,r,i){n.View.prototype.dispose=function(){this.unbind(),this.undelegateEvents()},i.router=r.initialize(),i.router.init(),n.history.start(),console.info("loading of TouchTheBeat complete")}),define("main",function(){});